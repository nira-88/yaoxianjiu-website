function xk(i,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in i)){const l=Object.getOwnPropertyDescriptor(s,r);l&&Object.defineProperty(i,r,l.get?l:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function Sk(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Nh={exports:{}},ho={};var L0;function Tk(){if(L0)return ho;L0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var d=null;if(l!==void 0&&(d=""+l),r.key!==void 0&&(d=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:i,type:s,key:d,ref:r!==void 0?r:null,props:l}}return ho.Fragment=e,ho.jsx=n,ho.jsxs=n,ho}var I0;function Ck(){return I0||(I0=1,Nh.exports=Tk()),Nh.exports}var c=Ck(),wh={exports:{}},Ee={};var U0;function kk(){if(U0)return Ee;U0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,w={};function _(O,K,ee){this.props=O,this.context=K,this.refs=w,this.updater=ee||k}_.prototype.isReactComponent={},_.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},_.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function L(){}L.prototype=_.prototype;function F(O,K,ee){this.props=O,this.context=K,this.refs=w,this.updater=ee||k}var j=F.prototype=new L;j.constructor=F,C(j,_.prototype),j.isPureReactComponent=!0;var M=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function X(O,K,ee){var oe=ee.ref;return{$$typeof:i,type:O,key:K,ref:oe!==void 0?oe:null,props:ee}}function te(O,K){return X(O.type,K,O.props)}function he(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function ve(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return K[ee]})}var Re=/\/+/g;function qe(O,K){return typeof O=="object"&&O!==null&&O.key!=null?ve(""+O.key):K.toString(36)}function Xe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(P,P):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function q(O,K,ee,oe,Se){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var Te=!1;if(O===null)Te=!0;else switch(ke){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(O.$$typeof){case i:case e:Te=!0;break;case v:return Te=O._init,q(Te(O._payload),K,ee,oe,Se)}}if(Te)return Se=Se(O),Te=oe===""?"."+qe(O,0):oe,M(Se)?(ee="",Te!=null&&(ee=Te.replace(Re,"$&/")+"/"),q(Se,K,ee,"",function(Kn){return Kn})):Se!=null&&(he(Se)&&(Se=te(Se,ee+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(Re,"$&/")+"/")+Te)),K.push(Se)),1;Te=0;var At=oe===""?".":oe+":";if(M(O))for(var at=0;at<O.length;at++)oe=O[at],ke=At+qe(oe,at),Te+=q(oe,K,ee,ke,Se);else if(at=S(O),typeof at=="function")for(O=at.call(O),at=0;!(oe=O.next()).done;)oe=oe.value,ke=At+qe(oe,at++),Te+=q(oe,K,ee,ke,Se);else if(ke==="object"){if(typeof O.then=="function")return q(Xe(O),K,ee,oe,Se);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ne(O,K,ee){if(O==null)return O;var oe=[],Se=0;return q(O,oe,"","",function(ke){return K.call(ee,ke,Se++)}),oe}function W(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var je=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Me={map:ne,forEach:function(O,K,ee){ne(O,function(){K.apply(this,arguments)},ee)},count:function(O){var K=0;return ne(O,function(){K++}),K},toArray:function(O){return ne(O,function(K){return K})||[]},only:function(O){if(!he(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ee.Activity=y,Ee.Children=Me,Ee.Component=_,Ee.Fragment=n,Ee.Profiler=r,Ee.PureComponent=F,Ee.StrictMode=s,Ee.Suspense=f,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},Ee.cache=function(O){return function(){return O.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(O,K,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=C({},O.props),Se=O.key;if(K!=null)for(ke in K.key!==void 0&&(Se=""+K.key),K)!H.call(K,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&K.ref===void 0||(oe[ke]=K[ke]);var ke=arguments.length-2;if(ke===1)oe.children=ee;else if(1<ke){for(var Te=Array(ke),At=0;At<ke;At++)Te[At]=arguments[At+2];oe.children=Te}return X(O.type,Se,oe)},Ee.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ee.createElement=function(O,K,ee){var oe,Se={},ke=null;if(K!=null)for(oe in K.key!==void 0&&(ke=""+K.key),K)H.call(K,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Se[oe]=K[oe]);var Te=arguments.length-2;if(Te===1)Se.children=ee;else if(1<Te){for(var At=Array(Te),at=0;at<Te;at++)At[at]=arguments[at+2];Se.children=At}if(O&&O.defaultProps)for(oe in Te=O.defaultProps,Te)Se[oe]===void 0&&(Se[oe]=Te[oe]);return X(O,ke,Se)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(O){return{$$typeof:h,render:O}},Ee.isValidElement=he,Ee.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:W}},Ee.memo=function(O,K){return{$$typeof:m,type:O,compare:K===void 0?null:K}},Ee.startTransition=function(O){var K=I.T,ee={};I.T=ee;try{var oe=O(),Se=I.S;Se!==null&&Se(ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(P,je)}catch(ke){je(ke)}finally{K!==null&&ee.types!==null&&(K.types=ee.types),I.T=K}},Ee.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ee.use=function(O){return I.H.use(O)},Ee.useActionState=function(O,K,ee){return I.H.useActionState(O,K,ee)},Ee.useCallback=function(O,K){return I.H.useCallback(O,K)},Ee.useContext=function(O){return I.H.useContext(O)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(O,K){return I.H.useDeferredValue(O,K)},Ee.useEffect=function(O,K){return I.H.useEffect(O,K)},Ee.useEffectEvent=function(O){return I.H.useEffectEvent(O)},Ee.useId=function(){return I.H.useId()},Ee.useImperativeHandle=function(O,K,ee){return I.H.useImperativeHandle(O,K,ee)},Ee.useInsertionEffect=function(O,K){return I.H.useInsertionEffect(O,K)},Ee.useLayoutEffect=function(O,K){return I.H.useLayoutEffect(O,K)},Ee.useMemo=function(O,K){return I.H.useMemo(O,K)},Ee.useOptimistic=function(O,K){return I.H.useOptimistic(O,K)},Ee.useReducer=function(O,K,ee){return I.H.useReducer(O,K,ee)},Ee.useRef=function(O){return I.H.useRef(O)},Ee.useState=function(O){return I.H.useState(O)},Ee.useSyncExternalStore=function(O,K,ee){return I.H.useSyncExternalStore(O,K,ee)},Ee.useTransition=function(){return I.H.useTransition()},Ee.version="19.2.0",Ee}var z0;function Yc(){return z0||(z0=1,wh.exports=kk()),wh.exports}var E=Yc();const Zn=Sk(E),Qf=xk({__proto__:null,default:Zn},[E]);var jh={exports:{}},fo={},Rh={exports:{}},_h={};var B0;function Ek(){return B0||(B0=1,(function(i){function e(q,ne){var W=q.length;q.push(ne);e:for(;0<W;){var je=W-1>>>1,Me=q[je];if(0<r(Me,ne))q[je]=ne,q[W]=Me,W=je;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var ne=q[0],W=q.pop();if(W!==ne){q[0]=W;e:for(var je=0,Me=q.length,O=Me>>>1;je<O;){var K=2*(je+1)-1,ee=q[K],oe=K+1,Se=q[oe];if(0>r(ee,W))oe<Me&&0>r(Se,ee)?(q[je]=Se,q[oe]=W,je=oe):(q[je]=ee,q[K]=W,je=K);else if(oe<Me&&0>r(Se,W))q[je]=Se,q[oe]=W,je=oe;else break e}}return ne}function r(q,ne){var W=q.sortIndex-ne.sortIndex;return W!==0?W:q.id-ne.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var f=[],m=[],v=1,y=null,x=3,S=!1,k=!1,C=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function j(q){for(var ne=n(m);ne!==null;){if(ne.callback===null)s(m);else if(ne.startTime<=q)s(m),ne.sortIndex=ne.expirationTime,e(f,ne);else break;ne=n(m)}}function M(q){if(C=!1,j(q),!k)if(n(f)!==null)k=!0,P||(P=!0,ve());else{var ne=n(m);ne!==null&&Xe(M,ne.startTime-q)}}var P=!1,I=-1,H=5,X=-1;function te(){return w?!0:!(i.unstable_now()-X<H)}function he(){if(w=!1,P){var q=i.unstable_now();X=q;var ne=!0;try{e:{k=!1,C&&(C=!1,L(I),I=-1),S=!0;var W=x;try{t:{for(j(q),y=n(f);y!==null&&!(y.expirationTime>q&&te());){var je=y.callback;if(typeof je=="function"){y.callback=null,x=y.priorityLevel;var Me=je(y.expirationTime<=q);if(q=i.unstable_now(),typeof Me=="function"){y.callback=Me,j(q),ne=!0;break t}y===n(f)&&s(f),j(q)}else s(f);y=n(f)}if(y!==null)ne=!0;else{var O=n(m);O!==null&&Xe(M,O.startTime-q),ne=!1}}break e}finally{y=null,x=W,S=!1}ne=void 0}}finally{ne?ve():P=!1}}}var ve;if(typeof F=="function")ve=function(){F(he)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,qe=Re.port2;Re.port1.onmessage=he,ve=function(){qe.postMessage(null)}}else ve=function(){_(he,0)};function Xe(q,ne){I=_(function(){q(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(q){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var W=x;x=ne;try{return q()}finally{x=W}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=x;x=q;try{return ne()}finally{x=W}},i.unstable_scheduleCallback=function(q,ne,W){var je=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?je+W:je):W=je,q){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=W+Me,q={id:v++,callback:ne,priorityLevel:q,startTime:W,expirationTime:Me,sortIndex:-1},W>je?(q.sortIndex=W,e(m,q),n(f)===null&&q===n(m)&&(C?(L(I),I=-1):C=!0,Xe(M,W-je))):(q.sortIndex=Me,e(f,q),k||S||(k=!0,P||(P=!0,ve()))),q},i.unstable_shouldYield=te,i.unstable_wrapCallback=function(q){var ne=x;return function(){var W=x;x=ne;try{return q.apply(this,arguments)}finally{x=W}}}})(_h)),_h}var q0;function Nk(){return q0||(q0=1,Rh.exports=Ek()),Rh.exports}var Oh={exports:{}},Gt={};var F0;function wk(){if(F0)return Gt;F0=1;var i=Yc();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:m,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gt.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(f,m,null,v)},Gt.flushSync=function(f){var m=d.T,v=s.p;try{if(d.T=null,s.p=2,f)return f()}finally{d.T=m,s.p=v,s.d.f()}},Gt.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(f,m))},Gt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Gt.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:S}):v==="script"&&s.d.X(f,{crossOrigin:y,integrity:x,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Gt.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(f,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(f)},Gt.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin);s.d.L(f,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Gt.preloadModule=function(f,m){if(typeof f=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(f)},Gt.requestFormReset=function(f){s.d.r(f)},Gt.unstable_batchedUpdates=function(f,m){return f(m)},Gt.useFormState=function(f,m,v){return d.H.useFormState(f,m,v)},Gt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Gt.version="19.2.0",Gt}var V0;function Pb(){if(V0)return Oh.exports;V0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Oh.exports=wk(),Oh.exports}var H0;function jk(){if(H0)return fo;H0=1;var i=Nk(),e=Yc(),n=Pb();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var a=t,o=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(o=a.return),t=a.return;while(t)}return a.tag===3?o:null}function d(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function h(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(l(t)!==t)throw Error(s(188))}function m(t){var a=t.alternate;if(!a){if(a=l(t),a===null)throw Error(s(188));return a!==t?null:t}for(var o=t,u=a;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return f(p),t;if(g===u)return f(p),a;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=p,u=g;else{for(var b=!1,T=p.child;T;){if(T===o){b=!0,o=p,u=g;break}if(T===u){b=!0,u=p,o=g;break}T=T.sibling}if(!b){for(T=g.child;T;){if(T===o){b=!0,o=g,u=p;break}if(T===u){b=!0,u=g,o=p;break}T=T.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?t:a}function v(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=v(t),a!==null)return a;t=t.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function ve(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Re?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case F:return t.displayName||"Context";case L:return(t._context.displayName||"Context")+".Consumer";case j:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:qe(t.type)||"Memo";case H:a=t._payload,t=t._init;try{return qe(t(a))}catch{}}return null}var Xe=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},je=[],Me=-1;function O(t){return{current:t}}function K(t){0>Me||(t.current=je[Me],je[Me]=null,Me--)}function ee(t,a){Me++,je[Me]=t.current,t.current=a}var oe=O(null),Se=O(null),ke=O(null),Te=O(null);function At(t,a){switch(ee(ke,a),ee(Se,t),ee(oe,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?a0(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=a0(a),t=r0(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(oe),ee(oe,t)}function at(){K(oe),K(Se),K(ke)}function Kn(t){t.memoizedState!==null&&ee(Te,t);var a=oe.current,o=r0(a,t.type);a!==o&&(ee(Se,t),ee(oe,o))}function qi(t){Se.current===t&&(K(oe),K(Se)),Te.current===t&&(K(Te),oo._currentValue=W)}var Fi,Pm;function Rs(t){if(Fi===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Fi=a&&a[1]||"",Pm=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+t+Pm}var cu=!1;function uu(t,a){if(!t||cu)return"";cu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(G){var V=G}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(G){V=G}t.call(Q.prototype)}}else{try{throw Error()}catch(G){V=G}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(G){if(G&&V&&typeof G.stack=="string")return[G.stack,V.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],T=g[1];if(b&&T){var R=b.split(`
`),z=T.split(`
`);for(p=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;p<z.length&&!z[p].includes("DetermineComponentFrameRoot");)p++;if(u===R.length||p===z.length)for(u=R.length-1,p=z.length-1;1<=u&&0<=p&&R[u]!==z[p];)p--;for(;1<=u&&0<=p;u--,p--)if(R[u]!==z[p]){if(u!==1||p!==1)do if(u--,p--,0>p||R[u]!==z[p]){var Y=`
`+R[u].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=u&&0<=p);break}}}finally{cu=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?Rs(o):""}function $T(t,a){switch(t.tag){case 26:case 27:case 5:return Rs(t.type);case 16:return Rs("Lazy");case 13:return t.child!==a&&a!==null?Rs("Suspense Fallback"):Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 15:return uu(t.type,!1);case 11:return uu(t.type.render,!1);case 1:return uu(t.type,!0);case 31:return Rs("Activity");default:return""}}function Lm(t){try{var a="",o=null;do a+=$T(t,o),o=t,t=t.return;while(t);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var du=Object.prototype.hasOwnProperty,hu=i.unstable_scheduleCallback,fu=i.unstable_cancelCallback,ZT=i.unstable_shouldYield,WT=i.unstable_requestPaint,un=i.unstable_now,e1=i.unstable_getCurrentPriorityLevel,Im=i.unstable_ImmediatePriority,Um=i.unstable_UserBlockingPriority,Fo=i.unstable_NormalPriority,t1=i.unstable_LowPriority,zm=i.unstable_IdlePriority,n1=i.log,i1=i.unstable_setDisableYieldValue,br=null,dn=null;function Vi(t){if(typeof n1=="function"&&i1(t),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(br,t)}catch{}}var hn=Math.clz32?Math.clz32:r1,s1=Math.log,a1=Math.LN2;function r1(t){return t>>>=0,t===0?32:31-(s1(t)/a1|0)|0}var Vo=256,Ho=262144,Go=4194304;function _s(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ko(t,a,o){var u=t.pendingLanes;if(u===0)return 0;var p=0,g=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=u&134217727;return T!==0?(u=T&~g,u!==0?p=_s(u):(b&=T,b!==0?p=_s(b):o||(o=T&~t,o!==0&&(p=_s(o))))):(T=u&~g,T!==0?p=_s(T):b!==0?p=_s(b):o||(o=u&~t,o!==0&&(p=_s(o)))),p===0?0:a!==0&&a!==p&&(a&g)===0&&(g=p&-p,o=a&-a,g>=o||g===32&&(o&4194048)!==0)?a:p}function xr(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function o1(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bm(){var t=Go;return Go<<=1,(Go&62914560)===0&&(Go=4194304),t}function mu(t){for(var a=[],o=0;31>o;o++)a.push(t);return a}function Sr(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function l1(t,a,o,u,p,g){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var T=t.entanglements,R=t.expirationTimes,z=t.hiddenUpdates;for(o=b&~o;0<o;){var Y=31-hn(o),Q=1<<Y;T[Y]=0,R[Y]=-1;var V=z[Y];if(V!==null)for(z[Y]=null,Y=0;Y<V.length;Y++){var G=V[Y];G!==null&&(G.lane&=-536870913)}o&=~Q}u!==0&&qm(t,u,0),g!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=g&~(b&~a))}function qm(t,a,o){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-hn(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|o&261930}function Fm(t,a){var o=t.entangledLanes|=a;for(t=t.entanglements;o;){var u=31-hn(o),p=1<<u;p&a|t[u]&a&&(t[u]|=a),o&=~p}}function Vm(t,a){var o=a&-a;return o=(o&42)!==0?1:pu(o),(o&(t.suspendedLanes|a))!==0?0:o}function pu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function gu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Hm(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:R0(t.type))}function Gm(t,a){var o=ne.p;try{return ne.p=t,a()}finally{ne.p=o}}var Hi=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Hi,Wt="__reactProps$"+Hi,da="__reactContainer$"+Hi,vu="__reactEvents$"+Hi,c1="__reactListeners$"+Hi,u1="__reactHandles$"+Hi,Km="__reactResources$"+Hi,Tr="__reactMarker$"+Hi;function yu(t){delete t[Ut],delete t[Wt],delete t[vu],delete t[c1],delete t[u1]}function ha(t){var a=t[Ut];if(a)return a;for(var o=t.parentNode;o;){if(a=o[da]||o[Ut]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(t=f0(t);t!==null;){if(o=t[Ut])return o;t=f0(t)}return a}t=o,o=t.parentNode}return null}function fa(t){if(t=t[Ut]||t[da]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Cr(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function ma(t){var a=t[Km];return a||(a=t[Km]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Mt(t){t[Tr]=!0}var Ym=new Set,Jm={};function Os(t,a){pa(t,a),pa(t+"Capture",a)}function pa(t,a){for(Jm[t]=a,t=0;t<a.length;t++)Ym.add(a[t])}var d1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qm={},Xm={};function h1(t){return du.call(Xm,t)?!0:du.call(Qm,t)?!1:d1.test(t)?Xm[t]=!0:(Qm[t]=!0,!1)}function Yo(t,a,o){if(h1(a))if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+o)}}function Jo(t,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+o)}}function li(t,a,o,u){if(u===null)t.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(a,o,""+u)}}function Tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $m(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function f1(t,a,o){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return p.call(this)},set:function(b){o=""+b,g.call(this,b)}}),Object.defineProperty(t,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function bu(t){if(!t._valueTracker){var a=$m(t)?"checked":"value";t._valueTracker=f1(t,a,""+t[a])}}function Zm(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return t&&(u=$m(t)?t.checked?"true":"false":t.value),t=u,t!==o?(a.setValue(t),!0):!1}function Qo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var m1=/[\n"\\]/g;function Cn(t){return t.replace(m1,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function xu(t,a,o,u,p,g,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Tn(a)):t.value!==""+Tn(a)&&(t.value=""+Tn(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?Su(t,b,Tn(a)):o!=null?Su(t,b,Tn(o)):u!=null&&t.removeAttribute("value"),p==null&&g!=null&&(t.defaultChecked=!!g),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Tn(T):t.removeAttribute("name")}function Wm(t,a,o,u,p,g,b,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),a!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){bu(t);return}o=o!=null?""+Tn(o):"",a=a!=null?""+Tn(a):o,T||a===t.value||(t.value=a),t.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=T?t.checked:!!u,t.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),bu(t)}function Su(t,a,o){a==="number"&&Qo(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function ga(t,a,o,u){if(t=t.options,a){a={};for(var p=0;p<o.length;p++)a["$"+o[p]]=!0;for(o=0;o<t.length;o++)p=a.hasOwnProperty("$"+t[o].value),t[o].selected!==p&&(t[o].selected=p),p&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Tn(o),a=null,p=0;p<t.length;p++){if(t[p].value===o){t[p].selected=!0,u&&(t[p].defaultSelected=!0);return}a!==null||t[p].disabled||(a=t[p])}a!==null&&(a.selected=!0)}}function ep(t,a,o){if(a!=null&&(a=""+Tn(a),a!==t.value&&(t.value=a),o==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=o!=null?""+Tn(o):""}function tp(t,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(Xe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=Tn(a),t.defaultValue=o,u=t.textContent,u===o&&u!==""&&u!==null&&(t.value=u),bu(t)}function va(t,a){if(a){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=a;return}}t.textContent=a}var p1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function np(t,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,o):typeof o!="number"||o===0||p1.has(a)?a==="float"?t.cssFloat=o:t[a]=(""+o).trim():t[a]=o+"px"}function ip(t,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&o[p]!==u&&np(t,p,u)}else for(var g in a)a.hasOwnProperty(g)&&np(t,g,a[g])}function Tu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),v1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(t){return v1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ci(){}var Cu=null;function ku(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ya=null,ba=null;function sp(t){var a=fa(t);if(a&&(t=a.stateNode)){var o=t[Wt]||null;e:switch(t=a.stateNode,a.type){case"input":if(xu(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Cn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==t&&u.form===t.form){var p=u[Wt]||null;if(!p)throw Error(s(90));xu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===t.form&&Zm(u)}break e;case"textarea":ep(t,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&ga(t,!!o.multiple,a,!1)}}}var Eu=!1;function ap(t,a,o){if(Eu)return t(a,o);Eu=!0;try{var u=t(a);return u}finally{if(Eu=!1,(ya!==null||ba!==null)&&(Il(),ya&&(a=ya,t=ba,ba=ya=null,sp(a),t)))for(a=0;a<t.length;a++)sp(t[a])}}function kr(t,a){var o=t.stateNode;if(o===null)return null;var u=o[Wt]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nu=!1;if(ui)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{Nu=!1}var Gi=null,wu=null,$o=null;function rp(){if($o)return $o;var t,a=wu,o=a.length,u,p="value"in Gi?Gi.value:Gi.textContent,g=p.length;for(t=0;t<o&&a[t]===p[t];t++);var b=o-t;for(u=1;u<=b&&a[o-u]===p[g-u];u++);return $o=p.slice(t,1<u?1-u:void 0)}function Zo(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function op(){return!1}function en(t){function a(o,u,p,g,b){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wo:op,this.isPropagationStopped=op,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),a}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=en(As),Nr=y({},As,{view:0,detail:0}),y1=en(Nr),ju,Ru,wr,tl=y({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wr&&(wr&&t.type==="mousemove"?(ju=t.screenX-wr.screenX,Ru=t.screenY-wr.screenY):Ru=ju=0,wr=t),ju)},movementY:function(t){return"movementY"in t?t.movementY:Ru}}),lp=en(tl),b1=y({},tl,{dataTransfer:0}),x1=en(b1),S1=y({},Nr,{relatedTarget:0}),_u=en(S1),T1=y({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),C1=en(T1),k1=y({},As,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E1=en(k1),N1=y({},As,{data:0}),cp=en(N1),w1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _1(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=R1[t])?!!a[t]:!1}function Ou(){return _1}var O1=y({},Nr,{key:function(t){if(t.key){var a=w1[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(t){return t.type==="keypress"?Zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A1=en(O1),M1=y({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),up=en(M1),D1=y({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),P1=en(D1),L1=y({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),I1=en(L1),U1=y({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z1=en(U1),B1=y({},As,{newState:0,oldState:0}),q1=en(B1),F1=[9,13,27,32],Au=ui&&"CompositionEvent"in window,jr=null;ui&&"documentMode"in document&&(jr=document.documentMode);var V1=ui&&"TextEvent"in window&&!jr,dp=ui&&(!Au||jr&&8<jr&&11>=jr),hp=" ",fp=!1;function mp(t,a){switch(t){case"keyup":return F1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function H1(t,a){switch(t){case"compositionend":return pp(a);case"keypress":return a.which!==32?null:(fp=!0,hp);case"textInput":return t=a.data,t===hp&&fp?null:t;default:return null}}function G1(t,a){if(xa)return t==="compositionend"||!Au&&mp(t,a)?(t=rp(),$o=wu=Gi=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return dp&&a.locale!=="ko"?null:a.data;default:return null}}var K1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gp(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!K1[t.type]:a==="textarea"}function vp(t,a,o,u){ya?ba?ba.push(u):ba=[u]:ya=u,a=Hl(a,"onChange"),0<a.length&&(o=new el("onChange","change",null,o,u),t.push({event:o,listeners:a}))}var Rr=null,_r=null;function Y1(t){Wv(t,0)}function nl(t){var a=Cr(t);if(Zm(a))return t}function yp(t,a){if(t==="change")return a}var bp=!1;if(ui){var Mu;if(ui){var Du="oninput"in document;if(!Du){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),Du=typeof xp.oninput=="function"}Mu=Du}else Mu=!1;bp=Mu&&(!document.documentMode||9<document.documentMode)}function Sp(){Rr&&(Rr.detachEvent("onpropertychange",Tp),_r=Rr=null)}function Tp(t){if(t.propertyName==="value"&&nl(_r)){var a=[];vp(a,_r,t,ku(t)),ap(Y1,a)}}function J1(t,a,o){t==="focusin"?(Sp(),Rr=a,_r=o,Rr.attachEvent("onpropertychange",Tp)):t==="focusout"&&Sp()}function Q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(_r)}function X1(t,a){if(t==="click")return nl(a)}function $1(t,a){if(t==="input"||t==="change")return nl(a)}function Z1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var fn=typeof Object.is=="function"?Object.is:Z1;function Or(t,a){if(fn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var o=Object.keys(t),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!du.call(a,p)||!fn(t[p],a[p]))return!1}return!0}function Cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kp(t,a){var o=Cp(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=a&&u>=a)return{node:o,offset:a-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cp(o)}}function Ep(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Ep(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Np(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Qo(t.document);a instanceof t.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)t=a.contentWindow;else break;a=Qo(t.document)}return a}function Pu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var W1=ui&&"documentMode"in document&&11>=document.documentMode,Sa=null,Lu=null,Ar=null,Iu=!1;function wp(t,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Iu||Sa==null||Sa!==Qo(u)||(u=Sa,"selectionStart"in u&&Pu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ar&&Or(Ar,u)||(Ar=u,u=Hl(Lu,"onSelect"),0<u.length&&(a=new el("onSelect","select",null,a,o),t.push({event:a,listeners:u}),a.target=Sa)))}function Ms(t,a){var o={};return o[t.toLowerCase()]=a.toLowerCase(),o["Webkit"+t]="webkit"+a,o["Moz"+t]="moz"+a,o}var Ta={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Uu={},jp={};ui&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Ds(t){if(Uu[t])return Uu[t];if(!Ta[t])return t;var a=Ta[t],o;for(o in a)if(a.hasOwnProperty(o)&&o in jp)return Uu[t]=a[o];return t}var Rp=Ds("animationend"),_p=Ds("animationiteration"),Op=Ds("animationstart"),eC=Ds("transitionrun"),tC=Ds("transitionstart"),nC=Ds("transitioncancel"),Ap=Ds("transitionend"),Mp=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zu.push("scrollEnd");function In(t,a){Mp.set(t,a),Os(a,[t])}var il=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kn=[],Ca=0,Bu=0;function sl(){for(var t=Ca,a=Bu=Ca=0;a<t;){var o=kn[a];kn[a++]=null;var u=kn[a];kn[a++]=null;var p=kn[a];kn[a++]=null;var g=kn[a];if(kn[a++]=null,u!==null&&p!==null){var b=u.pending;b===null?p.next=p:(p.next=b.next,b.next=p),u.pending=p}g!==0&&Dp(o,p,g)}}function al(t,a,o,u){kn[Ca++]=t,kn[Ca++]=a,kn[Ca++]=o,kn[Ca++]=u,Bu|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function qu(t,a,o,u){return al(t,a,o,u),rl(t)}function Ps(t,a){return al(t,null,null,a),rl(t)}function Dp(t,a,o){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o);for(var p=!1,g=t.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(p=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,p&&a!==null&&(p=31-hn(o),t=g.hiddenUpdates,u=t[p],u===null?t[p]=[a]:u.push(a),a.lane=o|536870912),g):null}function rl(t){if(50<eo)throw eo=0,Xd=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ka={};function iC(t,a,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,a,o,u){return new iC(t,a,o,u)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function di(t,a){var o=t.alternate;return o===null?(o=mn(t.tag,a,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=a,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,a=t.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Pp(t,a){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,a=o.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function ol(t,a,o,u,p,g){var b=0;if(u=t,typeof t=="function")Fu(t)&&(b=1);else if(typeof t=="string")b=lk(t,o,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=mn(31,o,a,p),t.elementType=X,t.lanes=g,t;case C:return Ls(o.children,p,g,a);case w:b=8,p|=24;break;case _:return t=mn(12,o,a,p|2),t.elementType=_,t.lanes=g,t;case M:return t=mn(13,o,a,p),t.elementType=M,t.lanes=g,t;case P:return t=mn(19,o,a,p),t.elementType=P,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:b=10;break e;case L:b=9;break e;case j:b=11;break e;case I:b=14;break e;case H:b=16,u=null;break e}b=29,o=Error(s(130,t===null?"null":typeof t,"")),u=null}return a=mn(b,o,a,p),a.elementType=t,a.type=u,a.lanes=g,a}function Ls(t,a,o,u){return t=mn(7,t,u,a),t.lanes=o,t}function Vu(t,a,o){return t=mn(6,t,null,a),t.lanes=o,t}function Lp(t){var a=mn(18,null,null,0);return a.stateNode=t,a}function Hu(t,a,o){return a=mn(4,t.children!==null?t.children:[],t.key,a),a.lanes=o,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Ip=new WeakMap;function En(t,a){if(typeof t=="object"&&t!==null){var o=Ip.get(t);return o!==void 0?o:(a={value:t,source:a,stack:Lm(a)},Ip.set(t,a),a)}return{value:t,source:a,stack:Lm(a)}}var Ea=[],Na=0,ll=null,Mr=0,Nn=[],wn=0,Ki=null,Yn=1,Jn="";function hi(t,a){Ea[Na++]=Mr,Ea[Na++]=ll,ll=t,Mr=a}function Up(t,a,o){Nn[wn++]=Yn,Nn[wn++]=Jn,Nn[wn++]=Ki,Ki=t;var u=Yn;t=Jn;var p=32-hn(u)-1;u&=~(1<<p),o+=1;var g=32-hn(a)+p;if(30<g){var b=p-p%5;g=(u&(1<<b)-1).toString(32),u>>=b,p-=b,Yn=1<<32-hn(a)+p|o<<p|u,Jn=g+t}else Yn=1<<g|o<<p|u,Jn=t}function Gu(t){t.return!==null&&(hi(t,1),Up(t,1,0))}function Ku(t){for(;t===ll;)ll=Ea[--Na],Ea[Na]=null,Mr=Ea[--Na],Ea[Na]=null;for(;t===Ki;)Ki=Nn[--wn],Nn[wn]=null,Jn=Nn[--wn],Nn[wn]=null,Yn=Nn[--wn],Nn[wn]=null}function zp(t,a){Nn[wn++]=Yn,Nn[wn++]=Jn,Nn[wn++]=Ki,Yn=a.id,Jn=a.overflow,Ki=t}var zt=null,rt=null,Fe=!1,Yi=null,jn=!1,Yu=Error(s(519));function Ji(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dr(En(a,t)),Yu}function Bp(t){var a=t.stateNode,o=t.type,u=t.memoizedProps;switch(a[Ut]=t,a[Wt]=u,o){case"dialog":Pe("cancel",a),Pe("close",a);break;case"iframe":case"object":case"embed":Pe("load",a);break;case"video":case"audio":for(o=0;o<no.length;o++)Pe(no[o],a);break;case"source":Pe("error",a);break;case"img":case"image":case"link":Pe("error",a),Pe("load",a);break;case"details":Pe("toggle",a);break;case"input":Pe("invalid",a),Wm(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",a);break;case"textarea":Pe("invalid",a),tp(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||i0(a.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",a),Pe("toggle",a)),u.onScroll!=null&&Pe("scroll",a),u.onScrollEnd!=null&&Pe("scrollend",a),u.onClick!=null&&(a.onclick=ci),a=!0):a=!1,a||Ji(t,!0)}function qp(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:zt=zt.return}}function wa(t){if(t!==zt)return!1;if(!Fe)return qp(t),Fe=!0,!1;var a=t.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||dh(t.type,t.memoizedProps)),o=!o),o&&rt&&Ji(t),qp(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));rt=h0(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));rt=h0(t)}else a===27?(a=rt,ls(t.type)?(t=gh,gh=null,rt=t):rt=a):rt=zt?_n(t.stateNode.nextSibling):null;return!0}function Is(){rt=zt=null,Fe=!1}function Ju(){var t=Yi;return t!==null&&(an===null?an=t:an.push.apply(an,t),Yi=null),t}function Dr(t){Yi===null?Yi=[t]:Yi.push(t)}var Qu=O(null),Us=null,fi=null;function Qi(t,a,o){ee(Qu,a._currentValue),a._currentValue=o}function mi(t){t._currentValue=Qu.current,K(Qu)}function Xu(t,a,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===o)break;t=t.return}}function $u(t,a,o,u){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var g=p.dependencies;if(g!==null){var b=p.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=p;for(var R=0;R<a.length;R++)if(T.context===a[R]){g.lanes|=o,T=g.alternate,T!==null&&(T.lanes|=o),Xu(g.return,o,t),u||(b=null);break e}g=T.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(s(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),Xu(b,o,t),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===t){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function ja(t,a,o,u){t=null;for(var p=a,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=p.type;fn(p.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(p===Te.current){if(b=p.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(oo):t=[oo])}p=p.return}t!==null&&$u(a,t,o,u),a.flags|=262144}function cl(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zs(t){Us=t,fi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return Fp(Us,t)}function ul(t,a){return Us===null&&zs(t),Fp(t,a)}function Fp(t,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},fi===null){if(t===null)throw Error(s(308));fi=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else fi=fi.next=a;return o}var sC=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(o,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(o){return o()})}},aC=i.unstable_scheduleCallback,rC=i.unstable_NormalPriority,Tt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zu(){return{controller:new sC,data:new Map,refCount:0}}function Pr(t){t.refCount--,t.refCount===0&&aC(rC,function(){t.controller.abort()})}var Lr=null,Wu=0,Ra=0,_a=null;function oC(t,a){if(Lr===null){var o=Lr=[];Wu=0,Ra=nh(),_a={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Wu++,a.then(Vp,Vp),a}function Vp(){if(--Wu===0&&Lr!==null){_a!==null&&(_a.status="fulfilled");var t=Lr;Lr=null,Ra=0,_a=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function lC(t,a){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<o.length;p++)(0,o[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var Hp=q.S;q.S=function(t,a){wv=un(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&oC(t,a),Hp!==null&&Hp(t,a)};var Bs=O(null);function ed(){var t=Bs.current;return t!==null?t:st.pooledCache}function dl(t,a){a===null?ee(Bs,Bs.current):ee(Bs,a.pool)}function Gp(){var t=ed();return t===null?null:{parent:Tt._currentValue,pool:t}}var Oa=Error(s(460)),td=Error(s(474)),hl=Error(s(542)),fl={then:function(){}};function Kp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yp(t,a,o){switch(o=t[o],o===void 0?t.push(a):o!==a&&(a.then(ci,ci),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Qp(t),t;default:if(typeof a.status=="string")a.then(ci,ci);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Qp(t),t}throw Fs=a,Oa}}function qs(t){try{var a=t._init;return a(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fs=o,Oa):o}}var Fs=null;function Jp(){if(Fs===null)throw Error(s(459));var t=Fs;return Fs=null,t}function Qp(t){if(t===Oa||t===hl)throw Error(s(483))}var Aa=null,Ir=0;function ml(t){var a=Ir;return Ir+=1,Aa===null&&(Aa=[]),Yp(Aa,t,a)}function Ur(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function pl(t,a){throw a.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Xp(t){function a(D,A){if(t){var U=D.deletions;U===null?(D.deletions=[A],D.flags|=16):U.push(A)}}function o(D,A){if(!t)return null;for(;A!==null;)a(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function p(D,A){return D=di(D,A),D.index=0,D.sibling=null,D}function g(D,A,U){return D.index=U,t?(U=D.alternate,U!==null?(U=U.index,U<A?(D.flags|=67108866,A):U):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function b(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function T(D,A,U,J){return A===null||A.tag!==6?(A=Vu(U,D.mode,J),A.return=D,A):(A=p(A,U),A.return=D,A)}function R(D,A,U,J){var ye=U.type;return ye===C?Y(D,A,U.props.children,J,U.key):A!==null&&(A.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&qs(ye)===A.type)?(A=p(A,U.props),Ur(A,U),A.return=D,A):(A=ol(U.type,U.key,U.props,null,D.mode,J),Ur(A,U),A.return=D,A)}function z(D,A,U,J){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=Hu(U,D.mode,J),A.return=D,A):(A=p(A,U.children||[]),A.return=D,A)}function Y(D,A,U,J,ye){return A===null||A.tag!==7?(A=Ls(U,D.mode,J,ye),A.return=D,A):(A=p(A,U),A.return=D,A)}function Q(D,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Vu(""+A,D.mode,U),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case S:return U=ol(A.type,A.key,A.props,null,D.mode,U),Ur(U,A),U.return=D,U;case k:return A=Hu(A,D.mode,U),A.return=D,A;case H:return A=qs(A),Q(D,A,U)}if(Xe(A)||ve(A))return A=Ls(A,D.mode,U,null),A.return=D,A;if(typeof A.then=="function")return Q(D,ml(A),U);if(A.$$typeof===F)return Q(D,ul(D,A),U);pl(D,A)}return null}function V(D,A,U,J){var ye=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ye!==null?null:T(D,A,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return U.key===ye?R(D,A,U,J):null;case k:return U.key===ye?z(D,A,U,J):null;case H:return U=qs(U),V(D,A,U,J)}if(Xe(U)||ve(U))return ye!==null?null:Y(D,A,U,J,null);if(typeof U.then=="function")return V(D,A,ml(U),J);if(U.$$typeof===F)return V(D,A,ul(D,U),J);pl(D,U)}return null}function G(D,A,U,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return D=D.get(U)||null,T(A,D,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return D=D.get(J.key===null?U:J.key)||null,R(A,D,J,ye);case k:return D=D.get(J.key===null?U:J.key)||null,z(A,D,J,ye);case H:return J=qs(J),G(D,A,U,J,ye)}if(Xe(J)||ve(J))return D=D.get(U)||null,Y(A,D,J,ye,null);if(typeof J.then=="function")return G(D,A,U,ml(J),ye);if(J.$$typeof===F)return G(D,A,U,ul(A,J),ye);pl(A,J)}return null}function fe(D,A,U,J){for(var ye=null,Ve=null,ge=A,we=A=0,ze=null;ge!==null&&we<U.length;we++){ge.index>we?(ze=ge,ge=null):ze=ge.sibling;var He=V(D,ge,U[we],J);if(He===null){ge===null&&(ge=ze);break}t&&ge&&He.alternate===null&&a(D,ge),A=g(He,A,we),Ve===null?ye=He:Ve.sibling=He,Ve=He,ge=ze}if(we===U.length)return o(D,ge),Fe&&hi(D,we),ye;if(ge===null){for(;we<U.length;we++)ge=Q(D,U[we],J),ge!==null&&(A=g(ge,A,we),Ve===null?ye=ge:Ve.sibling=ge,Ve=ge);return Fe&&hi(D,we),ye}for(ge=u(ge);we<U.length;we++)ze=G(ge,D,we,U[we],J),ze!==null&&(t&&ze.alternate!==null&&ge.delete(ze.key===null?we:ze.key),A=g(ze,A,we),Ve===null?ye=ze:Ve.sibling=ze,Ve=ze);return t&&ge.forEach(function(fs){return a(D,fs)}),Fe&&hi(D,we),ye}function be(D,A,U,J){if(U==null)throw Error(s(151));for(var ye=null,Ve=null,ge=A,we=A=0,ze=null,He=U.next();ge!==null&&!He.done;we++,He=U.next()){ge.index>we?(ze=ge,ge=null):ze=ge.sibling;var fs=V(D,ge,He.value,J);if(fs===null){ge===null&&(ge=ze);break}t&&ge&&fs.alternate===null&&a(D,ge),A=g(fs,A,we),Ve===null?ye=fs:Ve.sibling=fs,Ve=fs,ge=ze}if(He.done)return o(D,ge),Fe&&hi(D,we),ye;if(ge===null){for(;!He.done;we++,He=U.next())He=Q(D,He.value,J),He!==null&&(A=g(He,A,we),Ve===null?ye=He:Ve.sibling=He,Ve=He);return Fe&&hi(D,we),ye}for(ge=u(ge);!He.done;we++,He=U.next())He=G(ge,D,we,He.value,J),He!==null&&(t&&He.alternate!==null&&ge.delete(He.key===null?we:He.key),A=g(He,A,we),Ve===null?ye=He:Ve.sibling=He,Ve=He);return t&&ge.forEach(function(bk){return a(D,bk)}),Fe&&hi(D,we),ye}function nt(D,A,U,J){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case S:e:{for(var ye=U.key;A!==null;){if(A.key===ye){if(ye=U.type,ye===C){if(A.tag===7){o(D,A.sibling),J=p(A,U.props.children),J.return=D,D=J;break e}}else if(A.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&qs(ye)===A.type){o(D,A.sibling),J=p(A,U.props),Ur(J,U),J.return=D,D=J;break e}o(D,A);break}else a(D,A);A=A.sibling}U.type===C?(J=Ls(U.props.children,D.mode,J,U.key),J.return=D,D=J):(J=ol(U.type,U.key,U.props,null,D.mode,J),Ur(J,U),J.return=D,D=J)}return b(D);case k:e:{for(ye=U.key;A!==null;){if(A.key===ye)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){o(D,A.sibling),J=p(A,U.children||[]),J.return=D,D=J;break e}else{o(D,A);break}else a(D,A);A=A.sibling}J=Hu(U,D.mode,J),J.return=D,D=J}return b(D);case H:return U=qs(U),nt(D,A,U,J)}if(Xe(U))return fe(D,A,U,J);if(ve(U)){if(ye=ve(U),typeof ye!="function")throw Error(s(150));return U=ye.call(U),be(D,A,U,J)}if(typeof U.then=="function")return nt(D,A,ml(U),J);if(U.$$typeof===F)return nt(D,A,ul(D,U),J);pl(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(o(D,A.sibling),J=p(A,U),J.return=D,D=J):(o(D,A),J=Vu(U,D.mode,J),J.return=D,D=J),b(D)):o(D,A)}return function(D,A,U,J){try{Ir=0;var ye=nt(D,A,U,J);return Aa=null,ye}catch(ge){if(ge===Oa||ge===hl)throw ge;var Ve=mn(29,ge,null,D.mode);return Ve.lanes=J,Ve.return=D,Ve}finally{}}}var Vs=Xp(!0),$p=Xp(!1),Xi=!1;function nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $i(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zi(t,a,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=rl(t),Dp(t,null,o),a}return al(t,u,a,o),rl(t)}function zr(t,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,o|=u,a.lanes=o,Fm(t,o)}}function sd(t,a){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?p=g=a:g=g.next=a}else p=g=a;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=a:t.next=a,o.lastBaseUpdate=a}var ad=!1;function Br(){if(ad){var t=_a;if(t!==null)throw t}}function qr(t,a,o,u){ad=!1;var p=t.updateQueue;Xi=!1;var g=p.firstBaseUpdate,b=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var R=T,z=R.next;R.next=null,b===null?g=z:b.next=z,b=R;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==b&&(T===null?Y.firstBaseUpdate=z:T.next=z,Y.lastBaseUpdate=R))}if(g!==null){var Q=p.baseState;b=0,Y=z=R=null,T=g;do{var V=T.lane&-536870913,G=V!==T.lane;if(G?(Ue&V)===V:(u&V)===V){V!==0&&V===Ra&&(ad=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=t,be=T;V=a;var nt=o;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){Q=fe.call(nt,Q,V);break e}Q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,V=typeof fe=="function"?fe.call(nt,Q,V):fe,V==null)break e;Q=y({},Q,V);break e;case 2:Xi=!0}}V=T.callback,V!==null&&(t.flags|=64,G&&(t.flags|=8192),G=p.callbacks,G===null?p.callbacks=[V]:G.push(V))}else G={lane:V,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(z=Y=G,R=Q):Y=Y.next=G,b|=V;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;G=T,T=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);Y===null&&(R=Q),p.baseState=R,p.firstBaseUpdate=z,p.lastBaseUpdate=Y,g===null&&(p.shared.lanes=0),is|=b,t.lanes=b,t.memoizedState=Q}}function Zp(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function Wp(t,a){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)Zp(o[t],a)}var Ma=O(null),gl=O(0);function eg(t,a){t=Ci,ee(gl,t),ee(Ma,a),Ci=t|a.baseLanes}function rd(){ee(gl,Ci),ee(Ma,Ma.current)}function od(){Ci=gl.current,K(Ma),K(gl)}var pn=O(null),Rn=null;function Wi(t){var a=t.alternate;ee(bt,bt.current&1),ee(pn,t),Rn===null&&(a===null||Ma.current!==null||a.memoizedState!==null)&&(Rn=t)}function ld(t){ee(bt,bt.current),ee(pn,t),Rn===null&&(Rn=t)}function tg(t){t.tag===22?(ee(bt,bt.current),ee(pn,t),Rn===null&&(Rn=t)):es()}function es(){ee(bt,bt.current),ee(pn,pn.current)}function gn(t){K(pn),Rn===t&&(Rn=null),K(bt)}var bt=O(0);function vl(t){for(var a=t;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||mh(o)||ph(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pi=0,Ne=null,et=null,Ct=null,yl=!1,Da=!1,Hs=!1,bl=0,Fr=0,Pa=null,cC=0;function ht(){throw Error(s(321))}function cd(t,a){if(a===null)return!1;for(var o=0;o<a.length&&o<t.length;o++)if(!fn(t[o],a[o]))return!1;return!0}function ud(t,a,o,u,p,g){return pi=g,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,q.H=t===null||t.memoizedState===null?Ug:Ed,Hs=!1,g=o(u,p),Hs=!1,Da&&(g=ig(a,o,u,p)),ng(t),g}function ng(t){q.H=Gr;var a=et!==null&&et.next!==null;if(pi=0,Ct=et=Ne=null,yl=!1,Fr=0,Pa=null,a)throw Error(s(300));t===null||kt||(t=t.dependencies,t!==null&&cl(t)&&(kt=!0))}function ig(t,a,o,u){Ne=t;var p=0;do{if(Da&&(Pa=null),Fr=0,Da=!1,25<=p)throw Error(s(301));if(p+=1,Ct=et=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}q.H=zg,g=a(o,u)}while(Da);return g}function uC(){var t=q.H,a=t.useState()[0];return a=typeof a.then=="function"?Vr(a):a,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Ne.flags|=1024),a}function dd(){var t=bl!==0;return bl=0,t}function hd(t,a,o){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~o}function fd(t){if(yl){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}yl=!1}pi=0,Ct=et=Ne=null,Da=!1,Fr=bl=0,Pa=null}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ne.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function xt(){if(et===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var a=Ct===null?Ne.memoizedState:Ct.next;if(a!==null)Ct=a,et=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?Ne.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vr(t){var a=Fr;return Fr+=1,Pa===null&&(Pa=[]),t=Yp(Pa,t,a),a=Ne,(Ct===null?a.memoizedState:Ct.next)===null&&(a=a.alternate,q.H=a===null||a.memoizedState===null?Ug:Ed),t}function Sl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vr(t);if(t.$$typeof===F)return Bt(t)}throw Error(s(438,String(t)))}function md(t){var a=null,o=Ne.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=xl(),Ne.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(t),u=0;u<t;u++)o[u]=te;return a.index++,o}function gi(t,a){return typeof a=="function"?a(t):a}function Tl(t){var a=xt();return pd(a,et,t)}function pd(t,a,o){var u=t.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var p=t.baseQueue,g=u.pending;if(g!==null){if(p!==null){var b=p.next;p.next=g.next,g.next=b}a.baseQueue=p=g,u.pending=null}if(g=t.baseState,p===null)t.memoizedState=g;else{a=p.next;var T=b=null,R=null,z=a,Y=!1;do{var Q=z.lane&-536870913;if(Q!==z.lane?(Ue&Q)===Q:(pi&Q)===Q){var V=z.revertLane;if(V===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Q===Ra&&(Y=!0);else if((pi&V)===V){z=z.next,V===Ra&&(Y=!0);continue}else Q={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(T=R=Q,b=g):R=R.next=Q,Ne.lanes|=V,is|=V;Q=z.action,Hs&&o(g,Q),g=z.hasEagerState?z.eagerState:o(g,Q)}else V={lane:Q,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(T=R=V,b=g):R=R.next=V,Ne.lanes|=Q,is|=Q;z=z.next}while(z!==null&&z!==a);if(R===null?b=g:R.next=T,!fn(g,t.memoizedState)&&(kt=!0,Y&&(o=_a,o!==null)))throw o;t.memoizedState=g,t.baseState=b,t.baseQueue=R,u.lastRenderedState=g}return p===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function gd(t){var a=xt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=t;var u=o.dispatch,p=o.pending,g=a.memoizedState;if(p!==null){o.pending=null;var b=p=p.next;do g=t(g,b.action),b=b.next;while(b!==p);fn(g,a.memoizedState)||(kt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),o.lastRenderedState=g}return[g,u]}function sg(t,a,o){var u=Ne,p=xt(),g=Fe;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!fn((et||p).memoizedState,o);if(b&&(p.memoizedState=o,kt=!0),p=p.queue,bd(og.bind(null,u,p,t),[t]),p.getSnapshot!==a||b||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,La(9,{destroy:void 0},rg.bind(null,u,p,o,a),null),st===null)throw Error(s(349));g||(pi&127)!==0||ag(u,a,o)}return o}function ag(t,a,o){t.flags|=16384,t={getSnapshot:a,value:o},a=Ne.updateQueue,a===null?(a=xl(),Ne.updateQueue=a,a.stores=[t]):(o=a.stores,o===null?a.stores=[t]:o.push(t))}function rg(t,a,o,u){a.value=o,a.getSnapshot=u,lg(a)&&cg(t)}function og(t,a,o){return o(function(){lg(a)&&cg(t)})}function lg(t){var a=t.getSnapshot;t=t.value;try{var o=a();return!fn(t,o)}catch{return!0}}function cg(t){var a=Ps(t,2);a!==null&&rn(a,t,2)}function vd(t){var a=Yt();if(typeof t=="function"){var o=t;if(t=o(),Hs){Vi(!0);try{o()}finally{Vi(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:t},a}function ug(t,a,o,u){return t.baseState=o,pd(t,et,typeof u=="function"?u:gi)}function dC(t,a,o,u,p){if(El(t))throw Error(s(485));if(t=a.action,t!==null){var g={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};q.T!==null?o(!0):g.isTransition=!1,u(g),o=a.pending,o===null?(g.next=a.pending=g,dg(a,g)):(g.next=o.next,a.pending=o.next=g)}}function dg(t,a){var o=a.action,u=a.payload,p=t.state;if(a.isTransition){var g=q.T,b={};q.T=b;try{var T=o(p,u),R=q.S;R!==null&&R(b,T),hg(t,a,T)}catch(z){yd(t,a,z)}finally{g!==null&&b.types!==null&&(g.types=b.types),q.T=g}}else try{g=o(p,u),hg(t,a,g)}catch(z){yd(t,a,z)}}function hg(t,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){fg(t,a,u)},function(u){return yd(t,a,u)}):fg(t,a,o)}function fg(t,a,o){a.status="fulfilled",a.value=o,mg(a),t.state=o,a=t.pending,a!==null&&(o=a.next,o===a?t.pending=null:(o=o.next,a.next=o,dg(t,o)))}function yd(t,a,o){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,mg(a),a=a.next;while(a!==u)}t.action=null}function mg(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function pg(t,a){return a}function gg(t,a){if(Fe){var o=st.formState;if(o!==null){e:{var u=Ne;if(Fe){if(rt){t:{for(var p=rt,g=jn;p.nodeType!==8;){if(!g){p=null;break t}if(p=_n(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){rt=_n(p.nextSibling),u=p.data==="F!";break e}}Ji(u)}u=!1}u&&(a=o[0])}}return o=Yt(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:a},o.queue=u,o=Pg.bind(null,Ne,u),u.dispatch=o,u=vd(!1),g=kd.bind(null,Ne,!1,u.queue),u=Yt(),p={state:a,dispatch:null,action:t,pending:null},u.queue=p,o=dC.bind(null,Ne,p,g,o),p.dispatch=o,u.memoizedState=t,[a,o,!1]}function vg(t){var a=xt();return yg(a,et,t)}function yg(t,a,o){if(a=pd(t,a,pg)[0],t=Tl(gi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Vr(a)}catch(b){throw b===Oa?hl:b}else u=a;a=xt();var p=a.queue,g=p.dispatch;return o!==a.memoizedState&&(Ne.flags|=2048,La(9,{destroy:void 0},hC.bind(null,p,o),null)),[u,g,t]}function hC(t,a){t.action=a}function bg(t){var a=xt(),o=et;if(o!==null)return yg(a,o,t);xt(),a=a.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=t,[a,u,!1]}function La(t,a,o,u){return t={tag:t,create:o,deps:u,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=xl(),Ne.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,a.lastEffect=t),t}function xg(){return xt().memoizedState}function Cl(t,a,o,u){var p=Yt();Ne.flags|=t,p.memoizedState=La(1|a,{destroy:void 0},o,u===void 0?null:u)}function kl(t,a,o,u){var p=xt();u=u===void 0?null:u;var g=p.memoizedState.inst;et!==null&&u!==null&&cd(u,et.memoizedState.deps)?p.memoizedState=La(a,g,o,u):(Ne.flags|=t,p.memoizedState=La(1|a,g,o,u))}function Sg(t,a){Cl(8390656,8,t,a)}function bd(t,a){kl(2048,8,t,a)}function fC(t){Ne.flags|=4;var a=Ne.updateQueue;if(a===null)a=xl(),Ne.updateQueue=a,a.events=[t];else{var o=a.events;o===null?a.events=[t]:o.push(t)}}function Tg(t){var a=xt().memoizedState;return fC({ref:a,nextImpl:t}),function(){if((Ye&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Cg(t,a){return kl(4,2,t,a)}function kg(t,a){return kl(4,4,t,a)}function Eg(t,a){if(typeof a=="function"){t=t();var o=a(t);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Ng(t,a,o){o=o!=null?o.concat([t]):null,kl(4,4,Eg.bind(null,a,t),o)}function xd(){}function wg(t,a){var o=xt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&cd(a,u[1])?u[0]:(o.memoizedState=[t,a],t)}function jg(t,a){var o=xt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&cd(a,u[1]))return u[0];if(u=t(),Hs){Vi(!0);try{t()}finally{Vi(!1)}}return o.memoizedState=[u,a],u}function Sd(t,a,o){return o===void 0||(pi&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=a:(t.memoizedState=o,t=Rv(),Ne.lanes|=t,is|=t,o)}function Rg(t,a,o,u){return fn(o,a)?o:Ma.current!==null?(t=Sd(t,o,u),fn(t,a)||(kt=!0),t):(pi&42)===0||(pi&1073741824)!==0&&(Ue&261930)===0?(kt=!0,t.memoizedState=o):(t=Rv(),Ne.lanes|=t,is|=t,a)}function _g(t,a,o,u,p){var g=ne.p;ne.p=g!==0&&8>g?g:8;var b=q.T,T={};q.T=T,kd(t,!1,a,o);try{var R=p(),z=q.S;if(z!==null&&z(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=lC(R,u);Hr(t,a,Y,bn(t))}else Hr(t,a,u,bn(t))}catch(Q){Hr(t,a,{then:function(){},status:"rejected",reason:Q},bn())}finally{ne.p=g,b!==null&&T.types!==null&&(b.types=T.types),q.T=b}}function mC(){}function Td(t,a,o,u){if(t.tag!==5)throw Error(s(476));var p=Og(t).queue;_g(t,p,a,W,o===null?mC:function(){return Ag(t),o(u)})}function Og(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:W},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Ag(t){var a=Og(t);a.next===null&&(a=t.alternate.memoizedState),Hr(t,a.next.queue,{},bn())}function Cd(){return Bt(oo)}function Mg(){return xt().memoizedState}function Dg(){return xt().memoizedState}function pC(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var o=bn();t=$i(o);var u=Zi(a,t,o);u!==null&&(rn(u,a,o),zr(u,a,o)),a={cache:Zu()},t.payload=a;return}a=a.return}}function gC(t,a,o){var u=bn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},El(t)?Lg(a,o):(o=qu(t,a,o,u),o!==null&&(rn(o,t,u),Ig(o,a,u)))}function Pg(t,a,o){var u=bn();Hr(t,a,o,u)}function Hr(t,a,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(El(t))Lg(a,p);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var b=a.lastRenderedState,T=g(b,o);if(p.hasEagerState=!0,p.eagerState=T,fn(T,b))return al(t,a,p,0),st===null&&sl(),!1}catch{}finally{}if(o=qu(t,a,p,u),o!==null)return rn(o,t,u),Ig(o,a,u),!0}return!1}function kd(t,a,o,u){if(u={lane:2,revertLane:nh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},El(t)){if(a)throw Error(s(479))}else a=qu(t,o,u,2),a!==null&&rn(a,t,2)}function El(t){var a=t.alternate;return t===Ne||a!==null&&a===Ne}function Lg(t,a){Da=yl=!0;var o=t.pending;o===null?a.next=a:(a.next=o.next,o.next=a),t.pending=a}function Ig(t,a,o){if((o&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,o|=u,a.lanes=o,Fm(t,o)}}var Gr={readContext:Bt,use:Sl,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Gr.useEffectEvent=ht;var Ug={readContext:Bt,use:Sl,useCallback:function(t,a){return Yt().memoizedState=[t,a===void 0?null:a],t},useContext:Bt,useEffect:Sg,useImperativeHandle:function(t,a,o){o=o!=null?o.concat([t]):null,Cl(4194308,4,Eg.bind(null,a,t),o)},useLayoutEffect:function(t,a){return Cl(4194308,4,t,a)},useInsertionEffect:function(t,a){Cl(4,2,t,a)},useMemo:function(t,a){var o=Yt();a=a===void 0?null:a;var u=t();if(Hs){Vi(!0);try{t()}finally{Vi(!1)}}return o.memoizedState=[u,a],u},useReducer:function(t,a,o){var u=Yt();if(o!==void 0){var p=o(a);if(Hs){Vi(!0);try{o(a)}finally{Vi(!1)}}}else p=a;return u.memoizedState=u.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},u.queue=t,t=t.dispatch=gC.bind(null,Ne,t),[u.memoizedState,t]},useRef:function(t){var a=Yt();return t={current:t},a.memoizedState=t},useState:function(t){t=vd(t);var a=t.queue,o=Pg.bind(null,Ne,a);return a.dispatch=o,[t.memoizedState,o]},useDebugValue:xd,useDeferredValue:function(t,a){var o=Yt();return Sd(o,t,a)},useTransition:function(){var t=vd(!1);return t=_g.bind(null,Ne,t.queue,!0,!1),Yt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,o){var u=Ne,p=Yt();if(Fe){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),st===null)throw Error(s(349));(Ue&127)!==0||ag(u,a,o)}p.memoizedState=o;var g={value:o,getSnapshot:a};return p.queue=g,Sg(og.bind(null,u,g,t),[t]),u.flags|=2048,La(9,{destroy:void 0},rg.bind(null,u,g,o,a),null),o},useId:function(){var t=Yt(),a=st.identifierPrefix;if(Fe){var o=Jn,u=Yn;o=(u&~(1<<32-hn(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=bl++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=cC++,a="_"+a+"r_"+o.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Cd,useFormState:gg,useActionState:gg,useOptimistic:function(t){var a=Yt();a.memoizedState=a.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=kd.bind(null,Ne,!0,o),o.dispatch=a,[t,a]},useMemoCache:md,useCacheRefresh:function(){return Yt().memoizedState=pC.bind(null,Ne)},useEffectEvent:function(t){var a=Yt(),o={impl:t};return a.memoizedState=o,function(){if((Ye&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Ed={readContext:Bt,use:Sl,useCallback:wg,useContext:Bt,useEffect:bd,useImperativeHandle:Ng,useInsertionEffect:Cg,useLayoutEffect:kg,useMemo:jg,useReducer:Tl,useRef:xg,useState:function(){return Tl(gi)},useDebugValue:xd,useDeferredValue:function(t,a){var o=xt();return Rg(o,et.memoizedState,t,a)},useTransition:function(){var t=Tl(gi)[0],a=xt().memoizedState;return[typeof t=="boolean"?t:Vr(t),a]},useSyncExternalStore:sg,useId:Mg,useHostTransitionStatus:Cd,useFormState:vg,useActionState:vg,useOptimistic:function(t,a){var o=xt();return ug(o,et,t,a)},useMemoCache:md,useCacheRefresh:Dg};Ed.useEffectEvent=Tg;var zg={readContext:Bt,use:Sl,useCallback:wg,useContext:Bt,useEffect:bd,useImperativeHandle:Ng,useInsertionEffect:Cg,useLayoutEffect:kg,useMemo:jg,useReducer:gd,useRef:xg,useState:function(){return gd(gi)},useDebugValue:xd,useDeferredValue:function(t,a){var o=xt();return et===null?Sd(o,t,a):Rg(o,et.memoizedState,t,a)},useTransition:function(){var t=gd(gi)[0],a=xt().memoizedState;return[typeof t=="boolean"?t:Vr(t),a]},useSyncExternalStore:sg,useId:Mg,useHostTransitionStatus:Cd,useFormState:bg,useActionState:bg,useOptimistic:function(t,a){var o=xt();return et!==null?ug(o,et,t,a):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:md,useCacheRefresh:Dg};zg.useEffectEvent=Tg;function Nd(t,a,o,u){a=t.memoizedState,o=o(u,a),o=o==null?a:y({},a,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var wd={enqueueSetState:function(t,a,o){t=t._reactInternals;var u=bn(),p=$i(u);p.payload=a,o!=null&&(p.callback=o),a=Zi(t,p,u),a!==null&&(rn(a,t,u),zr(a,t,u))},enqueueReplaceState:function(t,a,o){t=t._reactInternals;var u=bn(),p=$i(u);p.tag=1,p.payload=a,o!=null&&(p.callback=o),a=Zi(t,p,u),a!==null&&(rn(a,t,u),zr(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var o=bn(),u=$i(o);u.tag=2,a!=null&&(u.callback=a),a=Zi(t,u,o),a!==null&&(rn(a,t,o),zr(a,t,o))}};function Bg(t,a,o,u,p,g,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,b):a.prototype&&a.prototype.isPureReactComponent?!Or(o,u)||!Or(p,g):!0}function qg(t,a,o,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==t&&wd.enqueueReplaceState(a,a.state,null)}function Gs(t,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(t=t.defaultProps){o===a&&(o=y({},o));for(var p in t)o[p]===void 0&&(o[p]=t[p])}return o}function Fg(t){il(t)}function Vg(t){console.error(t)}function Hg(t){il(t)}function Nl(t,a){try{var o=t.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Gg(t,a,o){try{var u=t.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function jd(t,a,o){return o=$i(o),o.tag=3,o.payload={element:null},o.callback=function(){Nl(t,a)},o}function Kg(t){return t=$i(t),t.tag=3,t}function Yg(t,a,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;t.payload=function(){return p(g)},t.callback=function(){Gg(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Gg(a,o,u),typeof p!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function vC(t,a,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&ja(a,o,p,!0),o=pn.current,o!==null){switch(o.tag){case 31:case 13:return Rn===null?Ul():o.alternate===null&&ft===0&&(ft=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===fl?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Wd(t,u,p)),!1;case 22:return o.flags|=65536,u===fl?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Wd(t,u,p)),!1}throw Error(s(435,o.tag))}return Wd(t,u,p),Ul(),!1}if(Fe)return a=pn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==Yu&&(t=Error(s(422),{cause:u}),Dr(En(t,o)))):(u!==Yu&&(a=Error(s(423),{cause:u}),Dr(En(a,o))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,u=En(u,o),p=jd(t.stateNode,u,p),sd(t,p),ft!==4&&(ft=2)),!1;var g=Error(s(520),{cause:u});if(g=En(g,o),Wr===null?Wr=[g]:Wr.push(g),ft!==4&&(ft=2),a===null)return!0;u=En(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,t=p&-p,o.lanes|=t,t=jd(o.stateNode,u,t),sd(o,t),!1;case 1:if(a=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ss===null||!ss.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Kg(p),Yg(p,t,o,u),sd(o,p),!1}o=o.return}while(o!==null);return!1}var Rd=Error(s(461)),kt=!1;function qt(t,a,o,u){a.child=t===null?$p(a,null,o,u):Vs(a,t.child,o,u)}function Jg(t,a,o,u,p){o=o.render;var g=a.ref;if("ref"in u){var b={};for(var T in u)T!=="ref"&&(b[T]=u[T])}else b=u;return zs(a),u=ud(t,a,o,b,g,p),T=dd(),t!==null&&!kt?(hd(t,a,p),vi(t,a,p)):(Fe&&T&&Gu(a),a.flags|=1,qt(t,a,u,p),a.child)}function Qg(t,a,o,u,p){if(t===null){var g=o.type;return typeof g=="function"&&!Fu(g)&&g.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=g,Xg(t,a,g,u,p)):(t=ol(o.type,null,u,a,a.mode,p),t.ref=a.ref,t.return=a,a.child=t)}if(g=t.child,!Id(t,p)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Or,o(b,u)&&t.ref===a.ref)return vi(t,a,p)}return a.flags|=1,t=di(g,u),t.ref=a.ref,t.return=a,a.child=t}function Xg(t,a,o,u,p){if(t!==null){var g=t.memoizedProps;if(Or(g,u)&&t.ref===a.ref)if(kt=!1,a.pendingProps=u=g,Id(t,p))(t.flags&131072)!==0&&(kt=!0);else return a.lanes=t.lanes,vi(t,a,p)}return _d(t,a,o,u,p)}function $g(t,a,o,u){var p=u.children,g=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,t!==null){for(u=a.child=t.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,a.child=null;return Zg(t,a,g,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&dl(a,g!==null?g.cachePool:null),g!==null?eg(a,g):rd(),tg(a);else return u=a.lanes=536870912,Zg(t,a,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(dl(a,g.cachePool),eg(a,g),es(),a.memoizedState=null):(t!==null&&dl(a,null),rd(),es());return qt(t,a,p,o),a.child}function Kr(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Zg(t,a,o,u,p){var g=ed();return g=g===null?null:{parent:Tt._currentValue,pool:g},a.memoizedState={baseLanes:o,cachePool:g},t!==null&&dl(a,null),rd(),tg(a),t!==null&&ja(t,a,u,!0),a.childLanes=p,null}function wl(t,a){return a=Rl({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Wg(t,a,o){return Vs(a,t.child,null,o),t=wl(a,a.pendingProps),t.flags|=2,gn(a),a.memoizedState=null,t}function yC(t,a,o){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Fe){if(u.mode==="hidden")return t=wl(a,u),a.lanes=536870912,Kr(null,t);if(ld(a),(t=rt)?(t=d0(t,jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:Yn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},o=Lp(t),o.return=a,a.child=o,zt=a,rt=null)):t=null,t===null)throw Ji(a);return a.lanes=536870912,null}return wl(a,u)}var g=t.memoizedState;if(g!==null){var b=g.dehydrated;if(ld(a),p)if(a.flags&256)a.flags&=-257,a=Wg(t,a,o);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(kt||ja(t,a,o,!1),p=(o&t.childLanes)!==0,kt||p){if(u=st,u!==null&&(b=Vm(u,o),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ps(t,b),rn(u,t,b),Rd;Ul(),a=Wg(t,a,o)}else t=g.treeContext,rt=_n(b.nextSibling),zt=a,Fe=!0,Yi=null,jn=!1,t!==null&&zp(a,t),a=wl(a,u),a.flags|=4096;return a}return t=di(t.child,{mode:u.mode,children:u.children}),t.ref=a.ref,a.child=t,t.return=a,t}function jl(t,a){var o=a.ref;if(o===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(t===null||t.ref!==o)&&(a.flags|=4194816)}}function _d(t,a,o,u,p){return zs(a),o=ud(t,a,o,u,void 0,p),u=dd(),t!==null&&!kt?(hd(t,a,p),vi(t,a,p)):(Fe&&u&&Gu(a),a.flags|=1,qt(t,a,o,p),a.child)}function ev(t,a,o,u,p,g){return zs(a),a.updateQueue=null,o=ig(a,u,o,p),ng(t),u=dd(),t!==null&&!kt?(hd(t,a,g),vi(t,a,g)):(Fe&&u&&Gu(a),a.flags|=1,qt(t,a,o,g),a.child)}function tv(t,a,o,u,p){if(zs(a),a.stateNode===null){var g=ka,b=o.contextType;typeof b=="object"&&b!==null&&(g=Bt(b)),g=new o(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wd,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},nd(a),b=o.contextType,g.context=typeof b=="object"&&b!==null?Bt(b):ka,g.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Nd(a,o,b,u),g.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&wd.enqueueReplaceState(g,g.state,null),qr(a,u,g,p),Br(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){g=a.stateNode;var T=a.memoizedProps,R=Gs(o,T);g.props=R;var z=g.context,Y=o.contextType;b=ka,typeof Y=="object"&&Y!==null&&(b=Bt(Y));var Q=o.getDerivedStateFromProps;Y=typeof Q=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=a.pendingProps!==T,Y||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||z!==b)&&qg(a,g,u,b),Xi=!1;var V=a.memoizedState;g.state=V,qr(a,u,g,p),Br(),z=a.memoizedState,T||V!==z||Xi?(typeof Q=="function"&&(Nd(a,o,Q,u),z=a.memoizedState),(R=Xi||Bg(a,o,R,u,V,z,b))?(Y||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=z),g.props=u,g.state=z,g.context=b,u=R):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,id(t,a),b=a.memoizedProps,Y=Gs(o,b),g.props=Y,Q=a.pendingProps,V=g.context,z=o.contextType,R=ka,typeof z=="object"&&z!==null&&(R=Bt(z)),T=o.getDerivedStateFromProps,(z=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==Q||V!==R)&&qg(a,g,u,R),Xi=!1,V=a.memoizedState,g.state=V,qr(a,u,g,p),Br();var G=a.memoizedState;b!==Q||V!==G||Xi||t!==null&&t.dependencies!==null&&cl(t.dependencies)?(typeof T=="function"&&(Nd(a,o,T,u),G=a.memoizedState),(Y=Xi||Bg(a,o,Y,u,V,G,R)||t!==null&&t.dependencies!==null&&cl(t.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,G,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,G,R)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===t.memoizedProps&&V===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&V===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=G),g.props=u,g.state=G,g.context=R,u=Y):(typeof g.componentDidUpdate!="function"||b===t.memoizedProps&&V===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&V===t.memoizedState||(a.flags|=1024),u=!1)}return g=u,jl(t,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,t!==null&&u?(a.child=Vs(a,t.child,null,p),a.child=Vs(a,null,o,p)):qt(t,a,o,p),a.memoizedState=g.state,t=a.child):t=vi(t,a,p),t}function nv(t,a,o,u){return Is(),a.flags|=256,qt(t,a,o,u),a.child}var Od={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(t){return{baseLanes:t,cachePool:Gp()}}function Md(t,a,o){return t=t!==null?t.childLanes&~o:0,a&&(t|=yn),t}function iv(t,a,o){var u=a.pendingProps,p=!1,g=(a.flags&128)!==0,b;if((b=g)||(b=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),b&&(p=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if(Fe){if(p?Wi(a):es(),(t=rt)?(t=d0(t,jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:Yn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},o=Lp(t),o.return=a,a.child=o,zt=a,rt=null)):t=null,t===null)throw Ji(a);return ph(t)?a.lanes=32:a.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(es(),p=a.mode,T=Rl({mode:"hidden",children:T},p),u=Ls(u,p,o,null),T.return=a,u.return=a,T.sibling=u,a.child=T,u=a.child,u.memoizedState=Ad(o),u.childLanes=Md(t,b,o),a.memoizedState=Od,Kr(null,u)):(Wi(a),Dd(a,T))}var R=t.memoizedState;if(R!==null&&(T=R.dehydrated,T!==null)){if(g)a.flags&256?(Wi(a),a.flags&=-257,a=Pd(t,a,o)):a.memoizedState!==null?(es(),a.child=t.child,a.flags|=128,a=null):(es(),T=u.fallback,p=a.mode,u=Rl({mode:"visible",children:u.children},p),T=Ls(T,p,o,null),T.flags|=2,u.return=a,T.return=a,u.sibling=T,a.child=u,Vs(a,t.child,null,o),u=a.child,u.memoizedState=Ad(o),u.childLanes=Md(t,b,o),a.memoizedState=Od,a=Kr(null,u));else if(Wi(a),ph(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var z=b.dgst;b=z,u=Error(s(419)),u.stack="",u.digest=b,Dr({value:u,source:null,stack:null}),a=Pd(t,a,o)}else if(kt||ja(t,a,o,!1),b=(o&t.childLanes)!==0,kt||b){if(b=st,b!==null&&(u=Vm(b,o),u!==0&&u!==R.retryLane))throw R.retryLane=u,Ps(t,u),rn(b,t,u),Rd;mh(T)||Ul(),a=Pd(t,a,o)}else mh(T)?(a.flags|=192,a.child=t.child,a=null):(t=R.treeContext,rt=_n(T.nextSibling),zt=a,Fe=!0,Yi=null,jn=!1,t!==null&&zp(a,t),a=Dd(a,u.children),a.flags|=4096);return a}return p?(es(),T=u.fallback,p=a.mode,R=t.child,z=R.sibling,u=di(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,z!==null?T=di(z,T):(T=Ls(T,p,o,null),T.flags|=2),T.return=a,u.return=a,u.sibling=T,a.child=u,Kr(null,u),u=a.child,T=t.child.memoizedState,T===null?T=Ad(o):(p=T.cachePool,p!==null?(R=Tt._currentValue,p=p.parent!==R?{parent:R,pool:R}:p):p=Gp(),T={baseLanes:T.baseLanes|o,cachePool:p}),u.memoizedState=T,u.childLanes=Md(t,b,o),a.memoizedState=Od,Kr(t.child,u)):(Wi(a),o=t.child,t=o.sibling,o=di(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=o,a.memoizedState=null,o)}function Dd(t,a){return a=Rl({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Rl(t,a){return t=mn(22,t,null,a),t.lanes=0,t}function Pd(t,a,o){return Vs(a,t.child,null,o),t=Dd(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function sv(t,a,o){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),Xu(t.return,a,o)}function Ld(t,a,o,u,p,g){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:g}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=p,b.treeForkCount=g)}function av(t,a,o){var u=a.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var b=bt.current,T=(b&2)!==0;if(T?(b=b&1|2,a.flags|=128):b&=1,ee(bt,b),qt(t,a,u,o),u=Fe?Mr:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sv(t,o,a);else if(t.tag===19)sv(t,o,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(o=a.child,p=null;o!==null;)t=o.alternate,t!==null&&vl(t)===null&&(p=o),o=o.sibling;o=p,o===null?(p=a.child,a.child=null):(p=o.sibling,o.sibling=null),Ld(a,!1,p,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=a.child,a.child=null;p!==null;){if(t=p.alternate,t!==null&&vl(t)===null){a.child=p;break}t=p.sibling,p.sibling=o,o=p,p=t}Ld(a,!0,o,null,g,u);break;case"together":Ld(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function vi(t,a,o){if(t!==null&&(a.dependencies=t.dependencies),is|=a.lanes,(o&a.childLanes)===0)if(t!==null){if(ja(t,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,o=di(t,t.pendingProps),a.child=o,o.return=a;t.sibling!==null;)t=t.sibling,o=o.sibling=di(t,t.pendingProps),o.return=a;o.sibling=null}return a.child}function Id(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&cl(t)))}function bC(t,a,o){switch(a.tag){case 3:At(a,a.stateNode.containerInfo),Qi(a,Tt,t.memoizedState.cache),Is();break;case 27:case 5:Kn(a);break;case 4:At(a,a.stateNode.containerInfo);break;case 10:Qi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ld(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Wi(a),a.flags|=128,null):(o&a.child.childLanes)!==0?iv(t,a,o):(Wi(a),t=vi(t,a,o),t!==null?t.sibling:null);Wi(a);break;case 19:var p=(t.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(ja(t,a,o,!1),u=(o&a.childLanes)!==0),p){if(u)return av(t,a,o);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ee(bt,bt.current),u)break;return null;case 22:return a.lanes=0,$g(t,a,o,a.pendingProps);case 24:Qi(a,Tt,t.memoizedState.cache)}return vi(t,a,o)}function rv(t,a,o){if(t!==null)if(t.memoizedProps!==a.pendingProps)kt=!0;else{if(!Id(t,o)&&(a.flags&128)===0)return kt=!1,bC(t,a,o);kt=(t.flags&131072)!==0}else kt=!1,Fe&&(a.flags&1048576)!==0&&Up(a,Mr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(t=qs(a.elementType),a.type=t,typeof t=="function")Fu(t)?(u=Gs(t,u),a.tag=1,a=tv(null,a,t,u,o)):(a.tag=0,a=_d(null,a,t,u,o));else{if(t!=null){var p=t.$$typeof;if(p===j){a.tag=11,a=Jg(null,a,t,u,o);break e}else if(p===I){a.tag=14,a=Qg(null,a,t,u,o);break e}}throw a=qe(t)||t,Error(s(306,a,""))}}return a;case 0:return _d(t,a,a.type,a.pendingProps,o);case 1:return u=a.type,p=Gs(u,a.pendingProps),tv(t,a,u,p,o);case 3:e:{if(At(a,a.stateNode.containerInfo),t===null)throw Error(s(387));u=a.pendingProps;var g=a.memoizedState;p=g.element,id(t,a),qr(a,u,null,o);var b=a.memoizedState;if(u=b.cache,Qi(a,Tt,u),u!==g.cache&&$u(a,[Tt],o,!0),Br(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=nv(t,a,u,o);break e}else if(u!==p){p=En(Error(s(424)),a),Dr(p),a=nv(t,a,u,o);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(rt=_n(t.firstChild),zt=a,Fe=!0,Yi=null,jn=!0,o=$p(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Is(),u===p){a=vi(t,a,o);break e}qt(t,a,u,o)}a=a.child}return a;case 26:return jl(t,a),t===null?(o=v0(a.type,null,a.pendingProps,null))?a.memoizedState=o:Fe||(o=a.type,t=a.pendingProps,u=Gl(ke.current).createElement(o),u[Ut]=a,u[Wt]=t,Ft(u,o,t),Mt(u),a.stateNode=u):a.memoizedState=v0(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Kn(a),t===null&&Fe&&(u=a.stateNode=m0(a.type,a.pendingProps,ke.current),zt=a,jn=!0,p=rt,ls(a.type)?(gh=p,rt=_n(u.firstChild)):rt=p),qt(t,a,a.pendingProps.children,o),jl(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Fe&&((p=u=rt)&&(u=QC(u,a.type,a.pendingProps,jn),u!==null?(a.stateNode=u,zt=a,rt=_n(u.firstChild),jn=!1,p=!0):p=!1),p||Ji(a)),Kn(a),p=a.type,g=a.pendingProps,b=t!==null?t.memoizedProps:null,u=g.children,dh(p,g)?u=null:b!==null&&dh(p,b)&&(a.flags|=32),a.memoizedState!==null&&(p=ud(t,a,uC,null,null,o),oo._currentValue=p),jl(t,a),qt(t,a,u,o),a.child;case 6:return t===null&&Fe&&((t=o=rt)&&(o=XC(o,a.pendingProps,jn),o!==null?(a.stateNode=o,zt=a,rt=null,t=!0):t=!1),t||Ji(a)),null;case 13:return iv(t,a,o);case 4:return At(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Vs(a,null,u,o):qt(t,a,u,o),a.child;case 11:return Jg(t,a,a.type,a.pendingProps,o);case 7:return qt(t,a,a.pendingProps,o),a.child;case 8:return qt(t,a,a.pendingProps.children,o),a.child;case 12:return qt(t,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Qi(a,a.type,u.value),qt(t,a,u.children,o),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,zs(a),p=Bt(p),u=u(p),a.flags|=1,qt(t,a,u,o),a.child;case 14:return Qg(t,a,a.type,a.pendingProps,o);case 15:return Xg(t,a,a.type,a.pendingProps,o);case 19:return av(t,a,o);case 31:return yC(t,a,o);case 22:return $g(t,a,o,a.pendingProps);case 24:return zs(a),u=Bt(Tt),t===null?(p=ed(),p===null&&(p=st,g=Zu(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),a.memoizedState={parent:u,cache:p},nd(a),Qi(a,Tt,p)):((t.lanes&o)!==0&&(id(t,a),qr(a,null,null,o),Br()),p=t.memoizedState,g=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Qi(a,Tt,u)):(u=g.cache,Qi(a,Tt,u),u!==p.cache&&$u(a,[Tt],o,!0))),qt(t,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function yi(t){t.flags|=4}function Ud(t,a,o,u,p){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Mv())t.flags|=8192;else throw Fs=fl,td}else t.flags&=-16777217}function ov(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!T0(a))if(Mv())t.flags|=8192;else throw Fs=fl,td}function _l(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Bm():536870912,t.lanes|=a,Ba|=a)}function Yr(t,a){if(!Fe)switch(t.tailMode){case"hidden":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function ot(t){var a=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(a)for(var p=t.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=u,t.childLanes=o,a}function xC(t,a,o){var u=a.pendingProps;switch(Ku(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(a),null;case 1:return ot(a),null;case 3:return o=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),mi(Tt),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(wa(a)?yi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ju())),ot(a),null;case 26:var p=a.type,g=a.memoizedState;return t===null?(yi(a),g!==null?(ot(a),ov(a,g)):(ot(a),Ud(a,p,null,u,o))):g?g!==t.memoizedState?(yi(a),ot(a),ov(a,g)):(ot(a),a.flags&=-16777217):(t=t.memoizedProps,t!==u&&yi(a),ot(a),Ud(a,p,t,u,o)),null;case 27:if(qi(a),o=ke.current,p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&yi(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return ot(a),null}t=oe.current,wa(a)?Bp(a):(t=m0(p,u,o),a.stateNode=t,yi(a))}return ot(a),null;case 5:if(qi(a),p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&yi(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return ot(a),null}if(g=oe.current,wa(a))Bp(a);else{var b=Gl(ke.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?b.createElement(p,{is:u.is}):b.createElement(p)}}g[Ut]=a,g[Wt]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=g;e:switch(Ft(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&yi(a)}}return ot(a),Ud(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,o),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&yi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(t=ke.current,wa(a)){if(t=a.stateNode,o=a.memoizedProps,u=null,p=zt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}t[Ut]=a,t=!!(t.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||i0(t.nodeValue,o)),t||Ji(a,!0)}else t=Gl(t).createTextNode(u),t[Ut]=a,a.stateNode=t}return ot(a),null;case 31:if(o=a.memoizedState,t===null||t.memoizedState!==null){if(u=wa(a),o!==null){if(t===null){if(!u)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ut]=a}else Is(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),t=!1}else o=Ju(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return a.flags&256?(gn(a),a):(gn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return ot(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=wa(a),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(s(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Ut]=a}else Is(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),p=!1}else p=Ju(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(gn(a),a):(gn(a),null)}return gn(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,t=t!==null&&t.memoizedState!==null,o&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),o!==t&&o&&(a.child.flags|=8192),_l(a,a.updateQueue),ot(a),null);case 4:return at(),t===null&&rh(a.stateNode.containerInfo),ot(a),null;case 10:return mi(a.type),ot(a),null;case 19:if(K(bt),u=a.memoizedState,u===null)return ot(a),null;if(p=(a.flags&128)!==0,g=u.rendering,g===null)if(p)Yr(u,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(g=vl(t),g!==null){for(a.flags|=128,Yr(u,!1),t=g.updateQueue,a.updateQueue=t,_l(a,t),a.subtreeFlags=0,t=o,o=a.child;o!==null;)Pp(o,t),o=o.sibling;return ee(bt,bt.current&1|2),Fe&&hi(a,u.treeForkCount),a.child}t=t.sibling}u.tail!==null&&un()>Pl&&(a.flags|=128,p=!0,Yr(u,!1),a.lanes=4194304)}else{if(!p)if(t=vl(g),t!==null){if(a.flags|=128,p=!0,t=t.updateQueue,a.updateQueue=t,_l(a,t),Yr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Fe)return ot(a),null}else 2*un()-u.renderingStartTime>Pl&&o!==536870912&&(a.flags|=128,p=!0,Yr(u,!1),a.lanes=4194304);u.isBackwards?(g.sibling=a.child,a.child=g):(t=u.last,t!==null?t.sibling=g:a.child=g,u.last=g)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=un(),t.sibling=null,o=bt.current,ee(bt,p?o&1|2:o&1),Fe&&hi(a,u.treeForkCount),t):(ot(a),null);case 22:case 23:return gn(a),od(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(ot(a),a.subtreeFlags&6&&(a.flags|=8192)):ot(a),o=a.updateQueue,o!==null&&_l(a,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),t!==null&&K(Bs),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),mi(Tt),ot(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function SC(t,a){switch(Ku(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return mi(Tt),at(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return qi(a),null;case 31:if(a.memoizedState!==null){if(gn(a),a.alternate===null)throw Error(s(340));Is()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(gn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Is()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return K(bt),null;case 4:return at(),null;case 10:return mi(a.type),null;case 22:case 23:return gn(a),od(),t!==null&&K(Bs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return mi(Tt),null;case 25:return null;default:return null}}function lv(t,a){switch(Ku(a),a.tag){case 3:mi(Tt),at();break;case 26:case 27:case 5:qi(a);break;case 4:at();break;case 31:a.memoizedState!==null&&gn(a);break;case 13:gn(a);break;case 19:K(bt);break;case 10:mi(a.type);break;case 22:case 23:gn(a),od(),t!==null&&K(Bs);break;case 24:mi(Tt)}}function Jr(t,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&t)===t){u=void 0;var g=o.create,b=o.inst;u=g(),b.destroy=u}o=o.next}while(o!==p)}}catch(T){Ze(a,a.return,T)}}function ts(t,a,o){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&t)===t){var b=u.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,p=a;var R=o,z=T;try{z()}catch(Y){Ze(p,R,Y)}}}u=u.next}while(u!==g)}}catch(Y){Ze(a,a.return,Y)}}function cv(t){var a=t.updateQueue;if(a!==null){var o=t.stateNode;try{Wp(a,o)}catch(u){Ze(t,t.return,u)}}}function uv(t,a,o){o.props=Gs(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(u){Ze(t,a,u)}}function Qr(t,a){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof o=="function"?t.refCleanup=o(u):o.current=u}}catch(p){Ze(t,a,p)}}function Qn(t,a){var o=t.ref,u=t.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Ze(t,a,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ze(t,a,p)}else o.current=null}function dv(t){var a=t.type,o=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Ze(t,t.return,p)}}function zd(t,a,o){try{var u=t.stateNode;VC(u,t.type,o,a),u[Wt]=a}catch(p){Ze(t,t.return,p)}}function hv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ls(t.type)||t.tag===4}function Bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,a,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(t),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=ci));else if(u!==4&&(u===27&&ls(t.type)&&(o=t.stateNode,a=null),t=t.child,t!==null))for(qd(t,a,o),t=t.sibling;t!==null;)qd(t,a,o),t=t.sibling}function Ol(t,a,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?o.insertBefore(t,a):o.appendChild(t);else if(u!==4&&(u===27&&ls(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(Ol(t,a,o),t=t.sibling;t!==null;)Ol(t,a,o),t=t.sibling}function fv(t){var a=t.stateNode,o=t.memoizedProps;try{for(var u=t.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Ft(a,u,o),a[Ut]=t,a[Wt]=o}catch(g){Ze(t,t.return,g)}}var bi=!1,Et=!1,Fd=!1,mv=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function TC(t,a){if(t=t.containerInfo,ch=Zl,t=Np(t),Pu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,T=-1,R=-1,z=0,Y=0,Q=t,V=null;t:for(;;){for(var G;Q!==o||p!==0&&Q.nodeType!==3||(T=b+p),Q!==g||u!==0&&Q.nodeType!==3||(R=b+u),Q.nodeType===3&&(b+=Q.nodeValue.length),(G=Q.firstChild)!==null;)V=Q,Q=G;for(;;){if(Q===t)break t;if(V===o&&++z===p&&(T=b),V===g&&++Y===u&&(R=b),(G=Q.nextSibling)!==null)break;Q=V,V=Q.parentNode}Q=G}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(uh={focusedElem:t,selectionRange:o},Zl=!1,Dt=a;Dt!==null;)if(a=Dt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Dt=t;else for(;Dt!==null;){switch(a=Dt,g=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)p=t[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,o=a,p=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var fe=Gs(o.type,p);t=u.getSnapshotBeforeUpdate(fe,g),u.__reactInternalSnapshotBeforeUpdate=t}catch(be){Ze(o,o.return,be)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,o=t.nodeType,o===9)fh(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,Dt=t;break}Dt=a.return}}function pv(t,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Si(t,o),u&4&&Jr(5,o);break;case 1:if(Si(t,o),u&4)if(t=o.stateNode,a===null)try{t.componentDidMount()}catch(b){Ze(o,o.return,b)}else{var p=Gs(o.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(p,a,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Ze(o,o.return,b)}}u&64&&cv(o),u&512&&Qr(o,o.return);break;case 3:if(Si(t,o),u&64&&(t=o.updateQueue,t!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{Wp(t,a)}catch(b){Ze(o,o.return,b)}}break;case 27:a===null&&u&4&&fv(o);case 26:case 5:Si(t,o),a===null&&u&4&&dv(o),u&512&&Qr(o,o.return);break;case 12:Si(t,o);break;case 31:Si(t,o),u&4&&yv(t,o);break;case 13:Si(t,o),u&4&&bv(t,o),u&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=OC.bind(null,o),$C(t,o))));break;case 22:if(u=o.memoizedState!==null||bi,!u){a=a!==null&&a.memoizedState!==null||Et,p=bi;var g=Et;bi=u,(Et=a)&&!g?Ti(t,o,(o.subtreeFlags&8772)!==0):Si(t,o),bi=p,Et=g}break;case 30:break;default:Si(t,o)}}function gv(t){var a=t.alternate;a!==null&&(t.alternate=null,gv(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&yu(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,tn=!1;function xi(t,a,o){for(o=o.child;o!==null;)vv(t,a,o),o=o.sibling}function vv(t,a,o){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(br,o)}catch{}switch(o.tag){case 26:Et||Qn(o,a),xi(t,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Et||Qn(o,a);var u=lt,p=tn;ls(o.type)&&(lt=o.stateNode,tn=!1),xi(t,a,o),so(o.stateNode),lt=u,tn=p;break;case 5:Et||Qn(o,a);case 6:if(u=lt,p=tn,lt=null,xi(t,a,o),lt=u,tn=p,lt!==null)if(tn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(o.stateNode)}catch(g){Ze(o,a,g)}else try{lt.removeChild(o.stateNode)}catch(g){Ze(o,a,g)}break;case 18:lt!==null&&(tn?(t=lt,c0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),Ja(t)):c0(lt,o.stateNode));break;case 4:u=lt,p=tn,lt=o.stateNode.containerInfo,tn=!0,xi(t,a,o),lt=u,tn=p;break;case 0:case 11:case 14:case 15:ts(2,o,a),Et||ts(4,o,a),xi(t,a,o);break;case 1:Et||(Qn(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&uv(o,a,u)),xi(t,a,o);break;case 21:xi(t,a,o);break;case 22:Et=(u=Et)||o.memoizedState!==null,xi(t,a,o),Et=u;break;default:xi(t,a,o)}}function yv(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ja(t)}catch(o){Ze(a,a.return,o)}}}function bv(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ja(t)}catch(o){Ze(a,a.return,o)}}function CC(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new mv),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new mv),a;default:throw Error(s(435,t.tag))}}function Al(t,a){var o=CC(t);a.forEach(function(u){if(!o.has(u)){o.add(u);var p=AC.bind(null,t,u);u.then(p,p)}})}function nn(t,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],g=t,b=a,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(ls(T.type)){lt=T.stateNode,tn=!1;break e}break;case 5:lt=T.stateNode,tn=!1;break e;case 3:case 4:lt=T.stateNode.containerInfo,tn=!0;break e}T=T.return}if(lt===null)throw Error(s(160));vv(g,b,p),lt=null,tn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)xv(a,t),a=a.sibling}var Un=null;function xv(t,a){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:nn(a,t),sn(t),u&4&&(ts(3,t,t.return),Jr(3,t),ts(5,t,t.return));break;case 1:nn(a,t),sn(t),u&512&&(Et||o===null||Qn(o,o.return)),u&64&&bi&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Un;if(nn(a,t),sn(t),u&512&&(Et||o===null||Qn(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=t.memoizedState,o===null)if(u===null)if(t.stateNode===null){e:{u=t.type,o=t.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Tr]||g[Ut]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Ft(g,u,o),g[Ut]=t,Mt(g),u=g;break e;case"link":var b=x0("link","href",p).get(u+(o.href||""));if(b){for(var T=0;T<b.length;T++)if(g=b[T],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(T,1);break t}}g=p.createElement(u),Ft(g,u,o),p.head.appendChild(g);break;case"meta":if(b=x0("meta","content",p).get(u+(o.content||""))){for(T=0;T<b.length;T++)if(g=b[T],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(T,1);break t}}g=p.createElement(u),Ft(g,u,o),p.head.appendChild(g);break;default:throw Error(s(468,u))}g[Ut]=t,Mt(g),u=g}t.stateNode=u}else S0(p,t.type,t.stateNode);else t.stateNode=b0(p,u,t.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?S0(p,t.type,t.stateNode):b0(p,u,t.memoizedProps)):u===null&&t.stateNode!==null&&zd(t,t.memoizedProps,o.memoizedProps)}break;case 27:nn(a,t),sn(t),u&512&&(Et||o===null||Qn(o,o.return)),o!==null&&u&4&&zd(t,t.memoizedProps,o.memoizedProps);break;case 5:if(nn(a,t),sn(t),u&512&&(Et||o===null||Qn(o,o.return)),t.flags&32){p=t.stateNode;try{va(p,"")}catch(fe){Ze(t,t.return,fe)}}u&4&&t.stateNode!=null&&(p=t.memoizedProps,zd(t,p,o!==null?o.memoizedProps:p)),u&1024&&(Fd=!0);break;case 6:if(nn(a,t),sn(t),u&4){if(t.stateNode===null)throw Error(s(162));u=t.memoizedProps,o=t.stateNode;try{o.nodeValue=u}catch(fe){Ze(t,t.return,fe)}}break;case 3:if(Jl=null,p=Un,Un=Kl(a.containerInfo),nn(a,t),Un=p,sn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ja(a.containerInfo)}catch(fe){Ze(t,t.return,fe)}Fd&&(Fd=!1,Sv(t));break;case 4:u=Un,Un=Kl(t.stateNode.containerInfo),nn(a,t),sn(t),Un=u;break;case 12:nn(a,t),sn(t);break;case 31:nn(a,t),sn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Al(t,u)));break;case 13:nn(a,t),sn(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dl=un()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Al(t,u)));break;case 22:p=t.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,z=bi,Y=Et;if(bi=z||p,Et=Y||R,nn(a,t),Et=Y,bi=z,sn(t),u&8192)e:for(a=t.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(o===null||R||bi||Et||Ks(t)),o=null,a=t;;){if(a.tag===5||a.tag===26){if(o===null){R=o=a;try{if(g=R.stateNode,p)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=R.stateNode;var Q=R.memoizedProps.style,V=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;T.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(fe){Ze(R,R.return,fe)}}}else if(a.tag===6){if(o===null){R=a;try{R.stateNode.nodeValue=p?"":R.memoizedProps}catch(fe){Ze(R,R.return,fe)}}}else if(a.tag===18){if(o===null){R=a;try{var G=R.stateNode;p?u0(G,!0):u0(R.stateNode,!1)}catch(fe){Ze(R,R.return,fe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Al(t,o))));break;case 19:nn(a,t),sn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Al(t,u)));break;case 30:break;case 21:break;default:nn(a,t),sn(t)}}function sn(t){var a=t.flags;if(a&2){try{for(var o,u=t.return;u!==null;){if(hv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var p=o.stateNode,g=Bd(t);Ol(t,g,p);break;case 5:var b=o.stateNode;o.flags&32&&(va(b,""),o.flags&=-33);var T=Bd(t);Ol(t,T,b);break;case 3:case 4:var R=o.stateNode.containerInfo,z=Bd(t);qd(t,z,R);break;default:throw Error(s(161))}}catch(Y){Ze(t,t.return,Y)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Sv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Sv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Si(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)pv(t,a.alternate,a),a=a.sibling}function Ks(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:ts(4,a,a.return),Ks(a);break;case 1:Qn(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&uv(a,a.return,o),Ks(a);break;case 27:so(a.stateNode);case 26:case 5:Qn(a,a.return),Ks(a);break;case 22:a.memoizedState===null&&Ks(a);break;case 30:Ks(a);break;default:Ks(a)}t=t.sibling}}function Ti(t,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=t,g=a,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ti(p,g,o),Jr(4,g);break;case 1:if(Ti(p,g,o),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(z){Ze(u,u.return,z)}if(u=g,p=u.updateQueue,p!==null){var T=u.stateNode;try{var R=p.shared.hiddenCallbacks;if(R!==null)for(p.shared.hiddenCallbacks=null,p=0;p<R.length;p++)Zp(R[p],T)}catch(z){Ze(u,u.return,z)}}o&&b&64&&cv(g),Qr(g,g.return);break;case 27:fv(g);case 26:case 5:Ti(p,g,o),o&&u===null&&b&4&&dv(g),Qr(g,g.return);break;case 12:Ti(p,g,o);break;case 31:Ti(p,g,o),o&&b&4&&yv(p,g);break;case 13:Ti(p,g,o),o&&b&4&&bv(p,g);break;case 22:g.memoizedState===null&&Ti(p,g,o),Qr(g,g.return);break;case 30:break;default:Ti(p,g,o)}a=a.sibling}}function Vd(t,a){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&Pr(o))}function Hd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Pr(t))}function zn(t,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Tv(t,a,o,u),a=a.sibling}function Tv(t,a,o,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:zn(t,a,o,u),p&2048&&Jr(9,a);break;case 1:zn(t,a,o,u);break;case 3:zn(t,a,o,u),p&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Pr(t)));break;case 12:if(p&2048){zn(t,a,o,u),t=a.stateNode;try{var g=a.memoizedProps,b=g.id,T=g.onPostCommit;typeof T=="function"&&T(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Ze(a,a.return,R)}}else zn(t,a,o,u);break;case 31:zn(t,a,o,u);break;case 13:zn(t,a,o,u);break;case 23:break;case 22:g=a.stateNode,b=a.alternate,a.memoizedState!==null?g._visibility&2?zn(t,a,o,u):Xr(t,a):g._visibility&2?zn(t,a,o,u):(g._visibility|=2,Ia(t,a,o,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Vd(b,a);break;case 24:zn(t,a,o,u),p&2048&&Hd(a.alternate,a);break;default:zn(t,a,o,u)}}function Ia(t,a,o,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=t,b=a,T=o,R=u,z=b.flags;switch(b.tag){case 0:case 11:case 15:Ia(g,b,T,R,p),Jr(8,b);break;case 23:break;case 22:var Y=b.stateNode;b.memoizedState!==null?Y._visibility&2?Ia(g,b,T,R,p):Xr(g,b):(Y._visibility|=2,Ia(g,b,T,R,p)),p&&z&2048&&Vd(b.alternate,b);break;case 24:Ia(g,b,T,R,p),p&&z&2048&&Hd(b.alternate,b);break;default:Ia(g,b,T,R,p)}a=a.sibling}}function Xr(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=t,u=a,p=u.flags;switch(u.tag){case 22:Xr(o,u),p&2048&&Vd(u.alternate,u);break;case 24:Xr(o,u),p&2048&&Hd(u.alternate,u);break;default:Xr(o,u)}a=a.sibling}}var $r=8192;function Ua(t,a,o){if(t.subtreeFlags&$r)for(t=t.child;t!==null;)Cv(t,a,o),t=t.sibling}function Cv(t,a,o){switch(t.tag){case 26:Ua(t,a,o),t.flags&$r&&t.memoizedState!==null&&ck(o,Un,t.memoizedState,t.memoizedProps);break;case 5:Ua(t,a,o);break;case 3:case 4:var u=Un;Un=Kl(t.stateNode.containerInfo),Ua(t,a,o),Un=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=$r,$r=16777216,Ua(t,a,o),$r=u):Ua(t,a,o));break;default:Ua(t,a,o)}}function kv(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Zr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Dt=u,Nv(u,t)}kv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ev(t),t=t.sibling}function Ev(t){switch(t.tag){case 0:case 11:case 15:Zr(t),t.flags&2048&&ts(9,t,t.return);break;case 3:Zr(t);break;case 12:Zr(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Ml(t)):Zr(t);break;default:Zr(t)}}function Ml(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Dt=u,Nv(u,t)}kv(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:ts(8,a,a.return),Ml(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Ml(a));break;default:Ml(a)}t=t.sibling}}function Nv(t,a){for(;Dt!==null;){var o=Dt;switch(o.tag){case 0:case 11:case 15:ts(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Pr(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dt=u;else e:for(o=t;Dt!==null;){u=Dt;var p=u.sibling,g=u.return;if(gv(u),u===o){Dt=null;break e}if(p!==null){p.return=g,Dt=p;break e}Dt=g}}}var kC={getCacheForType:function(t){var a=Bt(Tt),o=a.data.get(t);return o===void 0&&(o=t(),a.data.set(t,o)),o},cacheSignal:function(){return Bt(Tt).controller.signal}},EC=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,De=null,Ue=0,$e=0,vn=null,ns=!1,za=!1,Gd=!1,Ci=0,ft=0,is=0,Ys=0,Kd=0,yn=0,Ba=0,Wr=null,an=null,Yd=!1,Dl=0,wv=0,Pl=1/0,Ll=null,ss=null,wt=0,as=null,qa=null,ki=0,Jd=0,Qd=null,jv=null,eo=0,Xd=null;function bn(){return(Ye&2)!==0&&Ue!==0?Ue&-Ue:q.T!==null?nh():Hm()}function Rv(){if(yn===0)if((Ue&536870912)===0||Fe){var t=Ho;Ho<<=1,(Ho&3932160)===0&&(Ho=262144),yn=t}else yn=536870912;return t=pn.current,t!==null&&(t.flags|=32),yn}function rn(t,a,o){(t===st&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Fa(t,0),rs(t,Ue,yn,!1)),Sr(t,o),((Ye&2)===0||t!==st)&&(t===st&&((Ye&2)===0&&(Ys|=o),ft===4&&rs(t,Ue,yn,!1)),Xn(t))}function _v(t,a,o){if((Ye&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&t.expiredLanes)===0||xr(t,a),p=u?jC(t,a):Zd(t,a,!0),g=u;do{if(p===0){za&&!u&&rs(t,a,0,!1);break}else{if(o=t.current.alternate,g&&!NC(o)){p=Zd(t,a,!1),g=!1;continue}if(p===2){if(g=a,t.errorRecoveryDisabledLanes&g)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var T=t;p=Wr;var R=T.current.memoizedState.isDehydrated;if(R&&(Fa(T,b).flags|=256),b=Zd(T,b,!1),b!==2){if(Gd&&!R){T.errorRecoveryDisabledLanes|=g,Ys|=g,p=4;break e}g=an,an=p,g!==null&&(an===null?an=g:an.push.apply(an,g))}p=b}if(g=!1,p!==2)continue}}if(p===1){Fa(t,0),rs(t,a,0,!0);break}e:{switch(u=t,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:rs(u,a,yn,!ns);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(p=Dl+300-un(),10<p)){if(rs(u,a,yn,!ns),Ko(u,0,!0)!==0)break e;ki=a,u.timeoutHandle=o0(Ov.bind(null,u,o,an,Ll,Yd,a,yn,Ys,Ba,ns,g,"Throttled",-0,0),p);break e}Ov(u,o,an,Ll,Yd,a,yn,Ys,Ba,ns,g,null,-0,0)}}break}while(!0);Xn(t)}function Ov(t,a,o,u,p,g,b,T,R,z,Y,Q,V,G){if(t.timeoutHandle=-1,Q=a.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ci},Cv(a,g,Q);var fe=(g&62914560)===g?Dl-un():(g&4194048)===g?wv-un():0;if(fe=uk(Q,fe),fe!==null){ki=g,t.cancelPendingCommit=fe(zv.bind(null,t,a,g,o,u,p,b,T,R,Y,Q,null,V,G)),rs(t,g,b,!z);return}}zv(t,a,g,o,u,p,b,T,R)}function NC(t){for(var a=t;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],g=p.getSnapshot;p=p.value;try{if(!fn(g(),p))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function rs(t,a,o,u){a&=~Kd,a&=~Ys,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var p=a;0<p;){var g=31-hn(p),b=1<<g;u[g]=-1,p&=~b}o!==0&&qm(t,o,a)}function Il(){return(Ye&6)===0?(to(0),!1):!0}function $d(){if(De!==null){if($e===0)var t=De.return;else t=De,fi=Us=null,fd(t),Aa=null,Ir=0,t=De;for(;t!==null;)lv(t.alternate,t),t=t.return;De=null}}function Fa(t,a){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,KC(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),ki=0,$d(),st=t,De=o=di(t.current,null),Ue=a,$e=0,vn=null,ns=!1,za=xr(t,a),Gd=!1,Ba=yn=Kd=Ys=is=ft=0,an=Wr=null,Yd=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var p=31-hn(u),g=1<<p;a|=t[p],u&=~g}return Ci=a,sl(),o}function Av(t,a){Ne=null,q.H=Gr,a===Oa||a===hl?(a=Jp(),$e=3):a===td?(a=Jp(),$e=4):$e=a===Rd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,vn=a,De===null&&(ft=1,Nl(t,En(a,t.current)))}function Mv(){var t=pn.current;return t===null?!0:(Ue&4194048)===Ue?Rn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===Rn:!1}function Dv(){var t=q.H;return q.H=Gr,t===null?Gr:t}function Pv(){var t=q.A;return q.A=kC,t}function Ul(){ft=4,ns||(Ue&4194048)!==Ue&&pn.current!==null||(za=!0),(is&134217727)===0&&(Ys&134217727)===0||st===null||rs(st,Ue,yn,!1)}function Zd(t,a,o){var u=Ye;Ye|=2;var p=Dv(),g=Pv();(st!==t||Ue!==a)&&(Ll=null,Fa(t,a)),a=!1;var b=ft;e:do try{if($e!==0&&De!==null){var T=De,R=vn;switch($e){case 8:$d(),b=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(a=!0);var z=$e;if($e=0,vn=null,Va(t,T,R,z),o&&za){b=0;break e}break;default:z=$e,$e=0,vn=null,Va(t,T,R,z)}}wC(),b=ft;break}catch(Y){Av(t,Y)}while(!0);return a&&t.shellSuspendCounter++,fi=Us=null,Ye=u,q.H=p,q.A=g,De===null&&(st=null,Ue=0,sl()),b}function wC(){for(;De!==null;)Lv(De)}function jC(t,a){var o=Ye;Ye|=2;var u=Dv(),p=Pv();st!==t||Ue!==a?(Ll=null,Pl=un()+500,Fa(t,a)):za=xr(t,a);e:do try{if($e!==0&&De!==null){a=De;var g=vn;t:switch($e){case 1:$e=0,vn=null,Va(t,a,g,1);break;case 2:case 9:if(Kp(g)){$e=0,vn=null,Iv(a);break}a=function(){$e!==2&&$e!==9||st!==t||($e=7),Xn(t)},g.then(a,a);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Kp(g)?($e=0,vn=null,Iv(a)):($e=0,vn=null,Va(t,a,g,7));break;case 5:var b=null;switch(De.tag){case 26:b=De.memoizedState;case 5:case 27:var T=De;if(b?T0(b):T.stateNode.complete){$e=0,vn=null;var R=T.sibling;if(R!==null)De=R;else{var z=T.return;z!==null?(De=z,zl(z)):De=null}break t}}$e=0,vn=null,Va(t,a,g,5);break;case 6:$e=0,vn=null,Va(t,a,g,6);break;case 8:$d(),ft=6;break e;default:throw Error(s(462))}}RC();break}catch(Y){Av(t,Y)}while(!0);return fi=Us=null,q.H=u,q.A=p,Ye=o,De!==null?0:(st=null,Ue=0,sl(),ft)}function RC(){for(;De!==null&&!ZT();)Lv(De)}function Lv(t){var a=rv(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,a===null?zl(t):De=a}function Iv(t){var a=t,o=a.alternate;switch(a.tag){case 15:case 0:a=ev(o,a,a.pendingProps,a.type,void 0,Ue);break;case 11:a=ev(o,a,a.pendingProps,a.type.render,a.ref,Ue);break;case 5:fd(a);default:lv(o,a),a=De=Pp(a,Ci),a=rv(o,a,Ci)}t.memoizedProps=t.pendingProps,a===null?zl(t):De=a}function Va(t,a,o,u){fi=Us=null,fd(a),Aa=null,Ir=0;var p=a.return;try{if(vC(t,p,a,o,Ue)){ft=1,Nl(t,En(o,t.current)),De=null;return}}catch(g){if(p!==null)throw De=p,g;ft=1,Nl(t,En(o,t.current)),De=null;return}a.flags&32768?(Fe||u===1?t=!0:za||(Ue&536870912)!==0?t=!1:(ns=t=!0,(u===2||u===9||u===3||u===6)&&(u=pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Uv(a,t)):zl(a)}function zl(t){var a=t;do{if((a.flags&32768)!==0){Uv(a,ns);return}t=a.return;var o=xC(a.alternate,a,Ci);if(o!==null){De=o;return}if(a=a.sibling,a!==null){De=a;return}De=a=t}while(a!==null);ft===0&&(ft=5)}function Uv(t,a){do{var o=SC(t.alternate,t);if(o!==null){o.flags&=32767,De=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(t=t.sibling,t!==null)){De=t;return}De=t=o}while(t!==null);ft=6,De=null}function zv(t,a,o,u,p,g,b,T,R){t.cancelPendingCommit=null;do Bl();while(wt!==0);if((Ye&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(g=a.lanes|a.childLanes,g|=Bu,l1(t,o,g,b,T,R),t===st&&(De=st=null,Ue=0),qa=a,as=t,ki=o,Jd=g,Qd=p,jv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,MC(Fo,function(){return Hv(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,p=ne.p,ne.p=2,b=Ye,Ye|=4;try{TC(t,a,o)}finally{Ye=b,ne.p=p,q.T=u}}wt=1,Bv(),qv(),Fv()}}function Bv(){if(wt===1){wt=0;var t=as,a=qa,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var u=ne.p;ne.p=2;var p=Ye;Ye|=4;try{xv(a,t);var g=uh,b=Np(t.containerInfo),T=g.focusedElem,R=g.selectionRange;if(b!==T&&T&&T.ownerDocument&&Ep(T.ownerDocument.documentElement,T)){if(R!==null&&Pu(T)){var z=R.start,Y=R.end;if(Y===void 0&&(Y=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(Y,T.value.length);else{var Q=T.ownerDocument||document,V=Q&&Q.defaultView||window;if(V.getSelection){var G=V.getSelection(),fe=T.textContent.length,be=Math.min(R.start,fe),nt=R.end===void 0?be:Math.min(R.end,fe);!G.extend&&be>nt&&(b=nt,nt=be,be=b);var D=kp(T,be),A=kp(T,nt);if(D&&A&&(G.rangeCount!==1||G.anchorNode!==D.node||G.anchorOffset!==D.offset||G.focusNode!==A.node||G.focusOffset!==A.offset)){var U=Q.createRange();U.setStart(D.node,D.offset),G.removeAllRanges(),be>nt?(G.addRange(U),G.extend(A.node,A.offset)):(U.setEnd(A.node,A.offset),G.addRange(U))}}}}for(Q=[],G=T;G=G.parentNode;)G.nodeType===1&&Q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Q.length;T++){var J=Q[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Zl=!!ch,uh=ch=null}finally{Ye=p,ne.p=u,q.T=o}}t.current=a,wt=2}}function qv(){if(wt===2){wt=0;var t=as,a=qa,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var u=ne.p;ne.p=2;var p=Ye;Ye|=4;try{pv(t,a.alternate,a)}finally{Ye=p,ne.p=u,q.T=o}}wt=3}}function Fv(){if(wt===4||wt===3){wt=0,WT();var t=as,a=qa,o=ki,u=jv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?wt=5:(wt=0,qa=as=null,Vv(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(ss=null),gu(o),a=a.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(br,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=q.T,p=ne.p,ne.p=2,q.T=null;try{for(var g=t.onRecoverableError,b=0;b<u.length;b++){var T=u[b];g(T.value,{componentStack:T.stack})}}finally{q.T=a,ne.p=p}}(ki&3)!==0&&Bl(),Xn(t),p=t.pendingLanes,(o&261930)!==0&&(p&42)!==0?t===Xd?eo++:(eo=0,Xd=t):eo=0,to(0)}}function Vv(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Pr(a)))}function Bl(){return Bv(),qv(),Fv(),Hv()}function Hv(){if(wt!==5)return!1;var t=as,a=Jd;Jd=0;var o=gu(ki),u=q.T,p=ne.p;try{ne.p=32>o?32:o,q.T=null,o=Qd,Qd=null;var g=as,b=ki;if(wt=0,qa=as=null,ki=0,(Ye&6)!==0)throw Error(s(331));var T=Ye;if(Ye|=4,Ev(g.current),Tv(g,g.current,b,o),Ye=T,to(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(br,g)}catch{}return!0}finally{ne.p=p,q.T=u,Vv(t,a)}}function Gv(t,a,o){a=En(o,a),a=jd(t.stateNode,a,2),t=Zi(t,a,2),t!==null&&(Sr(t,2),Xn(t))}function Ze(t,a,o){if(t.tag===3)Gv(t,t,o);else for(;a!==null;){if(a.tag===3){Gv(a,t,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ss===null||!ss.has(u))){t=En(o,t),o=Kg(2),u=Zi(a,o,2),u!==null&&(Yg(o,u,a,t),Sr(u,2),Xn(u));break}}a=a.return}}function Wd(t,a,o){var u=t.pingCache;if(u===null){u=t.pingCache=new EC;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(o)||(Gd=!0,p.add(o),t=_C.bind(null,t,a,o),a.then(t,t))}function _C(t,a,o){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,st===t&&(Ue&o)===o&&(ft===4||ft===3&&(Ue&62914560)===Ue&&300>un()-Dl?(Ye&2)===0&&Fa(t,0):Kd|=o,Ba===Ue&&(Ba=0)),Xn(t)}function Kv(t,a){a===0&&(a=Bm()),t=Ps(t,a),t!==null&&(Sr(t,a),Xn(t))}function OC(t){var a=t.memoizedState,o=0;a!==null&&(o=a.retryLane),Kv(t,o)}function AC(t,a){var o=0;switch(t.tag){case 31:case 13:var u=t.stateNode,p=t.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),Kv(t,o)}function MC(t,a){return hu(t,a)}var ql=null,Ha=null,eh=!1,Fl=!1,th=!1,os=0;function Xn(t){t!==Ha&&t.next===null&&(Ha===null?ql=Ha=t:Ha=Ha.next=t),Fl=!0,eh||(eh=!0,PC())}function to(t,a){if(!th&&Fl){th=!0;do for(var o=!1,u=ql;u!==null;){if(t!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var b=u.suspendedLanes,T=u.pingedLanes;g=(1<<31-hn(42|t)+1)-1,g&=p&~(b&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Xv(u,g))}else g=Ue,g=Ko(u,u===st?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||xr(u,g)||(o=!0,Xv(u,g));u=u.next}while(o);th=!1}}function DC(){Yv()}function Yv(){Fl=eh=!1;var t=0;os!==0&&GC()&&(t=os);for(var a=un(),o=null,u=ql;u!==null;){var p=u.next,g=Jv(u,a);g===0?(u.next=null,o===null?ql=p:o.next=p,p===null&&(Ha=o)):(o=u,(t!==0||(g&3)!==0)&&(Fl=!0)),u=p}wt!==0&&wt!==5||to(t),os!==0&&(os=0)}function Jv(t,a){for(var o=t.suspendedLanes,u=t.pingedLanes,p=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var b=31-hn(g),T=1<<b,R=p[b];R===-1?((T&o)===0||(T&u)!==0)&&(p[b]=o1(T,a)):R<=a&&(t.expiredLanes|=T),g&=~T}if(a=st,o=Ue,o=Ko(t,t===a?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,o===0||t===a&&($e===2||$e===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&fu(u),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||xr(t,o)){if(a=o&-o,a===t.callbackPriority)return a;switch(u!==null&&fu(u),gu(o)){case 2:case 8:o=Um;break;case 32:o=Fo;break;case 268435456:o=zm;break;default:o=Fo}return u=Qv.bind(null,t),o=hu(o,u),t.callbackPriority=a,t.callbackNode=o,a}return u!==null&&u!==null&&fu(u),t.callbackPriority=2,t.callbackNode=null,2}function Qv(t,a){if(wt!==0&&wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Bl()&&t.callbackNode!==o)return null;var u=Ue;return u=Ko(t,t===st?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(_v(t,u,a),Jv(t,un()),t.callbackNode!=null&&t.callbackNode===o?Qv.bind(null,t):null)}function Xv(t,a){if(Bl())return null;_v(t,a,!0)}function PC(){YC(function(){(Ye&6)!==0?hu(Im,DC):Yv()})}function nh(){if(os===0){var t=Ra;t===0&&(t=Vo,Vo<<=1,(Vo&261888)===0&&(Vo=256)),os=t}return os}function $v(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xo(""+t)}function Zv(t,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,t.id&&o.setAttribute("form",t.id),a.parentNode.insertBefore(o,a),t=new FormData(t),o.parentNode.removeChild(o),t}function LC(t,a,o,u,p){if(a==="submit"&&o&&o.stateNode===p){var g=$v((p[Wt]||null).action),b=u.submitter;b&&(a=(a=b[Wt]||null)?$v(a.formAction):b.getAttribute("formAction"),a!==null&&(g=a,b=null));var T=new el("action","action",null,u,p);t.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(os!==0){var R=b?Zv(p,b):new FormData(p);Td(o,{pending:!0,data:R,method:p.method,action:g},null,R)}}else typeof g=="function"&&(T.preventDefault(),R=b?Zv(p,b):new FormData(p),Td(o,{pending:!0,data:R,method:p.method,action:g},g,R))},currentTarget:p}]})}}for(var ih=0;ih<zu.length;ih++){var sh=zu[ih],IC=sh.toLowerCase(),UC=sh[0].toUpperCase()+sh.slice(1);In(IC,"on"+UC)}In(Rp,"onAnimationEnd"),In(_p,"onAnimationIteration"),In(Op,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(eC,"onTransitionRun"),In(tC,"onTransitionStart"),In(nC,"onTransitionCancel"),In(Ap,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Os("onBeforeInput",["compositionend","keypress","textInput","paste"]),Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(no));function Wv(t,a){a=(a&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],p=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var b=u.length-1;0<=b;b--){var T=u[b],R=T.instance,z=T.currentTarget;if(T=T.listener,R!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=z;try{g(p)}catch(Y){il(Y)}p.currentTarget=null,g=R}else for(b=0;b<u.length;b++){if(T=u[b],R=T.instance,z=T.currentTarget,T=T.listener,R!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=z;try{g(p)}catch(Y){il(Y)}p.currentTarget=null,g=R}}}}function Pe(t,a){var o=a[vu];o===void 0&&(o=a[vu]=new Set);var u=t+"__bubble";o.has(u)||(e0(a,t,2,!1),o.add(u))}function ah(t,a,o){var u=0;a&&(u|=4),e0(o,t,u,a)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function rh(t){if(!t[Vl]){t[Vl]=!0,Ym.forEach(function(o){o!=="selectionchange"&&(zC.has(o)||ah(o,!1,t),ah(o,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Vl]||(a[Vl]=!0,ah("selectionchange",!1,a))}}function e0(t,a,o,u){switch(R0(a)){case 2:var p=fk;break;case 8:p=mk;break;default:p=Sh}o=p.bind(null,a,o,t),p=void 0,!Nu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?t.addEventListener(a,o,{capture:!0,passive:p}):t.addEventListener(a,o,!0):p!==void 0?t.addEventListener(a,o,{passive:p}):t.addEventListener(a,o,!1)}function oh(t,a,o,u,p){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var T=u.stateNode.containerInfo;if(T===p)break;if(b===4)for(b=u.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;T!==null;){if(b=ha(T),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){u=g=b;continue e}T=T.parentNode}}u=u.return}ap(function(){var z=g,Y=ku(o),Q=[];e:{var V=Mp.get(t);if(V!==void 0){var G=el,fe=t;switch(t){case"keypress":if(Zo(o)===0)break e;case"keydown":case"keyup":G=A1;break;case"focusin":fe="focus",G=_u;break;case"focusout":fe="blur",G=_u;break;case"beforeblur":case"afterblur":G=_u;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=x1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=P1;break;case Rp:case _p:case Op:G=C1;break;case Ap:G=I1;break;case"scroll":case"scrollend":G=y1;break;case"wheel":G=z1;break;case"copy":case"cut":case"paste":G=E1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=up;break;case"toggle":case"beforetoggle":G=q1}var be=(a&4)!==0,nt=!be&&(t==="scroll"||t==="scrollend"),D=be?V!==null?V+"Capture":null:V;be=[];for(var A=z,U;A!==null;){var J=A;if(U=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||U===null||D===null||(J=kr(A,D),J!=null&&be.push(io(A,J,U))),nt)break;A=A.return}0<be.length&&(V=new G(V,fe,null,o,Y),Q.push({event:V,listeners:be}))}}if((a&7)===0){e:{if(V=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",V&&o!==Cu&&(fe=o.relatedTarget||o.fromElement)&&(ha(fe)||fe[da]))break e;if((G||V)&&(V=Y.window===Y?Y:(V=Y.ownerDocument)?V.defaultView||V.parentWindow:window,G?(fe=o.relatedTarget||o.toElement,G=z,fe=fe?ha(fe):null,fe!==null&&(nt=l(fe),be=fe.tag,fe!==nt||be!==5&&be!==27&&be!==6)&&(fe=null)):(G=null,fe=z),G!==fe)){if(be=lp,J="onMouseLeave",D="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(be=up,J="onPointerLeave",D="onPointerEnter",A="pointer"),nt=G==null?V:Cr(G),U=fe==null?V:Cr(fe),V=new be(J,A+"leave",G,o,Y),V.target=nt,V.relatedTarget=U,J=null,ha(Y)===z&&(be=new be(D,A+"enter",fe,o,Y),be.target=U,be.relatedTarget=nt,J=be),nt=J,G&&fe)t:{for(be=BC,D=G,A=fe,U=0,J=D;J;J=be(J))U++;J=0;for(var ye=A;ye;ye=be(ye))J++;for(;0<U-J;)D=be(D),U--;for(;0<J-U;)A=be(A),J--;for(;U--;){if(D===A||A!==null&&D===A.alternate){be=D;break t}D=be(D),A=be(A)}be=null}else be=null;G!==null&&t0(Q,V,G,be,!1),fe!==null&&nt!==null&&t0(Q,nt,fe,be,!0)}}e:{if(V=z?Cr(z):window,G=V.nodeName&&V.nodeName.toLowerCase(),G==="select"||G==="input"&&V.type==="file")var Ve=yp;else if(gp(V))if(bp)Ve=$1;else{Ve=Q1;var ge=J1}else G=V.nodeName,!G||G.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?z&&Tu(z.elementType)&&(Ve=yp):Ve=X1;if(Ve&&(Ve=Ve(t,z))){vp(Q,Ve,o,Y);break e}ge&&ge(t,V,z),t==="focusout"&&z&&V.type==="number"&&z.memoizedProps.value!=null&&Su(V,"number",V.value)}switch(ge=z?Cr(z):window,t){case"focusin":(gp(ge)||ge.contentEditable==="true")&&(Sa=ge,Lu=z,Ar=null);break;case"focusout":Ar=Lu=Sa=null;break;case"mousedown":Iu=!0;break;case"contextmenu":case"mouseup":case"dragend":Iu=!1,wp(Q,o,Y);break;case"selectionchange":if(W1)break;case"keydown":case"keyup":wp(Q,o,Y)}var we;if(Au)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else xa?mp(t,o)&&(ze="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ze="onCompositionStart");ze&&(dp&&o.locale!=="ko"&&(xa||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&xa&&(we=rp()):(Gi=Y,wu="value"in Gi?Gi.value:Gi.textContent,xa=!0)),ge=Hl(z,ze),0<ge.length&&(ze=new cp(ze,t,null,o,Y),Q.push({event:ze,listeners:ge}),we?ze.data=we:(we=pp(o),we!==null&&(ze.data=we)))),(we=V1?H1(t,o):G1(t,o))&&(ze=Hl(z,"onBeforeInput"),0<ze.length&&(ge=new cp("onBeforeInput","beforeinput",null,o,Y),Q.push({event:ge,listeners:ze}),ge.data=we)),LC(Q,t,z,o,Y)}Wv(Q,a)})}function io(t,a,o){return{instance:t,listener:a,currentTarget:o}}function Hl(t,a){for(var o=a+"Capture",u=[];t!==null;){var p=t,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=kr(t,o),p!=null&&u.unshift(io(t,p,g)),p=kr(t,a),p!=null&&u.push(io(t,p,g))),t.tag===3)return u;t=t.return}return[]}function BC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function t0(t,a,o,u,p){for(var g=a._reactName,b=[];o!==null&&o!==u;){var T=o,R=T.alternate,z=T.stateNode;if(T=T.tag,R!==null&&R===u)break;T!==5&&T!==26&&T!==27||z===null||(R=z,p?(z=kr(o,g),z!=null&&b.unshift(io(o,z,R))):p||(z=kr(o,g),z!=null&&b.push(io(o,z,R)))),o=o.return}b.length!==0&&t.push({event:a,listeners:b})}var qC=/\r\n?/g,FC=/\u0000|\uFFFD/g;function n0(t){return(typeof t=="string"?t:""+t).replace(qC,`
`).replace(FC,"")}function i0(t,a){return a=n0(a),n0(t)===a}function tt(t,a,o,u,p,g){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||va(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&va(t,""+u);break;case"className":Jo(t,"class",u);break;case"tabIndex":Jo(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Jo(t,o,u);break;case"style":ip(t,u,g);break;case"data":if(a!=="object"){Jo(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){t.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=Xo(""+u),t.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(a!=="input"&&tt(t,a,"name",p.name,p,null),tt(t,a,"formEncType",p.formEncType,p,null),tt(t,a,"formMethod",p.formMethod,p,null),tt(t,a,"formTarget",p.formTarget,p,null)):(tt(t,a,"encType",p.encType,p,null),tt(t,a,"method",p.method,p,null),tt(t,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=Xo(""+u),t.setAttribute(o,u);break;case"onClick":u!=null&&(t.onclick=ci);break;case"onScroll":u!=null&&Pe("scroll",t);break;case"onScrollEnd":u!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));t.innerHTML=o}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}o=Xo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""+u):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":u===!0?t.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,u):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(o,u):t.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(o):t.setAttribute(o,u);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Yo(t,"popover",u);break;case"xlinkActuate":li(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":li(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":li(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":li(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":li(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":li(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":li(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":li(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":li(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Yo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=g1.get(o)||o,Yo(t,o,u))}}function lh(t,a,o,u,p,g){switch(o){case"style":ip(t,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));t.innerHTML=o}}break;case"children":typeof u=="string"?va(t,u):(typeof u=="number"||typeof u=="bigint")&&va(t,""+u);break;case"onScroll":u!=null&&Pe("scroll",t);break;case"onScrollEnd":u!=null&&Pe("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),a=o.slice(2,p?o.length-7:void 0),g=t[Wt]||null,g=g!=null?g[o]:null,typeof g=="function"&&t.removeEventListener(a,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(a,u,p);break e}o in t?t[o]=u:u===!0?t.setAttribute(o,""):Yo(t,o,u)}}}function Ft(t,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var u=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:tt(t,a,g,b,o,null)}}p&&tt(t,a,"srcSet",o.srcSet,o,null),u&&tt(t,a,"src",o.src,o,null);return;case"input":Pe("invalid",t);var T=g=b=p=null,R=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var Y=o[u];if(Y!=null)switch(u){case"name":p=Y;break;case"type":b=Y;break;case"checked":R=Y;break;case"defaultChecked":z=Y;break;case"value":g=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,a));break;default:tt(t,a,u,Y,o,null)}}Wm(t,g,T,R,z,b,p,!1);return;case"select":Pe("invalid",t),u=b=g=null;for(p in o)if(o.hasOwnProperty(p)&&(T=o[p],T!=null))switch(p){case"value":g=T;break;case"defaultValue":b=T;break;case"multiple":u=T;default:tt(t,a,p,T,o,null)}a=g,o=b,t.multiple=!!u,a!=null?ga(t,!!u,a,!1):o!=null&&ga(t,!!u,o,!0);return;case"textarea":Pe("invalid",t),g=p=u=null;for(b in o)if(o.hasOwnProperty(b)&&(T=o[b],T!=null))switch(b){case"value":u=T;break;case"defaultValue":p=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:tt(t,a,b,T,o,null)}tp(t,u,p,g);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(t,a,R,u,o,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(u=0;u<no.length;u++)Pe(no[u],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:tt(t,a,z,u,o,null)}return;default:if(Tu(a)){for(Y in o)o.hasOwnProperty(Y)&&(u=o[Y],u!==void 0&&lh(t,a,Y,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&tt(t,a,T,u,o,null))}function VC(t,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,b=null,T=null,R=null,z=null,Y=null;for(G in o){var Q=o[G];if(o.hasOwnProperty(G)&&Q!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=Q;default:u.hasOwnProperty(G)||tt(t,a,G,null,u,Q)}}for(var V in u){var G=u[V];if(Q=o[V],u.hasOwnProperty(V)&&(G!=null||Q!=null))switch(V){case"type":g=G;break;case"name":p=G;break;case"checked":z=G;break;case"defaultChecked":Y=G;break;case"value":b=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,a));break;default:G!==Q&&tt(t,a,V,G,u,Q)}}xu(t,b,T,R,z,Y,g,p);return;case"select":G=b=T=V=null;for(g in o)if(R=o[g],o.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":G=R;default:u.hasOwnProperty(g)||tt(t,a,g,null,u,R)}for(p in u)if(g=u[p],R=o[p],u.hasOwnProperty(p)&&(g!=null||R!=null))switch(p){case"value":V=g;break;case"defaultValue":T=g;break;case"multiple":b=g;default:g!==R&&tt(t,a,p,g,u,R)}a=T,o=b,u=G,V!=null?ga(t,!!o,V,!1):!!u!=!!o&&(a!=null?ga(t,!!o,a,!0):ga(t,!!o,o?[]:"",!1));return;case"textarea":G=V=null;for(T in o)if(p=o[T],o.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:tt(t,a,T,null,u,p)}for(b in u)if(p=u[b],g=o[b],u.hasOwnProperty(b)&&(p!=null||g!=null))switch(b){case"value":V=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&tt(t,a,b,p,u,g)}ep(t,V,G);return;case"option":for(var fe in o)if(V=o[fe],o.hasOwnProperty(fe)&&V!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:tt(t,a,fe,null,u,V)}for(R in u)if(V=u[R],G=o[R],u.hasOwnProperty(R)&&V!==G&&(V!=null||G!=null))switch(R){case"selected":t.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:tt(t,a,R,V,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in o)V=o[be],o.hasOwnProperty(be)&&V!=null&&!u.hasOwnProperty(be)&&tt(t,a,be,null,u,V);for(z in u)if(V=u[z],G=o[z],u.hasOwnProperty(z)&&V!==G&&(V!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,a));break;default:tt(t,a,z,V,u,G)}return;default:if(Tu(a)){for(var nt in o)V=o[nt],o.hasOwnProperty(nt)&&V!==void 0&&!u.hasOwnProperty(nt)&&lh(t,a,nt,void 0,u,V);for(Y in u)V=u[Y],G=o[Y],!u.hasOwnProperty(Y)||V===G||V===void 0&&G===void 0||lh(t,a,Y,V,u,G);return}}for(var D in o)V=o[D],o.hasOwnProperty(D)&&V!=null&&!u.hasOwnProperty(D)&&tt(t,a,D,null,u,V);for(Q in u)V=u[Q],G=o[Q],!u.hasOwnProperty(Q)||V===G||V==null&&G==null||tt(t,a,Q,V,u,G)}function s0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],g=p.transferSize,b=p.initiatorType,T=p.duration;if(g&&T&&s0(b)){for(b=0,T=p.responseEnd,u+=1;u<o.length;u++){var R=o[u],z=R.startTime;if(z>T)break;var Y=R.transferSize,Q=R.initiatorType;Y&&s0(Q)&&(R=R.responseEnd,b+=Y*(R<T?1:(T-z)/(R-z)))}if(--u,a+=8*(g+b)/(p.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ch=null,uh=null;function Gl(t){return t.nodeType===9?t:t.ownerDocument}function a0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r0(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function dh(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hh=null;function GC(){var t=window.event;return t&&t.type==="popstate"?t===hh?!1:(hh=t,!0):(hh=null,!1)}var o0=typeof setTimeout=="function"?setTimeout:void 0,KC=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(t){return l0.resolve(null).then(t).catch(JC)}:o0;function JC(t){setTimeout(function(){throw t})}function ls(t){return t==="head"}function c0(t,a){var o=a,u=0;do{var p=o.nextSibling;if(t.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){t.removeChild(p),Ja(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")so(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,so(o);for(var g=o.firstChild;g;){var b=g.nextSibling,T=g.nodeName;g[Tr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=b}}else o==="body"&&so(t.ownerDocument.body);o=p}while(o);Ja(a)}function u0(t,a){var o=t;t=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=u}while(o)}function fh(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":fh(o),yu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function QC(t,a,o,u){for(;t.nodeType===1;){var p=o;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Tr])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=_n(t.nextSibling),t===null)break}return null}function XC(t,a,o){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=_n(t.nextSibling),t===null))return null;return t}function d0(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=_n(t.nextSibling),t===null))return null;return t}function mh(t){return t.data==="$?"||t.data==="$~"}function ph(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function $C(t,a){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function _n(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var gh=null;function h0(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(a===0)return _n(t.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}t=t.nextSibling}return null}function f0(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return t;a--}else o!=="/$"&&o!=="/&"||a++}t=t.previousSibling}return null}function m0(t,a,o){switch(a=Gl(o),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function so(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);yu(t)}var On=new Map,p0=new Set;function Kl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ei=ne.d;ne.d={f:ZC,r:WC,D:ek,C:tk,L:nk,m:ik,X:ak,S:sk,M:rk};function ZC(){var t=Ei.f(),a=Il();return t||a}function WC(t){var a=fa(t);a!==null&&a.tag===5&&a.type==="form"?Ag(a):Ei.r(t)}var Ga=typeof document>"u"?null:document;function g0(t,a,o){var u=Ga;if(u&&typeof a=="string"&&a){var p=Cn(a);p='link[rel="'+t+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),p0.has(p)||(p0.add(p),t={rel:t,crossOrigin:o,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),Ft(a,"link",t),Mt(a),u.head.appendChild(a)))}}function ek(t){Ei.D(t),g0("dns-prefetch",t,null)}function tk(t,a){Ei.C(t,a),g0("preconnect",t,a)}function nk(t,a,o){Ei.L(t,a,o);var u=Ga;if(u&&t&&a){var p='link[rel="preload"][as="'+Cn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Cn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Cn(o.imageSizes)+'"]')):p+='[href="'+Cn(t)+'"]';var g=p;switch(a){case"style":g=Ka(t);break;case"script":g=Ya(t)}On.has(g)||(t=y({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:t,as:a},o),On.set(g,t),u.querySelector(p)!==null||a==="style"&&u.querySelector(ao(g))||a==="script"&&u.querySelector(ro(g))||(a=u.createElement("link"),Ft(a,"link",t),Mt(a),u.head.appendChild(a)))}}function ik(t,a){Ei.m(t,a);var o=Ga;if(o&&t){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Cn(u)+'"][href="'+Cn(t)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ya(t)}if(!On.has(g)&&(t=y({rel:"modulepreload",href:t},a),On.set(g,t),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ro(g)))return}u=o.createElement("link"),Ft(u,"link",t),Mt(u),o.head.appendChild(u)}}}function sk(t,a,o){Ei.S(t,a,o);var u=Ga;if(u&&t){var p=ma(u).hoistableStyles,g=Ka(t);a=a||"default";var b=p.get(g);if(!b){var T={loading:0,preload:null};if(b=u.querySelector(ao(g)))T.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":a},o),(o=On.get(g))&&vh(t,o);var R=b=u.createElement("link");Mt(R),Ft(R,"link",t),R._p=new Promise(function(z,Y){R.onload=z,R.onerror=Y}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Yl(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:T},p.set(g,b)}}}function ak(t,a){Ei.X(t,a);var o=Ga;if(o&&t){var u=ma(o).hoistableScripts,p=Ya(t),g=u.get(p);g||(g=o.querySelector(ro(p)),g||(t=y({src:t,async:!0},a),(a=On.get(p))&&yh(t,a),g=o.createElement("script"),Mt(g),Ft(g,"link",t),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function rk(t,a){Ei.M(t,a);var o=Ga;if(o&&t){var u=ma(o).hoistableScripts,p=Ya(t),g=u.get(p);g||(g=o.querySelector(ro(p)),g||(t=y({src:t,async:!0,type:"module"},a),(a=On.get(p))&&yh(t,a),g=o.createElement("script"),Mt(g),Ft(g,"link",t),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function v0(t,a,o,u){var p=(p=ke.current)?Kl(p):null;if(!p)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Ka(o.href),o=ma(p).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=Ka(o.href);var g=ma(p).hoistableStyles,b=g.get(t);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,b),(g=p.querySelector(ao(t)))&&!g._p&&(b.instance=g,b.state.loading=5),On.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},On.set(t,o),g||ok(p,t,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ya(o),o=ma(p).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ka(t){return'href="'+Cn(t)+'"'}function ao(t){return'link[rel="stylesheet"]['+t+"]"}function y0(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function ok(t,a,o,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Ft(a,"link",o),Mt(a),t.head.appendChild(a))}function Ya(t){return'[src="'+Cn(t)+'"]'}function ro(t){return"script[async]"+t}function b0(t,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+Cn(o.href)+'"]');if(u)return a.instance=u,Mt(u),u;var p=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Mt(u),Ft(u,"style",p),Yl(u,o.precedence,t),a.instance=u;case"stylesheet":p=Ka(o.href);var g=t.querySelector(ao(p));if(g)return a.state.loading|=4,a.instance=g,Mt(g),g;u=y0(o),(p=On.get(p))&&vh(u,p),g=(t.ownerDocument||t).createElement("link"),Mt(g);var b=g;return b._p=new Promise(function(T,R){b.onload=T,b.onerror=R}),Ft(g,"link",u),a.state.loading|=4,Yl(g,o.precedence,t),a.instance=g;case"script":return g=Ya(o.src),(p=t.querySelector(ro(g)))?(a.instance=p,Mt(p),p):(u=o,(p=On.get(g))&&(u=y({},o),yh(u,p)),t=t.ownerDocument||t,p=t.createElement("script"),Mt(p),Ft(p,"link",u),t.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Yl(u,o.precedence,t));return a.instance}function Yl(t,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,b=0;b<u.length;b++){var T=u[b];if(T.dataset.precedence===a)g=T;else if(g!==p)break}g?g.parentNode.insertBefore(t,g.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(t,a.firstChild))}function vh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function yh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Jl=null;function x0(t,a,o){if(Jl===null){var u=new Map,p=Jl=new Map;p.set(o,u)}else p=Jl,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(t))return u;for(u.set(t,null),o=o.getElementsByTagName(t),p=0;p<o.length;p++){var g=o[p];if(!(g[Tr]||g[Ut]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(a)||"";b=t+b;var T=u.get(b);T?T.push(g):u.set(b,[g])}}return u}function S0(t,a,o){t=t.ownerDocument||t,t.head.insertBefore(o,a==="title"?t.querySelector("head > title"):null)}function lk(t,a,o){if(o===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function T0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ck(t,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Ka(u.href),g=a.querySelector(ao(p));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Ql.bind(t),a.then(t,t)),o.state.loading|=4,o.instance=g,Mt(g);return}g=a.ownerDocument||a,u=y0(u),(p=On.get(p))&&vh(u,p),g=g.createElement("link"),Mt(g);var b=g;b._p=new Promise(function(T,R){b.onload=T,b.onerror=R}),Ft(g,"link",u),o.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Ql.bind(t),a.addEventListener("load",o),a.addEventListener("error",o))}}var bh=0;function uk(t,a){return t.stylesheets&&t.count===0&&$l(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var u=setTimeout(function(){if(t.stylesheets&&$l(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+a);0<t.imgBytes&&bh===0&&(bh=62500*HC());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$l(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>bh?50:800)+a);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$l(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xl=null;function $l(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xl=new Map,a.forEach(dk,t),Xl=null,Ql.call(t))}function dk(t,a){if(!(a.state.loading&4)){var o=Xl.get(t);if(o)var u=o.get(null);else{o=new Map,Xl.set(t,o);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var b=p[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}p=a.instance,b=p.getAttribute("data-precedence"),g=o.get(b)||u,g===u&&o.set(null,p),o.set(b,p),this.count++,u=Ql.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),a.state.loading|=4}}var oo={$$typeof:F,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function hk(t,a,o,u,p,g,b,T,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.hiddenUpdates=mu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function C0(t,a,o,u,p,g,b,T,R,z,Y,Q){return t=new hk(t,a,o,b,R,z,Y,Q,T),a=1,g===!0&&(a|=24),g=mn(3,null,null,a),t.current=g,g.stateNode=t,a=Zu(),a.refCount++,t.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:a},nd(g),t}function k0(t){return t?(t=ka,t):ka}function E0(t,a,o,u,p,g){p=k0(p),u.context===null?u.context=p:u.pendingContext=p,u=$i(a),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Zi(t,u,a),o!==null&&(rn(o,t,a),zr(o,t,a))}function N0(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<a?o:a}}function xh(t,a){N0(t,a),(t=t.alternate)&&N0(t,a)}function w0(t){if(t.tag===13||t.tag===31){var a=Ps(t,67108864);a!==null&&rn(a,t,67108864),xh(t,67108864)}}function j0(t){if(t.tag===13||t.tag===31){var a=bn();a=pu(a);var o=Ps(t,a);o!==null&&rn(o,t,a),xh(t,a)}}var Zl=!0;function fk(t,a,o,u){var p=q.T;q.T=null;var g=ne.p;try{ne.p=2,Sh(t,a,o,u)}finally{ne.p=g,q.T=p}}function mk(t,a,o,u){var p=q.T;q.T=null;var g=ne.p;try{ne.p=8,Sh(t,a,o,u)}finally{ne.p=g,q.T=p}}function Sh(t,a,o,u){if(Zl){var p=Th(u);if(p===null)oh(t,a,u,Wl,o),_0(t,u);else if(gk(p,t,a,o,u))u.stopPropagation();else if(_0(t,u),a&4&&-1<pk.indexOf(t)){for(;p!==null;){var g=fa(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=_s(g.pendingLanes);if(b!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var R=1<<31-hn(b);T.entanglements[1]|=R,b&=~R}Xn(g),(Ye&6)===0&&(Pl=un()+500,to(0))}}break;case 31:case 13:T=Ps(g,2),T!==null&&rn(T,g,2),Il(),xh(g,2)}if(g=Th(u),g===null&&oh(t,a,u,Wl,o),g===p)break;p=g}p!==null&&u.stopPropagation()}else oh(t,a,u,null,o)}}function Th(t){return t=ku(t),Ch(t)}var Wl=null;function Ch(t){if(Wl=null,t=ha(t),t!==null){var a=l(t);if(a===null)t=null;else{var o=a.tag;if(o===13){if(t=d(a),t!==null)return t;t=null}else if(o===31){if(t=h(a),t!==null)return t;t=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Wl=t,null}function R0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(e1()){case Im:return 2;case Um:return 8;case Fo:case t1:return 32;case zm:return 268435456;default:return 32}default:return 32}}var kh=!1,cs=null,us=null,ds=null,lo=new Map,co=new Map,hs=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(t,a){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":lo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(a.pointerId)}}function uo(t,a,o,u,p,g){return t===null||t.nativeEvent!==g?(t={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},a!==null&&(a=fa(a),a!==null&&w0(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),t)}function gk(t,a,o,u,p){switch(a){case"focusin":return cs=uo(cs,t,a,o,u,p),!0;case"dragenter":return us=uo(us,t,a,o,u,p),!0;case"mouseover":return ds=uo(ds,t,a,o,u,p),!0;case"pointerover":var g=p.pointerId;return lo.set(g,uo(lo.get(g)||null,t,a,o,u,p)),!0;case"gotpointercapture":return g=p.pointerId,co.set(g,uo(co.get(g)||null,t,a,o,u,p)),!0}return!1}function O0(t){var a=ha(t.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){t.blockedOn=a,Gm(t.priority,function(){j0(o)});return}}else if(a===31){if(a=h(o),a!==null){t.blockedOn=a,Gm(t.priority,function(){j0(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var o=Th(t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Cu=u,o.target.dispatchEvent(u),Cu=null}else return a=fa(o),a!==null&&w0(a),t.blockedOn=o,!1;a.shift()}return!0}function A0(t,a,o){ec(t)&&o.delete(a)}function vk(){kh=!1,cs!==null&&ec(cs)&&(cs=null),us!==null&&ec(us)&&(us=null),ds!==null&&ec(ds)&&(ds=null),lo.forEach(A0),co.forEach(A0)}function tc(t,a){t.blockedOn===a&&(t.blockedOn=null,kh||(kh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vk)))}var nc=null;function M0(t){nc!==t&&(nc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){nc===t&&(nc=null);for(var a=0;a<t.length;a+=3){var o=t[a],u=t[a+1],p=t[a+2];if(typeof u!="function"){if(Ch(u||o)===null)continue;break}var g=fa(o);g!==null&&(t.splice(a,3),a-=3,Td(g,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Ja(t){function a(R){return tc(R,t)}cs!==null&&tc(cs,t),us!==null&&tc(us,t),ds!==null&&tc(ds,t),lo.forEach(a),co.forEach(a);for(var o=0;o<hs.length;o++){var u=hs[o];u.blockedOn===t&&(u.blockedOn=null)}for(;0<hs.length&&(o=hs[0],o.blockedOn===null);)O0(o),o.blockedOn===null&&hs.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],g=o[u+1],b=p[Wt]||null;if(typeof g=="function")b||M0(o);else if(b){var T=null;if(g&&g.hasAttribute("formAction")){if(p=g,b=g[Wt]||null)T=b.formAction;else if(Ch(p)!==null)continue}else T=b.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),M0(o)}}}function D0(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Eh(t){this._internalRoot=t}ic.prototype.render=Eh.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=bn();E0(o,u,t,a,null,null)},ic.prototype.unmount=Eh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;E0(t.current,2,null,t,null,null),Il(),a[da]=null}};function ic(t){this._internalRoot=t}ic.prototype.unstable_scheduleHydration=function(t){if(t){var a=Hm();t={blockedOn:null,target:t,priority:a};for(var o=0;o<hs.length&&a!==0&&a<hs[o].priority;o++);hs.splice(o,0,t),o===0&&O0(t)}};var P0=e.version;if(P0!=="19.2.0")throw Error(s(527,P0,"19.2.0"));ne.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(a),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var yk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{br=sc.inject(yk),dn=sc}catch{}}return fo.createRoot=function(t,a){if(!r(t))throw Error(s(299));var o=!1,u="",p=Fg,g=Vg,b=Hg;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=C0(t,1,!1,null,null,o,u,null,p,g,b,D0),t[da]=a.current,rh(t),new Eh(a)},fo.hydrateRoot=function(t,a,o){if(!r(t))throw Error(s(299));var u=!1,p="",g=Fg,b=Vg,T=Hg,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(R=o.formState)),a=C0(t,1,!0,a,o??null,u,p,R,g,b,T,D0),a.context=k0(null),o=a.current,u=bn(),u=pu(u),p=$i(u),p.callback=null,Zi(o,p,u),o=u,a.current.lanes=o,Sr(a,o),Xn(a),t[da]=a.current,rh(t),new ic(a)},fo.version="19.2.0",fo}var G0;function Rk(){if(G0)return jh.exports;G0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jh.exports=jk(),jh.exports}var _k=Rk();var K0="popstate";function Ok(i={}){function e(s,r){let{pathname:l,search:d,hash:h}=s.location;return rf("",{pathname:l,search:d,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:_o(r)}return Mk(e,n,null,i)}function dt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ii(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ak(){return Math.random().toString(36).substring(2,10)}function Y0(i,e){return{usr:i.state,key:i.key,idx:e}}function rf(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?mr(e):e,state:n,key:e&&e.key||s||Ak()}}function _o({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function mr(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Mk(i,e,n,s={}){let{window:r=document.defaultView,v5Compat:l=!1}=s,d=r.history,h="POP",f=null,m=v();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function v(){return(d.state||{idx:null}).idx}function y(){h="POP";let w=v(),_=w==null?null:w-m;m=w,f&&f({action:h,location:C.location,delta:_})}function x(w,_){h="PUSH";let L=rf(C.location,w,_);m=v()+1;let F=Y0(L,m),j=C.createHref(L);try{d.pushState(F,"",j)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(j)}l&&f&&f({action:h,location:C.location,delta:1})}function S(w,_){h="REPLACE";let L=rf(C.location,w,_);m=v();let F=Y0(L,m),j=C.createHref(L);d.replaceState(F,"",j),l&&f&&f({action:h,location:C.location,delta:0})}function k(w){return Dk(w)}let C={get action(){return h},get location(){return i(r,d)},listen(w){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(K0,y),f=w,()=>{r.removeEventListener(K0,y),f=null}},createHref(w){return e(r,w)},createURL:k,encodeLocation(w){let _=k(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:S,go(w){return d.go(w)}};return C}function Dk(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:_o(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Lb(i,e,n="/"){return Pk(i,e,n,!1)}function Pk(i,e,n,s){let r=typeof e=="string"?mr(e):e,l=Ii(r.pathname||"/",n);if(l==null)return null;let d=Ib(i);Lk(d);let h=null;for(let f=0;h==null&&f<d.length;++f){let m=Yk(l);h=Gk(d[f],m,s)}return h}function Ib(i,e=[],n=[],s="",r=!1){let l=(d,h,f=r,m)=>{let v={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&f)return;dt(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let y=Di([s,v.relativePath]),x=n.concat(v);d.children&&d.children.length>0&&(dt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ib(d.children,e,x,y,f)),!(d.path==null&&!d.index)&&e.push({path:y,score:Vk(y,d.index),routesMeta:x})};return i.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))l(d,h);else for(let f of Ub(d.path))l(d,h,!0,f)}),e}function Ub(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return r?[l,""]:[l];let d=Ub(s.join("/")),h=[];return h.push(...d.map(f=>f===""?l:[l,f].join("/"))),r&&h.push(...d),h.map(f=>i.startsWith("/")&&f===""?"/":f)}function Lk(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:Hk(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Ik=/^:[\w-]+$/,Uk=3,zk=2,Bk=1,qk=10,Fk=-2,J0=i=>i==="*";function Vk(i,e){let n=i.split("/"),s=n.length;return n.some(J0)&&(s+=Fk),e&&(s+=zk),n.filter(r=>!J0(r)).reduce((r,l)=>r+(Ik.test(l)?Uk:l===""?Bk:qk),s)}function Hk(i,e){return i.length===e.length&&i.slice(0,-1).every((s,r)=>s===e[r])?i[i.length-1]-e[e.length-1]:0}function Gk(i,e,n=!1){let{routesMeta:s}=i,r={},l="/",d=[];for(let h=0;h<s.length;++h){let f=s[h],m=h===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",y=wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),x=f.route;if(!y&&m&&n&&!s[s.length-1].route.index&&(y=wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!y)return null;Object.assign(r,y.params),d.push({params:r,pathname:Di([l,y.pathname]),pathnameBase:$k(Di([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=Di([l,y.pathnameBase]))}return d}function wc(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=Kk(i.path,i.caseSensitive,i.end),r=e.match(n);if(!r)return null;let l=r[0],d=l.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:s.reduce((m,{paramName:v,isOptional:y},x)=>{if(v==="*"){let k=h[x]||"";d=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const S=h[x];return y&&!S?m[v]=void 0:m[v]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:i}}function Kk(i,e=!1,n=!0){ii(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,f)=>(s.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Yk(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ii(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ii(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function Jk(i,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof i=="string"?mr(i):i;return{pathname:n?n.startsWith("/")?n:Qk(n,e):e,search:Zk(s),hash:Wk(r)}}function Qk(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ah(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Xk(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zb(i){let e=Xk(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Bb(i,e,n,s=!1){let r;typeof i=="string"?r=mr(i):(r={...i},dt(!r.pathname||!r.pathname.includes("?"),Ah("?","pathname","search",r)),dt(!r.pathname||!r.pathname.includes("#"),Ah("#","pathname","hash",r)),dt(!r.search||!r.search.includes("#"),Ah("#","search","hash",r)));let l=i===""||r.pathname==="",d=l?"/":r.pathname,h;if(d==null)h=n;else{let y=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),y-=1;r.pathname=x.join("/")}h=y>=0?e[y]:"/"}let f=Jk(r,h),m=d&&d!=="/"&&d.endsWith("/"),v=(l||d===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Di=i=>i.join("/").replace(/\/\/+/g,"/"),$k=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Zk=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Wk=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function eE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qb=["POST","PUT","PATCH","DELETE"];new Set(qb);var tE=["GET",...qb];new Set(tE);var pr=E.createContext(null);pr.displayName="DataRouter";var Jc=E.createContext(null);Jc.displayName="DataRouterState";E.createContext(!1);var Fb=E.createContext({isTransitioning:!1});Fb.displayName="ViewTransition";var nE=E.createContext(new Map);nE.displayName="Fetchers";var iE=E.createContext(null);iE.displayName="Await";var ri=E.createContext(null);ri.displayName="Navigation";var Uo=E.createContext(null);Uo.displayName="Location";var zi=E.createContext({outlet:null,matches:[],isDataRoute:!1});zi.displayName="Route";var Xf=E.createContext(null);Xf.displayName="RouteError";function sE(i,{relative:e}={}){dt(zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=E.useContext(ri),{hash:r,pathname:l,search:d}=Bo(i,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:Di([n,l])),s.createHref({pathname:h,search:d,hash:r})}function zo(){return E.useContext(Uo)!=null}function Ns(){return dt(zo(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Uo).location}var Vb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hb(i){E.useContext(ri).static||E.useLayoutEffect(i)}function aE(){let{isDataRoute:i}=E.useContext(zi);return i?yE():rE()}function rE(){dt(zo(),"useNavigate() may be used only in the context of a <Router> component.");let i=E.useContext(pr),{basename:e,navigator:n}=E.useContext(ri),{matches:s}=E.useContext(zi),{pathname:r}=Ns(),l=JSON.stringify(zb(s)),d=E.useRef(!1);return Hb(()=>{d.current=!0}),E.useCallback((f,m={})=>{if(ii(d.current,Vb),!d.current)return;if(typeof f=="number"){n.go(f);return}let v=Bb(f,JSON.parse(l),r,m.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Di([e,v.pathname])),(m.replace?n.replace:n.push)(v,m.state,m)},[e,n,l,r,i])}E.createContext(null);function Bo(i,{relative:e}={}){let{matches:n}=E.useContext(zi),{pathname:s}=Ns(),r=JSON.stringify(zb(n));return E.useMemo(()=>Bb(i,JSON.parse(r),s,e==="path"),[i,r,s,e])}function oE(i,e){return Gb(i,e)}function Gb(i,e,n,s,r){dt(zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=E.useContext(ri),{matches:d}=E.useContext(zi),h=d[d.length-1],f=h?h.params:{},m=h?h.pathname:"/",v=h?h.pathnameBase:"/",y=h&&h.route;{let L=y&&y.path||"";Kb(m,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let x=Ns(),S;if(e){let L=typeof e=="string"?mr(e):e;dt(v==="/"||L.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${L.pathname}" was given in the \`location\` prop.`),S=L}else S=x;let k=S.pathname||"/",C=k;if(v!=="/"){let L=v.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let w=Lb(i,{pathname:C});ii(y||w!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ii(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=hE(w&&w.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Di([v,l.encodeLocation?l.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?v:Di([v,l.encodeLocation?l.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),d,n,s,r);return e&&_?E.createElement(Uo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},_):_}function lE(){let i=vE(),e=eE(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:l},"ErrorBoundary")," or"," ",E.createElement("code",{style:l},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:r},n):null,d)}var cE=E.createElement(lE,null),uE=class extends E.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?E.createElement(zi.Provider,{value:this.props.routeContext},E.createElement(Xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dE({routeContext:i,match:e,children:n}){let s=E.useContext(pr);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(zi.Provider,{value:i},n)}function hE(i,e=[],n=null,s=null,r=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let l=i,d=n?.errors;if(d!=null){let m=l.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);dt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,f=-1;if(n)for(let m=0;m<l.length;m++){let v=l[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=m),v.route.id){let{loaderData:y,errors:x}=n,S=v.route.loader&&!y.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||S){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,v,y)=>{let x,S=!1,k=null,C=null;n&&(x=d&&v.route.id?d[v.route.id]:void 0,k=v.route.errorElement||cE,h&&(f<0&&y===0?(Kb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):f===y&&(S=!0,C=v.route.hydrateFallbackElement||null)));let w=e.concat(l.slice(0,y+1)),_=()=>{let L;return x?L=k:S?L=C:v.route.Component?L=E.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=m,E.createElement(dE,{match:v,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:L})};return n&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?E.createElement(uE,{location:n.location,revalidation:n.revalidation,component:k,error:x,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:s}):_()},null)}function $f(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fE(i){let e=E.useContext(pr);return dt(e,$f(i)),e}function mE(i){let e=E.useContext(Jc);return dt(e,$f(i)),e}function pE(i){let e=E.useContext(zi);return dt(e,$f(i)),e}function Zf(i){let e=pE(i),n=e.matches[e.matches.length-1];return dt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function gE(){return Zf("useRouteId")}function vE(){let i=E.useContext(Xf),e=mE("useRouteError"),n=Zf("useRouteError");return i!==void 0?i:e.errors?.[n]}function yE(){let{router:i}=fE("useNavigate"),e=Zf("useNavigate"),n=E.useRef(!1);return Hb(()=>{n.current=!0}),E.useCallback(async(r,l={})=>{ii(n.current,Vb),n.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...l}))},[i,e])}var Q0={};function Kb(i,e,n){!e&&!Q0[i]&&(Q0[i]=!0,ii(!1,n))}E.memo(bE);function bE({routes:i,future:e,state:n,unstable_onError:s}){return Gb(i,void 0,n,s,e)}function xn(i){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xE({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:l=!1}){dt(!zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:d,navigator:r,static:l,future:{}}),[d,r,l]);typeof n=="string"&&(n=mr(n));let{pathname:f="/",search:m="",hash:v="",state:y=null,key:x="default"}=n,S=E.useMemo(()=>{let k=Ii(f,d);return k==null?null:{location:{pathname:k,search:m,hash:v,state:y,key:x},navigationType:s}},[d,f,m,v,y,x,s]);return ii(S!=null,`<Router basename="${d}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:E.createElement(ri.Provider,{value:h},E.createElement(Uo.Provider,{children:e,value:S}))}function SE({children:i,location:e}){return oE(of(i),e)}function of(i,e=[]){let n=[];return E.Children.forEach(i,(s,r)=>{if(!E.isValidElement(s))return;let l=[...e,r];if(s.type===E.Fragment){n.push.apply(n,of(s.props.children,l));return}dt(s.type===xn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=of(s.props.children,l)),n.push(d)}),n}var hc="get",fc="application/x-www-form-urlencoded";function Qc(i){return i!=null&&typeof i.tagName=="string"}function TE(i){return Qc(i)&&i.tagName.toLowerCase()==="button"}function CE(i){return Qc(i)&&i.tagName.toLowerCase()==="form"}function kE(i){return Qc(i)&&i.tagName.toLowerCase()==="input"}function EE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function NE(i,e){return i.button===0&&(!e||e==="_self")&&!EE(i)}var ac=null;function wE(){if(ac===null)try{new FormData(document.createElement("form"),0),ac=!1}catch{ac=!0}return ac}var jE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mh(i){return i!=null&&!jE.has(i)?(ii(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):i}function RE(i,e){let n,s,r,l,d;if(CE(i)){let h=i.getAttribute("action");s=h?Ii(h,e):null,n=i.getAttribute("method")||hc,r=Mh(i.getAttribute("enctype"))||fc,l=new FormData(i)}else if(TE(i)||kE(i)&&(i.type==="submit"||i.type==="image")){let h=i.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=i.getAttribute("formaction")||h.getAttribute("action");if(s=f?Ii(f,e):null,n=i.getAttribute("formmethod")||h.getAttribute("method")||hc,r=Mh(i.getAttribute("formenctype"))||Mh(h.getAttribute("enctype"))||fc,l=new FormData(h,i),!wE()){let{name:m,type:v,value:y}=i;if(v==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(Qc(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hc,s=null,r=fc,d=i}return l&&r==="text/plain"&&(d=l,l=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wf(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function _E(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ii(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function OE(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function ME(i,e,n){let s=await Promise.all(i.map(async r=>{let l=e.routes[r.route.id];if(l){let d=await OE(l,n);return d.links?d.links():[]}return[]}));return IE(s.flat(1).filter(AE).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function X0(i,e,n,s,r,l){let d=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,h=(f,m)=>n[m].pathname!==f.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,m)=>d(f,m)||h(f,m)):l==="data"?e.filter((f,m)=>{let v=s.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(d(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function DE(i,e,{includeHydrateFallback:n}={}){return PE(i.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function PE(i){return[...new Set(i)]}function LE(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function IE(i,e){let n=new Set;return new Set(e),i.reduce((s,r)=>{let l=JSON.stringify(LE(r));return n.has(l)||(n.add(l),s.push({key:l,link:r})),s},[])}function Yb(){let i=E.useContext(pr);return Wf(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function UE(){let i=E.useContext(Jc);return Wf(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var em=E.createContext(void 0);em.displayName="FrameworkContext";function Jb(){let i=E.useContext(em);return Wf(i,"You must render this element inside a <HydratedRouter> element"),i}function zE(i,e){let n=E.useContext(em),[s,r]=E.useState(!1),[l,d]=E.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:y}=e,x=E.useRef(null);E.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let C=_=>{_.forEach(L=>{d(L.isIntersecting)})},w=new IntersectionObserver(C,{threshold:.5});return x.current&&w.observe(x.current),()=>{w.disconnect()}}},[i]),E.useEffect(()=>{if(s){let C=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(C)}}},[s]);let S=()=>{r(!0)},k=()=>{r(!1),d(!1)};return n?i!=="intent"?[l,x,{}]:[l,x,{onFocus:mo(h,S),onBlur:mo(f,k),onMouseEnter:mo(m,S),onMouseLeave:mo(v,k),onTouchStart:mo(y,S)}]:[!1,x,{}]}function mo(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function BE({page:i,...e}){let{router:n}=Yb(),s=E.useMemo(()=>Lb(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?E.createElement(FE,{page:i,matches:s,...e}):null}function qE(i){let{manifest:e,routeModules:n}=Jb(),[s,r]=E.useState([]);return E.useEffect(()=>{let l=!1;return ME(i,e,n).then(d=>{l||r(d)}),()=>{l=!0}},[i,e,n]),s}function FE({page:i,matches:e,...n}){let s=Ns(),{manifest:r,routeModules:l}=Jb(),{basename:d}=Yb(),{loaderData:h,matches:f}=UE(),m=E.useMemo(()=>X0(i,e,f,r,s,"data"),[i,e,f,r,s]),v=E.useMemo(()=>X0(i,e,f,r,s,"assets"),[i,e,f,r,s]),y=E.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let k=new Set,C=!1;if(e.forEach(_=>{let L=r.routes[_.route.id];!L||!L.hasLoader||(!m.some(F=>F.route.id===_.route.id)&&_.route.id in h&&l[_.route.id]?.shouldRevalidate||L.hasClientLoader?C=!0:k.add(_.route.id))}),k.size===0)return[];let w=_E(i,d,"data");return C&&k.size>0&&w.searchParams.set("_routes",e.filter(_=>k.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[d,h,s,r,m,e,i,l]),x=E.useMemo(()=>DE(v,r),[v,r]),S=qE(v);return E.createElement(E.Fragment,null,y.map(k=>E.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),x.map(k=>E.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),S.map(({key:k,link:C})=>E.createElement("link",{key:k,nonce:n.nonce,...C})))}function VE(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Qb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qb&&(window.__reactRouterVersion="7.9.5")}catch{}function HE({basename:i,children:e,window:n}){let s=E.useRef();s.current==null&&(s.current=Ok({window:n,v5Compat:!0}));let r=s.current,[l,d]=E.useState({action:r.action,location:r.location}),h=E.useCallback(f=>{E.startTransition(()=>d(f))},[d]);return E.useLayoutEffect(()=>r.listen(h),[r,h]),E.createElement(xE,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:r})}var Xb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lt=E.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:l,replace:d,state:h,target:f,to:m,preventScrollReset:v,viewTransition:y,...x},S){let{basename:k}=E.useContext(ri),C=typeof m=="string"&&Xb.test(m),w,_=!1;if(typeof m=="string"&&C&&(w=m,Qb))try{let X=new URL(window.location.href),te=m.startsWith("//")?new URL(X.protocol+m):new URL(m),he=Ii(te.pathname,k);te.origin===X.origin&&he!=null?m=he+te.search+te.hash:_=!0}catch{ii(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=sE(m,{relative:r}),[F,j,M]=zE(s,x),P=JE(m,{replace:d,state:h,target:f,preventScrollReset:v,relative:r,viewTransition:y});function I(X){e&&e(X),X.defaultPrevented||P(X)}let H=E.createElement("a",{...x,...M,href:w||L,onClick:_||l?e:I,ref:VE(S,j),target:f,"data-discover":!C&&n==="render"?"true":void 0});return F&&!C?E.createElement(E.Fragment,null,H,E.createElement(BE,{page:L})):H});Lt.displayName="Link";var GE=E.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:l,to:d,viewTransition:h,children:f,...m},v){let y=Bo(d,{relative:m.relative}),x=Ns(),S=E.useContext(Jc),{navigator:k,basename:C}=E.useContext(ri),w=S!=null&&WE(y)&&h===!0,_=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,L=x.pathname,F=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(L=L.toLowerCase(),F=F?F.toLowerCase():null,_=_.toLowerCase()),F&&C&&(F=Ii(F,C)||F);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=L===_||!r&&L.startsWith(_)&&L.charAt(j)==="/",P=F!=null&&(F===_||!r&&F.startsWith(_)&&F.charAt(_.length)==="/"),I={isActive:M,isPending:P,isTransitioning:w},H=M?e:void 0,X;typeof s=="function"?X=s(I):X=[s,M?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let te=typeof l=="function"?l(I):l;return E.createElement(Lt,{...m,"aria-current":H,className:X,ref:v,style:te,to:d,viewTransition:h},typeof f=="function"?f(I):f)});GE.displayName="NavLink";var KE=E.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:l,method:d=hc,action:h,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:y,...x},S)=>{let k=$E(),C=ZE(h,{relative:m}),w=d.toLowerCase()==="get"?"get":"post",_=typeof h=="string"&&Xb.test(h),L=F=>{if(f&&f(F),F.defaultPrevented)return;F.preventDefault();let j=F.nativeEvent.submitter,M=j?.getAttribute("formmethod")||d;k(j||F.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:r,state:l,relative:m,preventScrollReset:v,viewTransition:y})};return E.createElement("form",{ref:S,method:w,action:C,onSubmit:s?f:L,...x,"data-discover":!_&&i==="render"?"true":void 0})});KE.displayName="Form";function YE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $b(i){let e=E.useContext(pr);return dt(e,YE(i)),e}function JE(i,{target:e,replace:n,state:s,preventScrollReset:r,relative:l,viewTransition:d}={}){let h=aE(),f=Ns(),m=Bo(i,{relative:l});return E.useCallback(v=>{if(NE(v,e)){v.preventDefault();let y=n!==void 0?n:_o(f)===_o(m);h(i,{replace:y,state:s,preventScrollReset:r,relative:l,viewTransition:d})}},[f,h,m,n,s,e,i,r,l,d])}var QE=0,XE=()=>`__${String(++QE)}__`;function $E(){let{router:i}=$b("useSubmit"),{basename:e}=E.useContext(ri),n=gE();return E.useCallback(async(s,r={})=>{let{action:l,method:d,encType:h,formData:f,body:m}=RE(s,e);if(r.navigate===!1){let v=r.fetcherKey||XE();await i.fetch(v,n,r.action||l,{preventScrollReset:r.preventScrollReset,formData:f,body:m,formMethod:r.method||d,formEncType:r.encType||h,flushSync:r.flushSync})}else await i.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:f,body:m,formMethod:r.method||d,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,n])}function ZE(i,{relative:e}={}){let{basename:n}=E.useContext(ri),s=E.useContext(zi);dt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),l={...Bo(i||".",{relative:e})},d=Ns();if(i==null){l.search=d.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let v=h.toString();l.search=v?`?${v}`:""}}return(!i||i===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Di([n,l.pathname])),_o(l)}function WE(i,{relative:e}={}){let n=E.useContext(Fb);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$b("useViewTransitionState"),r=Bo(i,{relative:e});if(!n.isTransitioning)return!1;let l=Ii(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Ii(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wc(r.pathname,d)!=null||wc(r.pathname,l)!=null}Pb();const Ce=i=>typeof i=="string",po=()=>{let i,e;const n=new Promise((s,r)=>{i=s,e=r});return n.resolve=i,n.reject=e,n},$0=i=>i==null?"":""+i,eN=(i,e,n)=>{i.forEach(s=>{e[s]&&(n[s]=e[s])})},tN=/###/g,Z0=i=>i&&i.indexOf("###")>-1?i.replace(tN,"."):i,W0=i=>!i||Ce(i),Eo=(i,e,n)=>{const s=Ce(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(W0(i))return{};const l=Z0(s[r]);!i[l]&&n&&(i[l]=new n),Object.prototype.hasOwnProperty.call(i,l)?i=i[l]:i={},++r}return W0(i)?{}:{obj:i,k:Z0(s[r])}},ey=(i,e,n)=>{const{obj:s,k:r}=Eo(i,e,Object);if(s!==void 0||e.length===1){s[r]=n;return}let l=e[e.length-1],d=e.slice(0,e.length-1),h=Eo(i,d,Object);for(;h.obj===void 0&&d.length;)l=`${d[d.length-1]}.${l}`,d=d.slice(0,d.length-1),h=Eo(i,d,Object),h?.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=n},nN=(i,e,n,s)=>{const{obj:r,k:l}=Eo(i,e,Object);r[l]=r[l]||[],r[l].push(n)},jc=(i,e)=>{const{obj:n,k:s}=Eo(i,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},iN=(i,e,n)=>{const s=jc(i,n);return s!==void 0?s:jc(e,n)},Zb=(i,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in i?Ce(i[s])||i[s]instanceof String||Ce(e[s])||e[s]instanceof String?n&&(i[s]=e[s]):Zb(i[s],e[s],n):i[s]=e[s]);return i},Qa=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var sN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const aN=i=>Ce(i)?i.replace(/[&<>"'\/]/g,e=>sN[e]):i;class rN{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const oN=[" ",",","?","!",";"],lN=new rN(20),cN=(i,e,n)=>{e=e||"",n=n||"";const s=oN.filter(d=>e.indexOf(d)<0&&n.indexOf(d)<0);if(s.length===0)return!0;const r=lN.getRegExp(`(${s.map(d=>d==="?"?"\\?":d).join("|")})`);let l=!r.test(i);if(!l){const d=i.indexOf(n);d>0&&!r.test(i.substring(0,d))&&(l=!0)}return l},lf=(i,e,n=".")=>{if(!i)return;if(i[e])return Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0;const s=e.split(n);let r=i;for(let l=0;l<s.length;){if(!r||typeof r!="object")return;let d,h="";for(let f=l;f<s.length;++f)if(f!==l&&(h+=n),h+=s[f],d=r[h],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&f<s.length-1)continue;l+=f-l+1;break}r=d}return r},Oo=i=>i?.replace("_","-"),uN={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,e){console?.[i]?.apply?.(console,e)}};class Rc{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||uN,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,r){return r&&!this.debug?null:(Ce(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Rc(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Rc(this.logger,e)}}var ti=new Rc;class Xc{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,l])=>{for(let d=0;d<l;d++)r(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,l])=>{for(let d=0;d<l;d++)r.apply(r,[e,...n])})}}class ty extends Xc{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,r={}){const l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,d=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;e.indexOf(".")>-1?h=e.split("."):(h=[e,n],s&&(Array.isArray(s)?h.push(...s):Ce(s)&&l?h.push(...s.split(l)):h.push(s)));const f=jc(this.data,h);return!f&&!n&&!s&&e.indexOf(".")>-1&&(e=h[0],n=h[1],s=h.slice(2).join(".")),f||!d||!Ce(s)?f:lf(this.data?.[e]?.[n],s,l)}addResource(e,n,s,r,l={silent:!1}){const d=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[e,n];s&&(h=h.concat(d?s.split(d):s)),e.indexOf(".")>-1&&(h=e.split("."),r=n,n=h[1]),this.addNamespaces(n),ey(this.data,h,r),l.silent||this.emit("added",e,n,s,r)}addResources(e,n,s,r={silent:!1}){for(const l in s)(Ce(s[l])||Array.isArray(s[l]))&&this.addResource(e,n,l,s[l],{silent:!0});r.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,r,l,d={silent:!1,skipCopy:!1}){let h=[e,n];e.indexOf(".")>-1&&(h=e.split("."),r=s,s=n,n=h[1]),this.addNamespaces(n);let f=jc(this.data,h)||{};d.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?Zb(f,s,l):f={...f,...s},ey(this.data,h,f),d.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var Wb={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,e,n,s,r){return i.forEach(l=>{e=this.processors[l]?.process(e,n,s,r)??e}),e}};const ex=Symbol("i18next/PATH_KEY");function dN(){const i=[],e=Object.create(null);let n;return e.get=(s,r)=>(n?.revoke?.(),r===ex?i:(i.push(r),n=Proxy.revocable(s,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function cf(i,e){const{[ex]:n}=i(dN());return n.join(e?.keySeparator??".")}const ny={},Dh=i=>!Ce(i)&&typeof i!="boolean"&&typeof i!="number";class _c extends Xc{constructor(e,n={}){super(),eN(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ti.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};if(e==null)return!1;const r=this.resolve(e,s);if(r?.res===void 0)return!1;const l=Dh(r.res);return!(s.returnObjects===!1&&l)}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let l=n.ns||this.options.defaultNS||[];const d=s&&e.indexOf(s)>-1,h=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!cN(e,s,r);if(d&&!h){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:Ce(l)?[l]:l};const m=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(m[0])>-1)&&(l=m.shift()),e=m.join(r)}return{key:e,namespaces:Ce(l)?[l]:l}}translate(e,n,s){let r=typeof n=="object"?{...n}:n;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=cf(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const l=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,d=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:h,namespaces:f}=this.extractFromKey(e[e.length-1],r),m=f[f.length-1];let v=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;v===void 0&&(v=":");const y=r.lng||this.language,x=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return x?l?{res:`${m}${v}${h}`,usedKey:h,exactUsedKey:h,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(r)}:`${m}${v}${h}`:l?{res:h,usedKey:h,exactUsedKey:h,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(r)}:h;const S=this.resolve(e,r);let k=S?.res;const C=S?.usedKey||h,w=S?.exactUsedKey||h,_=["[object Number]","[object Function]","[object RegExp]"],L=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,F=!this.i18nFormat||this.i18nFormat.handleAsObject,j=r.count!==void 0&&!Ce(r.count),M=_c.hasDefaultValue(r),P=j?this.pluralResolver.getSuffix(y,r.count,r):"",I=r.ordinal&&j?this.pluralResolver.getSuffix(y,r.count,{ordinal:!1}):"",H=j&&!r.ordinal&&r.count===0,X=H&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${P}`]||r[`defaultValue${I}`]||r.defaultValue;let te=k;F&&!k&&M&&(te=X);const he=Dh(te),ve=Object.prototype.toString.apply(te);if(F&&te&&he&&_.indexOf(ve)<0&&!(Ce(L)&&Array.isArray(te))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Re=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,te,{...r,ns:f}):`key '${h} (${this.language})' returned an object instead of string.`;return l?(S.res=Re,S.usedParams=this.getUsedParamsDetails(r),S):Re}if(d){const Re=Array.isArray(te),qe=Re?[]:{},Xe=Re?w:C;for(const q in te)if(Object.prototype.hasOwnProperty.call(te,q)){const ne=`${Xe}${d}${q}`;M&&!k?qe[q]=this.translate(ne,{...r,defaultValue:Dh(X)?X[q]:void 0,joinArrays:!1,ns:f}):qe[q]=this.translate(ne,{...r,joinArrays:!1,ns:f}),qe[q]===ne&&(qe[q]=te[q])}k=qe}}else if(F&&Ce(L)&&Array.isArray(k))k=k.join(L),k&&(k=this.extendTranslation(k,e,r,s));else{let Re=!1,qe=!1;!this.isValidLookup(k)&&M&&(Re=!0,k=X),this.isValidLookup(k)||(qe=!0,k=h);const q=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&qe?void 0:k,ne=M&&X!==k&&this.options.updateMissing;if(qe||Re||ne){if(this.logger.log(ne?"updateKey":"missingKey",y,m,h,ne?X:k),d){const O=this.resolve(h,{...r,keySeparator:!1});O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&je&&je[0])for(let O=0;O<je.length;O++)W.push(je[O]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(r.lng||this.language):W.push(r.lng||this.language);const Me=(O,K,ee)=>{const oe=M&&ee!==k?ee:q;this.options.missingKeyHandler?this.options.missingKeyHandler(O,m,K,oe,ne,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(O,m,K,oe,ne,r),this.emit("missingKey",O,m,K,k)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?W.forEach(O=>{const K=this.pluralResolver.getSuffixes(O,r);H&&r[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(ee=>{Me([O],h+ee,r[`defaultValue${ee}`]||X)})}):Me(W,h,X))}k=this.extendTranslation(k,e,r,S,s),qe&&k===h&&this.options.appendNamespaceToMissingKey&&(k=`${m}${v}${h}`),(qe||Re)&&this.options.parseMissingKeyHandler&&(k=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${v}${h}`:h,Re?k:void 0,r))}return l?(S.res=k,S.usedParams=this.getUsedParamsDetails(r),S):k}extendTranslation(e,n,s,r,l){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const f=Ce(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(f){const y=e.match(this.interpolator.nestingRegexp);m=y&&y.length}let v=s.replace&&!Ce(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,s.lng||this.language||r.usedLng,s),f){const y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;m<x&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>l?.[0]===y[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${n[0]}`),null):this.translate(...y,n),s)),s.interpolation&&this.interpolator.reset()}const d=s.postProcess||this.options.postProcess,h=Ce(d)?[d]:d;return e!=null&&h?.length&&s.applyPostProcessor!==!1&&(e=Wb.handle(h,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,r,l,d,h;return Ce(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(s))return;const m=this.extractFromKey(f,n),v=m.key;r=v;let y=m.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const x=n.count!==void 0&&!Ce(n.count),S=x&&!n.ordinal&&n.count===0,k=n.context!==void 0&&(Ce(n.context)||typeof n.context=="number")&&n.context!=="",C=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);y.forEach(w=>{this.isValidLookup(s)||(h=w,!ny[`${C[0]}-${w}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(ny[`${C[0]}-${w}`]=!0,this.logger.warn(`key "${r}" for languages "${C.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(_=>{if(this.isValidLookup(s))return;d=_;const L=[v];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(L,v,_,w,n);else{let j;x&&(j=this.pluralResolver.getSuffix(_,n.count,n));const M=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(n.ordinal&&j.indexOf(P)===0&&L.push(v+j.replace(P,this.options.pluralSeparator)),L.push(v+j),S&&L.push(v+M)),k){const I=`${v}${this.options.contextSeparator||"_"}${n.context}`;L.push(I),x&&(n.ordinal&&j.indexOf(P)===0&&L.push(I+j.replace(P,this.options.pluralSeparator)),L.push(I+j),S&&L.push(I+M))}}let F;for(;F=L.pop();)this.isValidLookup(s)||(l=F,s=this.getResource(_,w,F,n))}))})}),{res:s,usedKey:r,exactUsedKey:l,usedLng:d,usedNS:h}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,s,r):this.resourceStore.getResource(e,n,s,r)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Ce(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const l of n)delete r[l]}return r}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class iy{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ti.create("languageUtils")}getScriptPartFromCode(e){if(e=Oo(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Oo(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ce(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return n=r;const l=this.getLanguagePartFromCode(s);if(this.isSupportedCode(l))return n=l;n=this.options.supportedLngs.find(d=>{if(d===l)return d;if(!(d.indexOf("-")<0&&l.indexOf("-")<0)&&(d.indexOf("-")>0&&l.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===l||d.indexOf(l)===0&&l.length>1))return d})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ce(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),r=[],l=d=>{d&&(this.isSupportedCode(d)?r.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return Ce(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(e))):Ce(e)&&l(this.formatLanguageCode(e)),s.forEach(d=>{r.indexOf(d)<0&&l(this.formatLanguageCode(d))}),r}}const sy={zero:0,one:1,two:2,few:3,many:4,other:5},ay={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class hN{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ti.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=Oo(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:s,type:r});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let d;try{d=new Intl.PluralRules(s,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ay;if(!e.match(/-|_/))return ay;const f=this.languageUtils.getLanguagePartFromCode(e);d=this.getRule(f,n)}return this.pluralRulesCache[l]=d,d}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(r=>`${n}${r}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((r,l)=>sy[r]-sy[l]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const ry=(i,e,n,s=".",r=!0)=>{let l=iN(i,e,n);return!l&&r&&Ce(n)&&(l=lf(i,n,s),l===void 0&&(l=lf(e,n,s))),l},Ph=i=>i.replace(/\$/g,"$$$$");class fN{constructor(e={}){this.logger=ti.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:l,prefixEscaped:d,suffix:h,suffixEscaped:f,formatSeparator:m,unescapeSuffix:v,unescapePrefix:y,nestingPrefix:x,nestingPrefixEscaped:S,nestingSuffix:k,nestingSuffixEscaped:C,nestingOptionsSeparator:w,maxReplaces:_,alwaysFormat:L}=e.interpolation;this.escape=n!==void 0?n:aN,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=l?Qa(l):d||"{{",this.suffix=h?Qa(h):f||"}}",this.formatSeparator=m||",",this.unescapePrefix=v?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":v||"",this.nestingPrefix=x?Qa(x):S||Qa("$t("),this.nestingSuffix=k?Qa(k):C||Qa(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=_||1e3,this.alwaysFormat=L!==void 0?L:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>n?.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,s,r){let l,d,h;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=S=>{if(S.indexOf(this.formatSeparator)<0){const _=ry(n,f,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,s,{...r,...n,interpolationkey:S}):_}const k=S.split(this.formatSeparator),C=k.shift().trim(),w=k.join(this.formatSeparator).trim();return this.format(ry(n,f,C,this.options.keySeparator,this.options.ignoreJSONStructure),w,s,{...r,...n,interpolationkey:C})};this.resetRegExp();const v=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>Ph(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?Ph(this.escape(S)):Ph(S)}].forEach(S=>{for(h=0;l=S.regex.exec(e);){const k=l[1].trim();if(d=m(k),d===void 0)if(typeof v=="function"){const w=v(e,l,r);d=Ce(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,k))d="";else if(y){d=l[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),d="";else!Ce(d)&&!this.useRawValueToEscape&&(d=$0(d));const C=S.safeValue(d);if(e=e.replace(l[0],C),y?(S.regex.lastIndex+=d.length,S.regex.lastIndex-=l[0].length):S.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),e}nest(e,n,s={}){let r,l,d;const h=(f,m)=>{const v=this.nestingOptionsSeparator;if(f.indexOf(v)<0)return f;const y=f.split(new RegExp(`${v}[ ]*{`));let x=`{${y[1]}`;f=y[0],x=this.interpolate(x,d);const S=x.match(/'/g),k=x.match(/"/g);((S?.length??0)%2===0&&!k||k.length%2!==0)&&(x=x.replace(/'/g,'"'));try{d=JSON.parse(x),m&&(d={...m,...d})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,C),`${f}${v}${x}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,f};for(;r=this.nestingRegexp.exec(e);){let f=[];d={...s},d=d.replace&&!Ce(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const m=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(m!==-1&&(f=r[1].slice(m).split(this.formatSeparator).map(v=>v.trim()).filter(Boolean),r[1]=r[1].slice(0,m)),l=n(h.call(this,r[1].trim(),d),d),l&&r[0]===e&&!Ce(l))return l;Ce(l)||(l=$0(l)),l||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),l=""),f.length&&(l=f.reduce((v,y)=>this.format(v,y,s.lng,{...s,interpolationkey:r[1].trim()}),l.trim())),e=e.replace(r[0],l),this.regexp.lastIndex=0}return e}}const mN=i=>{let e=i.toLowerCase().trim();const n={};if(i.indexOf("(")>-1){const s=i.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(d=>{if(d){const[h,...f]=d.split(":"),m=f.join(":").trim().replace(/^'+|'+$/g,""),v=h.trim();n[v]||(n[v]=m),m==="false"&&(n[v]=!1),m==="true"&&(n[v]=!0),isNaN(m)||(n[v]=parseInt(m,10))}})}return{formatName:e,formatOptions:n}},oy=i=>{const e={};return(n,s,r)=>{let l=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(l={...l,[r.interpolationkey]:void 0});const d=s+JSON.stringify(l);let h=e[d];return h||(h=i(Oo(s),r),e[d]=h),h(n)}},pN=i=>(e,n,s)=>i(Oo(n),s)(e);class gN{constructor(e={}){this.logger=ti.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?oy:pN;this.formats={number:s((r,l)=>{const d=new Intl.NumberFormat(r,{...l});return h=>d.format(h)}),currency:s((r,l)=>{const d=new Intl.NumberFormat(r,{...l,style:"currency"});return h=>d.format(h)}),datetime:s((r,l)=>{const d=new Intl.DateTimeFormat(r,{...l});return h=>d.format(h)}),relativetime:s((r,l)=>{const d=new Intl.RelativeTimeFormat(r,{...l});return h=>d.format(h,l.range||"day")}),list:s((r,l)=>{const d=new Intl.ListFormat(r,{...l});return h=>d.format(h)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=oy(n)}format(e,n,s,r={}){const l=n.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(h=>h.indexOf(")")>-1)){const h=l.findIndex(f=>f.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,h)].join(this.formatSeparator)}return l.reduce((h,f)=>{const{formatName:m,formatOptions:v}=mN(f);if(this.formats[m]){let y=h;try{const x=r?.formatParams?.[r.interpolationkey]||{},S=x.locale||x.lng||r.locale||r.lng||s;y=this.formats[m](h,S,{...v,...r,...x})}catch(x){this.logger.warn(x)}return y}else this.logger.warn(`there was no format function for ${m}`);return h},e)}}const vN=(i,e)=>{i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)};class yN extends Xc{constructor(e,n,s,r={}){super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=ti.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,r.backend,r)}queueLoad(e,n,s,r){const l={},d={},h={},f={};return e.forEach(m=>{let v=!0;n.forEach(y=>{const x=`${m}|${y}`;!s.reload&&this.store.hasResourceBundle(m,y)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?d[x]===void 0&&(d[x]=!0):(this.state[x]=1,v=!1,d[x]===void 0&&(d[x]=!0),l[x]===void 0&&(l[x]=!0),f[y]===void 0&&(f[y]=!0)))}),v||(h[m]=!0)}),(Object.keys(l).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(l),pending:Object.keys(d),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(f)}}loaded(e,n,s){const r=e.split("|"),l=r[0],d=r[1];n&&this.emit("failedLoading",l,d,n),!n&&s&&this.store.addResourceBundle(l,d,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const h={};this.queue.forEach(f=>{nN(f.loaded,[l],d),vN(f,e),n&&f.errors.push(n),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(m=>{h[m]||(h[m]={});const v=f.loaded[m];v.length&&v.forEach(y=>{h[m][y]===void 0&&(h[m][y]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(f=>!f.done)}read(e,n,s,r=0,l=this.retryTimeout,d){if(!e.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:r,wait:l,callback:d});return}this.readingCalls++;const h=(m,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(m&&v&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,r+1,l*2,d)},l);return}d(m,v)},f=this.backend[s].bind(this.backend);if(f.length===2){try{const m=f(e,n);m&&typeof m.then=="function"?m.then(v=>h(null,v)).catch(h):h(null,m)}catch(m){h(m)}return}return f(e,n,h)}prepareLoading(e,n,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ce(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ce(n)&&(n=[n]);const l=this.queueLoad(e,n,s,r);if(!l.toLoad.length)return l.pending.length||r(),null;l.toLoad.forEach(d=>{this.loadOne(d)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),r=s[0],l=s[1];this.read(r,l,"read",void 0,void 0,(d,h)=>{d&&this.logger.warn(`${n}loading namespace ${l} for language ${r} failed`,d),!d&&h&&this.logger.log(`${n}loaded namespace ${l} for language ${r}`,h),this.loaded(e,d,h)})}saveMissing(e,n,s,r,l,d={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const f={...d,isUpdate:l},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(e,n,s,r,f):v=m(e,n,s,r),v&&typeof v.then=="function"?v.then(y=>h(null,y)).catch(h):h(null,v)}catch(v){h(v)}else m(e,n,s,r,h,f)}!e||!e[0]||this.store.addResource(e[0],n,s,r)}}}const ly=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let e={};if(typeof i[1]=="object"&&(e=i[1]),Ce(i[1])&&(e.defaultValue=i[1]),Ce(i[2])&&(e.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const n=i[3]||i[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),cy=i=>(Ce(i.ns)&&(i.ns=[i.ns]),Ce(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),Ce(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs?.indexOf?.("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i),rc=()=>{},bN=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(n=>{typeof i[n]=="function"&&(i[n]=i[n].bind(i))})};class Ao extends Xc{constructor(e={},n){if(super(),this.options=cy(e),this.services={},this.logger=ti,this.modules={external:[]},bN(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Ce(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=ly();this.options={...s,...this.options,...cy(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?ti.init(r(this.modules.logger),this.options):ti.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=gN;const v=new iy(this.options);this.store=new ty(this.options.resources,this.options);const y=this.services;y.logger=ti,y.resourceStore=this.store,y.languageUtils=v,y.pluralResolver=new hN(v,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(y.formatter=r(m),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new fN(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new yN(r(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(S,...k)=>{this.emit(S,...k)}),this.modules.languageDetector&&(y.languageDetector=r(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=r(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new _c(this.services,this.options),this.translator.on("*",(S,...k)=>{this.emit(S,...k)}),this.modules.external.forEach(S=>{S.init&&S.init(this)})}if(this.format=this.options.interpolation.format,n||(n=rc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...v)=>this.store[m](...v)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...v)=>(this.store[m](...v),this)});const h=po(),f=()=>{const m=(v,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(y),n(v,y)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),h}loadResources(e,n=rc){let s=n;const r=Ce(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const l=[],d=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&l.indexOf(m)<0&&l.push(m)})};r?d(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>d(f)),this.options.preload?.forEach?.(h=>d(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(h)})}else s(null)}reloadResources(e,n,s){const r=po();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=rc),this.services.backendConnector.reload(e,n,l=>{r.resolve(),s(l)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Wb.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=po();this.emit("languageChanging",e);const r=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,f)=>{f?this.isLanguageChangingTo===e&&(r(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,s.resolve((...m)=>this.t(...m)),n&&n(h,(...m)=>this.t(...m))},d=h=>{!e&&!h&&this.services.languageDetector&&(h=[]);const f=Ce(h)?h:h&&h[0],m=this.store.hasLanguageSomeTranslations(f)?f:this.services.languageUtils.getBestMatchFromCodes(Ce(h)?[h]:h);m&&(this.language||r(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,v=>{l(v,m)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),s}getFixedT(e,n,s){const r=(l,d,...h)=>{let f;typeof d!="object"?f=this.options.overloadTranslationOptionHandler([l,d].concat(h)):f={...d},f.lng=f.lng||r.lng,f.lngs=f.lngs||r.lngs,f.ns=f.ns||r.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||s||r.keyPrefix);const m=this.options.keySeparator||".";let v;return f.keyPrefix&&Array.isArray(l)?v=l.map(y=>(typeof y=="function"&&(y=cf(y,{...this.options,...d})),`${f.keyPrefix}${m}${y}`)):(typeof l=="function"&&(l=cf(l,{...this.options,...d})),v=f.keyPrefix?`${f.keyPrefix}${m}${l}`:l),this.t(v,f)};return Ce(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=s,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const d=(h,f)=>{const m=this.services.backendConnector.state[`${h}|${f}`];return m===-1||m===0||m===2};if(n.precheck){const h=n.precheck(this,d);if(h!==void 0)return h}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(s,e)&&(!r||d(l,e)))}loadNamespaces(e,n){const s=po();return this.options.ns?(Ce(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=po();Ce(e)&&(e=[e]);const r=this.options.preload||[],l=e.filter(d=>r.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return l.length?(this.options.preload=r.concat(l),this.loadResources(d=>{s.resolve(),n&&n(d)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const l=r.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new iy(ly());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Ao(e,n)}cloneInstance(e={},n=rc){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},l=new Ao(r);if((e.debug!==void 0||e.prefix!==void 0)&&(l.logger=l.logger.clone(e)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},s){const h=Object.keys(this.store.data).reduce((f,m)=>(f[m]={...this.store.data[m]},f[m]=Object.keys(f[m]).reduce((v,y)=>(v[y]={...f[m][y]},v),f[m]),f),{});l.store=new ty(h,r),l.services.resourceStore=l.store}return l.translator=new _c(l.services,r),l.translator.on("*",(h,...f)=>{l.emit(h,...f)}),l.init(r,n),l.translator.options=r,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Kt=Ao.createInstance();Kt.createInstance=Ao.createInstance;Kt.createInstance;Kt.dir;Kt.init;Kt.loadResources;Kt.reloadResources;Kt.use;Kt.changeLanguage;Kt.getFixedT;Kt.t;Kt.exists;Kt.setDefaultNamespace;Kt.hasLoadedNamespace;Kt.loadNamespaces;Kt.loadLanguages;const xN=(i,e,n,s)=>{const r=[n,{code:e,...s||{}}];if(i?.services?.logger?.forward)return i.services.logger.forward(r,"warn","react-i18next::",!0);na(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),i?.services?.logger?.warn?i.services.logger.warn(...r):console?.warn&&console.warn(...r)},uy={},tx=(i,e,n,s)=>{na(n)&&uy[n]||(na(n)&&(uy[n]=new Date),xN(i,e,n,s))},nx=(i,e)=>()=>{if(i.isInitialized)e();else{const n=()=>{setTimeout(()=>{i.off("initialized",n)},0),e()};i.on("initialized",n)}},uf=(i,e,n)=>{i.loadNamespaces(e,nx(i,n))},dy=(i,e,n,s)=>{if(na(n)&&(n=[n]),i.options.preload&&i.options.preload.indexOf(e)>-1)return uf(i,n,s);n.forEach(r=>{i.options.ns.indexOf(r)<0&&i.options.ns.push(r)}),i.loadLanguages(e,nx(i,s))},SN=(i,e,n={})=>!e.languages||!e.languages.length?(tx(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(i,{lng:n.lng,precheck:(s,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!r(s.isLanguageChangingTo,i))return!1}}),na=i=>typeof i=="string",TN=i=>typeof i=="object"&&i!==null,CN=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kN={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},EN=i=>kN[i],NN=i=>i.replace(CN,EN);let df={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:NN};const wN=(i={})=>{df={...df,...i}},jN=()=>df;let ix;const RN=i=>{ix=i},_N=()=>ix,ON={type:"3rdParty",init(i){wN(i.options.react),RN(i)}},AN=E.createContext();class MN{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Lh={exports:{}},Ih={};var hy;function DN(){if(hy)return Ih;hy=1;var i=Yc();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var n=typeof Object.is=="function"?Object.is:e,s=i.useState,r=i.useEffect,l=i.useLayoutEffect,d=i.useDebugValue;function h(y,x){var S=x(),k=s({inst:{value:S,getSnapshot:x}}),C=k[0].inst,w=k[1];return l(function(){C.value=S,C.getSnapshot=x,f(C)&&w({inst:C})},[y,S,x]),r(function(){return f(C)&&w({inst:C}),y(function(){f(C)&&w({inst:C})})},[y]),d(S),S}function f(y){var x=y.getSnapshot;y=y.value;try{var S=x();return!n(y,S)}catch{return!0}}function m(y,x){return x()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return Ih.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:v,Ih}var fy;function PN(){return fy||(fy=1,Lh.exports=DN()),Lh.exports}var sx=PN();const LN=(i,e)=>na(e)?e:TN(e)&&na(e.defaultValue)?e.defaultValue:Array.isArray(i)?i[i.length-1]:i,IN={t:LN,ready:!1},UN=()=>()=>{},ax=(i,e={})=>{const{i18n:n}=e,{i18n:s,defaultNS:r}=E.useContext(AN)||{},l=n||s||_N();l&&!l.reportNamespaces&&(l.reportNamespaces=new MN),l||tx(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=E.useMemo(()=>({...jN(),...l?.options?.react,...e}),[l,e]),{useSuspense:h,keyPrefix:f}=d,m=E.useMemo(()=>{const j=r||l?.options?.defaultNS;return na(j)?[j]:j||["translation"]},[i,r,l]);l?.reportNamespaces?.addUsedNamespaces?.(m);const v=E.useRef(0),y=E.useCallback(j=>{if(!l)return UN;const{bindI18n:M,bindI18nStore:P}=d,I=()=>{v.current+=1,j()};return M&&l.on(M,I),P&&l.store.on(P,I),()=>{M&&M.split(" ").forEach(H=>l.off(H,I)),P&&P.split(" ").forEach(H=>l.store.off(H,I))}},[l,d]),x=E.useRef(),S=E.useCallback(()=>{if(!l)return IN;const j=!!(l.isInitialized||l.initializedStoreOnce)&&m.every(te=>SN(te,l,d)),M=e.lng||l.language,P=v.current,I=x.current;if(I&&I.ready===j&&I.lng===M&&I.keyPrefix===f&&I.revision===P)return I;const X={t:l.getFixedT(M,d.nsMode==="fallback"?m:m[0],f),ready:j,lng:M,keyPrefix:f,revision:P};return x.current=X,X},[l,m,f,d,e.lng]),[k,C]=E.useState(0),{t:w,ready:_}=sx.useSyncExternalStore(y,S,S);E.useEffect(()=>{if(l&&!_&&!h){const j=()=>C(M=>M+1);e.lng?dy(l,e.lng,m,j):uf(l,m,j)}},[l,e.lng,m,_,h,k]);const L=l||{},F=E.useMemo(()=>{const j=[w,L,_];return j.t=w,j.i18n=L,j.ready=_,j},[w,L,_]);if(l&&h&&!_)throw new Promise(j=>{const M=()=>j();e.lng?dy(l,e.lng,m,M):uf(l,m,M)});return F},{slice:zN,forEach:BN}=[];function qN(i){return BN.call(zN.call(arguments,1),e=>{if(e)for(const n in e)i[n]===void 0&&(i[n]=e[n])}),i}function FN(i){return typeof i!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(i))}const my=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,VN=function(i,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let l=`${i}=${r}`;if(s.maxAge>0){const d=s.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(d)}`}if(s.domain){if(!my.test(s.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${s.domain}`}if(s.path){if(!my.test(s.path))throw new TypeError("option path is invalid");l+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(l+="; Partitioned"),l},py={create(i,e,n,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),s&&(r.domain=s),document.cookie=VN(i,e,r)},read(i){const e=`${i}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(i,e){this.create(i,"",-1,e)}};var HN={name:"cookie",lookup(i){let{lookupCookie:e}=i;if(e&&typeof document<"u")return py.read(e)||void 0},cacheUserLanguage(i,e){let{lookupCookie:n,cookieMinutes:s,cookieDomain:r,cookieOptions:l}=e;n&&typeof document<"u"&&py.create(n,i,s,r,l)}},GN={name:"querystring",lookup(i){let{lookupQuerystring:e}=i,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const l=s.substring(1).split("&");for(let d=0;d<l.length;d++){const h=l[d].indexOf("=");h>0&&l[d].substring(0,h)===e&&(n=l[d].substring(h+1))}}return n}},KN={name:"hash",lookup(i){let{lookupHash:e,lookupFromHashIndex:n}=i,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const l=r.substring(1);if(e){const d=l.split("&");for(let h=0;h<d.length;h++){const f=d[h].indexOf("=");f>0&&d[h].substring(0,f)===e&&(s=d[h].substring(f+1))}}if(s)return s;if(!s&&n>-1){const d=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?d[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return s}};let Xa=null;const gy=()=>{if(Xa!==null)return Xa;try{if(Xa=typeof window<"u"&&window.localStorage!==null,!Xa)return!1;const i="i18next.translate.boo";window.localStorage.setItem(i,"foo"),window.localStorage.removeItem(i)}catch{Xa=!1}return Xa};var YN={name:"localStorage",lookup(i){let{lookupLocalStorage:e}=i;if(e&&gy())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(i,e){let{lookupLocalStorage:n}=e;n&&gy()&&window.localStorage.setItem(n,i)}};let $a=null;const vy=()=>{if($a!==null)return $a;try{if($a=typeof window<"u"&&window.sessionStorage!==null,!$a)return!1;const i="i18next.translate.boo";window.sessionStorage.setItem(i,"foo"),window.sessionStorage.removeItem(i)}catch{$a=!1}return $a};var JN={name:"sessionStorage",lookup(i){let{lookupSessionStorage:e}=i;if(e&&vy())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(i,e){let{lookupSessionStorage:n}=e;n&&vy()&&window.sessionStorage.setItem(n,i)}},QN={name:"navigator",lookup(i){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:r}=navigator;if(n)for(let l=0;l<n.length;l++)e.push(n[l]);s&&e.push(s),r&&e.push(r)}return e.length>0?e:void 0}},XN={name:"htmlTag",lookup(i){let{htmlTag:e}=i,n;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},$N={name:"path",lookup(i){let{lookupFromPathIndex:e}=i;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof e=="number"?e:0]?.replace("/",""):void 0}},ZN={name:"subdomain",lookup(i){let{lookupFromSubdomainIndex:e}=i;const n=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[n]}};let rx=!1;try{document.cookie,rx=!0}catch{}const ox=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];rx||ox.splice(1,1);const WN=()=>({order:ox,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:i=>i});class lx{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=qN(n,this.options||{},WN()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(HN),this.addDetector(GN),this.addDetector(YN),this.addDetector(JN),this.addDetector(QN),this.addDetector(XN),this.addDetector($N),this.addDetector(ZN),this.addDetector(KN)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(s=>{if(this.detectors[s]){let r=this.detectors[s].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(n=n.concat(r))}}),n=n.filter(s=>s!=null&&!FN(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}lx.type="languageDetector";const ew={translation:{nav:{home:"",about:"",aboutMaster:"",onlineCourses:"",offlineCourses:"",shop:"",appointment:"",reviews:"",faq:"",contact:"",member:""},common:{learnMore:"",bookNow:"",register:"",buyNow:"",submit:"",cancel:"",save:"",edit:"",delete:"",confirm:"",loading:"...",success:"",error:"",phone:"",email:"",address:"",name:"",age:"",gender:"",male:"",female:""},home:{title:"",subtitle:"",slogan:"    ",heroTitle:"",heroSubtitle:"    ",whyChooseUs:"",whyChooseUsDesc:""},about:{title:"",subtitle:"",description:"..."},aboutMaster:{title:"",subtitle:"",description:"..."},courses:{online:"",offline:"",basic:"",intermediate:"",advanced:"",duration:"",lessons:"",students:"",certificate:"",price:""},shop:{title:"",subtitle:"",category:"",allProducts:"",addToCart:"",buyNow:"",stock:"",outOfStock:"",rating:"",reviews:""},appointment:{title:"",subtitle:"",selectDate:"",selectTime:"",patientInfo:"",symptoms:"",bookAppointment:""},reviews:{title:"",subtitle:"",featuredReviews:"",caseStudies:"",allReviews:"",rating:"",treatmentType:"",treatmentDuration:""},member:{title:"",profile:"",courses:"",orders:"",appointments:"",points:"",benefits:"",membershipLevel:"",pointsBalance:"",joinDate:""},faq:{title:"",subtitle:"",aboutTreatment:"",aboutCourses:"",aboutAppointment:"",aboutPayment:""},contact:{title:"",subtitle:"",contactMethods:"",sendMessage:"",officeInfo:"",workingHours:"",location:""}}},tw={translation:{nav:{home:"Home",about:"About Yaoxianjiu",aboutMaster:"About Master Liu",onlineCourses:"Online Courses",offlineCourses:"Offline Courses",shop:"Shop",appointment:"Appointment",reviews:"Reviews",faq:"FAQ",contact:"Contact",member:"Member Center"},common:{learnMore:"Learn More",bookNow:"Book Now",register:"Register Now",buyNow:"Buy Now",submit:"Submit",cancel:"Cancel",save:"Save",edit:"Edit",delete:"Delete",confirm:"Confirm",loading:"Loading...",success:"Success",error:"Error",phone:"Phone",email:"Email",address:"Address",name:"Name",age:"Age",gender:"Gender",male:"Male",female:"Female"},home:{title:"Liu Yibiao Yaoxianjiu",subtitle:"Zhuhai Intangible Cultural Heritage",slogan:"12th Generation Inheritor  Inheriting Millennium Wisdom  Protecting Healthy Life",heroTitle:"Liu Yibiao Yaoxianjiu",heroSubtitle:"12th Generation Inheritor  Inheriting Millennium Wisdom  Protecting Healthy Life",whyChooseUs:"Why Choose Us",whyChooseUsDesc:"Master Liu Yibiao, as the 12th generation inheritor of Zhuhai Intangible Cultural Heritage Yaoxianjiu, is dedicated to inheriting and promoting this ancient TCM therapy"},about:{title:"About Yaoxianjiu",subtitle:"Learn about this ancient and magical TCM therapy",description:"Yaoxianjiu is a unique external TCM therapy that combines the advantages of Chinese medicine and moxibustion..."},aboutMaster:{title:"About Master Liu Yibiao",subtitle:"12th Generation Inheritor of Zhuhai Intangible Cultural Heritage Yaoxianjiu",description:"Master Liu Yibiao is the 12th generation inheritor of Zhuhai Intangible Cultural Heritage Yaoxianjiu..."},courses:{online:"Online Courses",offline:"Offline Courses",basic:"Basic Course",intermediate:"Intermediate Course",advanced:"Advanced Course",duration:"Duration",lessons:"Lessons",students:"Students",certificate:"Certificate",price:"Price"},shop:{title:"Yaoxian Shop",subtitle:"Selected high-quality medicinal threads and professional tools",category:"Category",allProducts:"All Products",addToCart:"Add to Cart",buyNow:"Buy Now",stock:"Stock",outOfStock:"Out of Stock",rating:"Rating",reviews:"Reviews"},appointment:{title:"Book Appointment",subtitle:"Personal consultation with Master Liu Yibiao",selectDate:"Select Date",selectTime:"Select Time",patientInfo:"Patient Information",symptoms:"Symptoms Description",bookAppointment:"Book Appointment"},reviews:{title:"User Reviews & Success Cases",subtitle:"Real patient feedback and successful treatment cases",featuredReviews:"Featured Patient Testimonials",caseStudies:"Successful Treatment Cases",allReviews:"All User Reviews",rating:"Rating",treatmentType:"Treatment Type",treatmentDuration:"Treatment Duration"},member:{title:"Member Center",profile:"Profile",courses:"My Courses",orders:"Order History",appointments:"Appointment History",points:"Points History",benefits:"Member Benefits",membershipLevel:"Membership Level",pointsBalance:"Points Balance",joinDate:"Join Date"},faq:{title:"Frequently Asked Questions",subtitle:"Here are the most frequently asked questions and detailed answers",aboutTreatment:"About Yaoxianjiu",aboutCourses:"About Courses",aboutAppointment:"About Appointment",aboutPayment:"About Payment"},contact:{title:"Contact Us",subtitle:"We are always ready to provide help and support",contactMethods:"Contact Methods",sendMessage:"Send Message",officeInfo:"Clinic Information",workingHours:"Working Hours",location:"Location Map"}}};Kt.use(lx).use(ON).init({resources:{"zh-TW":ew,"en-US":tw},fallbackLng:"zh-TW",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const nw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),yy=i=>{const e=iw(i);return e.charAt(0).toUpperCase()+e.slice(1)},cx=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),sw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var aw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rw=E.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:d,...h},f)=>E.createElement("svg",{ref:f,...aw,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:cx("lucide",r),...!l&&!sw(h)&&{"aria-hidden":"true"},...h},[...d.map(([m,v])=>E.createElement(m,v)),...Array.isArray(l)?l:[l]]));const xe=(i,e)=>{const n=E.forwardRef(({className:s,...r},l)=>E.createElement(rw,{ref:l,iconNode:e,className:cx(`lucide-${nw(yy(i))}`,`lucide-${i}`,s),...r}));return n.displayName=yy(i),n};const ow=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hf=xe("arrow-right",ow);const lw=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ia=xe("award",lw);const cw=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ln=xe("book-open",cw);const uw=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],dw=xe("building",uw);const hw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sa=xe("calendar",hw);const fw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mw=xe("chevron-down",fw);const pw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gw=xe("chevron-left",pw);const vw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yw=xe("chevron-right",vw);const bw=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xw=xe("chevron-up",bw);const Sw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tw=xe("circle-alert",Sw);const Cw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dn=xe("circle-check-big",Cw);const kw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ew=xe("circle-question-mark",kw);const Nw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pi=xe("clock",Nw);const ww=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jw=xe("copy",ww);const Rw=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],tm=xe("credit-card",Rw);const _w=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ow=xe("crown",_w);const Aw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mw=xe("download",Aw);const Dw=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Pw=xe("facebook",Dw);const Lw=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Iw=xe("funnel",Lw);const Uw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ux=xe("globe",Uw);const zw=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],$c=xe("heart",zw);const Bw=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],qw=xe("linkedin",Bw);const Fw=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ea=xe("mail",Fw);const Vw=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ta=xe("map-pin",Vw);const Hw=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Gw=xe("maximize-2",Hw);const Kw=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Yw=xe("menu",Kw);const Jw=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Oc=xe("message-circle",Jw);const Qw=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Xw=xe("minimize-2",Qw);const $w=[["path",{d:"M5 12h14",key:"1ays0h"}]],Zw=xe("minus",$w);const Ww=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],by=xe("package",Ww);const ej=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Mi=xe("phone",ej);const tj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nj=xe("play",tj);const ij=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sj=xe("plus",ij);const aj=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],rj=xe("quote",aj);const oj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xy=xe("save",oj);const lj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cj=xe("search",lj);const uj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ff=xe("send",uj);const dj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],dx=xe("share-2",dj);const hj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],nm=xe("shield",hj);const fj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],mf=xe("shopping-cart",fj);const mj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pj=xe("square-pen",mj);const gj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ca=xe("star",gj);const vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yj=xe("target",vj);const bj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pf=xe("trending-up",bj);const xj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Sj=xe("triangle-alert",xj);const Tj=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],hx=xe("truck",Tj);const Cj=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],kj=xe("twitter",Cj);const Ej=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ac=xe("user",Ej);const Nj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cs=xe("users",Nj);const wj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],im=xe("x",wj);const jj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Rj=xe("zap",jj);function Sy(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function sm(...i){return e=>{let n=!1;const s=i.map(r=>{const l=Sy(r,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let r=0;r<s.length;r++){const l=s[r];typeof l=="function"?l():Sy(i[r],null)}}}}function Mc(...i){return E.useCallback(sm(...i),i)}var _j=Symbol.for("react.lazy"),Dc=Qf[" use ".trim().toString()];function Oj(i){return typeof i=="object"&&i!==null&&"then"in i}function fx(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===_j&&"_payload"in i&&Oj(i._payload)}function mx(i){const e=Mj(i),n=E.forwardRef((s,r)=>{let{children:l,...d}=s;fx(l)&&typeof Dc=="function"&&(l=Dc(l._payload));const h=E.Children.toArray(l),f=h.find(Pj);if(f){const m=f.props.children,v=h.map(y=>y===f?E.Children.count(m)>1?E.Children.only(null):E.isValidElement(m)?m.props.children:null:y);return c.jsx(e,{...d,ref:r,children:E.isValidElement(m)?E.cloneElement(m,void 0,v):null})}return c.jsx(e,{...d,ref:r,children:l})});return n.displayName=`${i}.Slot`,n}var Aj=mx("Slot");function Mj(i){const e=E.forwardRef((n,s)=>{let{children:r,...l}=n;if(fx(r)&&typeof Dc=="function"&&(r=Dc(r._payload)),E.isValidElement(r)){const d=Ij(r),h=Lj(l,r.props);return r.type!==E.Fragment&&(h.ref=s?sm(s,d):d),E.cloneElement(r,h)}return E.Children.count(r)>1?E.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var Dj=Symbol("radix.slottable");function Pj(i){return E.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===Dj}function Lj(i,e){const n={...e};for(const s in e){const r=i[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...h)=>{const f=l(...h);return r(...h),f}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...i,...n}}function Ij(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?i.props.ref:i.props.ref||i.ref)}function px(i){var e,n,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(n=px(i[e]))&&(s&&(s+=" "),s+=n)}else for(n in i)i[n]&&(s&&(s+=" "),s+=n);return s}function gx(){for(var i,e,n=0,s="",r=arguments.length;n<r;n++)(i=arguments[n])&&(e=px(i))&&(s&&(s+=" "),s+=e);return s}const Ty=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,Cy=gx,am=(i,e)=>n=>{var s;if(e?.variants==null)return Cy(i,n?.class,n?.className);const{variants:r,defaultVariants:l}=e,d=Object.keys(r).map(m=>{const v=n?.[m],y=l?.[m];if(v===null)return null;const x=Ty(v)||Ty(y);return r[m][x]}),h=n&&Object.entries(n).reduce((m,v)=>{let[y,x]=v;return x===void 0||(m[y]=x),m},{}),f=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((m,v)=>{let{class:y,className:x,...S}=v;return Object.entries(S).every(k=>{let[C,w]=k;return Array.isArray(w)?w.includes({...l,...h}[C]):{...l,...h}[C]===w})?[...m,y,x]:m},[]);return Cy(i,d,f,n?.class,n?.className)},rm="-",Uj=i=>{const e=Bj(i),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=i;return{getClassGroupId:d=>{const h=d.split(rm);return h[0]===""&&h.length!==1&&h.shift(),vx(h,e)||zj(d)},getConflictingClassGroupIds:(d,h)=>{const f=n[d]||[];return h&&s[d]?[...f,...s[d]]:f}}},vx=(i,e)=>{if(i.length===0)return e.classGroupId;const n=i[0],s=e.nextPart.get(n),r=s?vx(i.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const l=i.join(rm);return e.validators.find(({validator:d})=>d(l))?.classGroupId},ky=/^\[(.+)\]$/,zj=i=>{if(ky.test(i)){const e=ky.exec(i)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Bj=i=>{const{theme:e,classGroups:n}=i,s={nextPart:new Map,validators:[]};for(const r in n)gf(n[r],s,r,e);return s},gf=(i,e,n,s)=>{i.forEach(r=>{if(typeof r=="string"){const l=r===""?e:Ey(e,r);l.classGroupId=n;return}if(typeof r=="function"){if(qj(r)){gf(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([l,d])=>{gf(d,Ey(e,l),n,s)})})},Ey=(i,e)=>{let n=i;return e.split(rm).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},qj=i=>i.isThemeGetter,Fj=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(l,d)=>{n.set(l,d),e++,e>i&&(e=0,s=n,n=new Map)};return{get(l){let d=n.get(l);if(d!==void 0)return d;if((d=s.get(l))!==void 0)return r(l,d),d},set(l,d){n.has(l)?n.set(l,d):r(l,d)}}},vf="!",yf=":",Vj=yf.length,Hj=i=>{const{prefix:e,experimentalParseClassName:n}=i;let s=r=>{const l=[];let d=0,h=0,f=0,m;for(let k=0;k<r.length;k++){let C=r[k];if(d===0&&h===0){if(C===yf){l.push(r.slice(f,k)),f=k+Vj;continue}if(C==="/"){m=k;continue}}C==="["?d++:C==="]"?d--:C==="("?h++:C===")"&&h--}const v=l.length===0?r:r.substring(f),y=Gj(v),x=y!==v,S=m&&m>f?m-f:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:S}};if(e){const r=e+yf,l=s;s=d=>d.startsWith(r)?l(d.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=l=>n({className:l,parseClassName:r})}return s},Gj=i=>i.endsWith(vf)?i.substring(0,i.length-1):i.startsWith(vf)?i.substring(1):i,Kj=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let l=[];return s.forEach(d=>{d[0]==="["||e[d]?(r.push(...l.sort(),d),l=[]):l.push(d)}),r.push(...l.sort()),r}},Yj=i=>({cache:Fj(i.cacheSize),parseClassName:Hj(i),sortModifiers:Kj(i),...Uj(i)}),Jj=/\s+/,Qj=(i,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:l}=e,d=[],h=i.trim().split(Jj);let f="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:y,modifiers:x,hasImportantModifier:S,baseClassName:k,maybePostfixModifierPosition:C}=n(v);if(y){f=v+(f.length>0?" "+f:f);continue}let w=!!C,_=s(w?k.substring(0,C):k);if(!_){if(!w){f=v+(f.length>0?" "+f:f);continue}if(_=s(k),!_){f=v+(f.length>0?" "+f:f);continue}w=!1}const L=l(x).join(":"),F=S?L+vf:L,j=F+_;if(d.includes(j))continue;d.push(j);const M=r(_,w);for(let P=0;P<M.length;++P){const I=M[P];d.push(F+I)}f=v+(f.length>0?" "+f:f)}return f};function Xj(){let i=0,e,n,s="";for(;i<arguments.length;)(e=arguments[i++])&&(n=yx(e))&&(s&&(s+=" "),s+=n);return s}const yx=i=>{if(typeof i=="string")return i;let e,n="";for(let s=0;s<i.length;s++)i[s]&&(e=yx(i[s]))&&(n&&(n+=" "),n+=e);return n};function $j(i,...e){let n,s,r,l=d;function d(f){const m=e.reduce((v,y)=>y(v),i());return n=Yj(m),s=n.cache.get,r=n.cache.set,l=h,h(f)}function h(f){const m=s(f);if(m)return m;const v=Qj(f,n);return r(f,v),v}return function(){return l(Xj.apply(null,arguments))}}const jt=i=>{const e=n=>n[i]||[];return e.isThemeGetter=!0,e},bx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,xx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Zj=/^\d+\/\d+$/,Wj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,nR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Za=i=>Zj.test(i),_e=i=>!!i&&!Number.isNaN(Number(i)),ms=i=>!!i&&Number.isInteger(Number(i)),Uh=i=>i.endsWith("%")&&_e(i.slice(0,-1)),Ni=i=>Wj.test(i),sR=()=>!0,aR=i=>eR.test(i)&&!tR.test(i),Sx=()=>!1,rR=i=>nR.test(i),oR=i=>iR.test(i),lR=i=>!me(i)&&!pe(i),cR=i=>gr(i,kx,Sx),me=i=>bx.test(i),Js=i=>gr(i,Ex,aR),zh=i=>gr(i,mR,_e),Ny=i=>gr(i,Tx,Sx),uR=i=>gr(i,Cx,oR),oc=i=>gr(i,Nx,rR),pe=i=>xx.test(i),go=i=>vr(i,Ex),dR=i=>vr(i,pR),wy=i=>vr(i,Tx),hR=i=>vr(i,kx),fR=i=>vr(i,Cx),lc=i=>vr(i,Nx,!0),gr=(i,e,n)=>{const s=bx.exec(i);return s?s[1]?e(s[1]):n(s[2]):!1},vr=(i,e,n=!1)=>{const s=xx.exec(i);return s?s[1]?e(s[1]):n:!1},Tx=i=>i==="position"||i==="percentage",Cx=i=>i==="image"||i==="url",kx=i=>i==="length"||i==="size"||i==="bg-size",Ex=i=>i==="length",mR=i=>i==="number",pR=i=>i==="family-name",Nx=i=>i==="shadow",gR=()=>{const i=jt("color"),e=jt("font"),n=jt("text"),s=jt("font-weight"),r=jt("tracking"),l=jt("leading"),d=jt("breakpoint"),h=jt("container"),f=jt("spacing"),m=jt("radius"),v=jt("shadow"),y=jt("inset-shadow"),x=jt("text-shadow"),S=jt("drop-shadow"),k=jt("blur"),C=jt("perspective"),w=jt("aspect"),_=jt("ease"),L=jt("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...j(),pe,me],P=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],H=()=>[pe,me,f],X=()=>[Za,"full","auto",...H()],te=()=>[ms,"none","subgrid",pe,me],he=()=>["auto",{span:["full",ms,pe,me]},ms,pe,me],ve=()=>[ms,"auto",pe,me],Re=()=>["auto","min","max","fr",pe,me],qe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Xe=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...H()],ne=()=>[Za,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],W=()=>[i,pe,me],je=()=>[...j(),wy,Ny,{position:[pe,me]}],Me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",hR,cR,{size:[pe,me]}],K=()=>[Uh,go,Js],ee=()=>["","none","full",m,pe,me],oe=()=>["",_e,go,Js],Se=()=>["solid","dashed","dotted","double"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[_e,Uh,wy,Ny],At=()=>["","none",k,pe,me],at=()=>["none",_e,pe,me],Kn=()=>["none",_e,pe,me],qi=()=>[_e,pe,me],Fi=()=>[Za,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ni],breakpoint:[Ni],color:[sR],container:[Ni],"drop-shadow":[Ni],ease:["in","out","in-out"],font:[lR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ni],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ni],shadow:[Ni],spacing:["px",_e],text:[Ni],"text-shadow":[Ni],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Za,me,pe,w]}],container:["container"],columns:[{columns:[_e,me,pe,h]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:X()}],"inset-x":[{"inset-x":X()}],"inset-y":[{"inset-y":X()}],start:[{start:X()}],end:[{end:X()}],top:[{top:X()}],right:[{right:X()}],bottom:[{bottom:X()}],left:[{left:X()}],visibility:["visible","invisible","collapse"],z:[{z:[ms,"auto",pe,me]}],basis:[{basis:[Za,"full","auto",h,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_e,Za,"auto","initial","none",me]}],grow:[{grow:["",_e,pe,me]}],shrink:[{shrink:["",_e,pe,me]}],order:[{order:[ms,"first","last","none",pe,me]}],"grid-cols":[{"grid-cols":te()}],"col-start-end":[{col:he()}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":te()}],"row-start-end":[{row:he()}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Re()}],"auto-rows":[{"auto-rows":Re()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...qe(),"normal"]}],"justify-items":[{"justify-items":[...Xe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Xe()]}],"align-content":[{content:["normal",...qe()]}],"align-items":[{items:[...Xe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Xe(),{baseline:["","last"]}]}],"place-content":[{"place-content":qe()}],"place-items":[{"place-items":[...Xe(),"baseline"]}],"place-self":[{"place-self":["auto",...Xe()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[h,"screen",...ne()]}],"min-w":[{"min-w":[h,"screen","none",...ne()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[d]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",n,go,Js]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,pe,zh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uh,me]}],"font-family":[{font:[dR,me,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,pe,me]}],"line-clamp":[{"line-clamp":[_e,"none",pe,zh]}],leading:[{leading:[l,...H()]}],"list-image":[{"list-image":["none",pe,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pe,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:[_e,"from-font","auto",pe,Js]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[_e,"auto",pe,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:je()}],"bg-repeat":[{bg:Me()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ms,pe,me],radial:["",pe,me],conic:[ms,pe,me]},fR,uR]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Se(),"hidden","none"]}],"divide-style":[{divide:[...Se(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...Se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_e,pe,me]}],"outline-w":[{outline:["",_e,go,Js]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",v,lc,oc]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",y,lc,oc]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[_e,Js]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",x,lc,oc]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[_e,pe,me]}],"mix-blend":[{"mix-blend":[...ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_e]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[pe,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[_e]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:je()}],"mask-repeat":[{mask:Me()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pe,me]}],filter:[{filter:["","none",pe,me]}],blur:[{blur:At()}],brightness:[{brightness:[_e,pe,me]}],contrast:[{contrast:[_e,pe,me]}],"drop-shadow":[{"drop-shadow":["","none",S,lc,oc]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",_e,pe,me]}],"hue-rotate":[{"hue-rotate":[_e,pe,me]}],invert:[{invert:["",_e,pe,me]}],saturate:[{saturate:[_e,pe,me]}],sepia:[{sepia:["",_e,pe,me]}],"backdrop-filter":[{"backdrop-filter":["","none",pe,me]}],"backdrop-blur":[{"backdrop-blur":At()}],"backdrop-brightness":[{"backdrop-brightness":[_e,pe,me]}],"backdrop-contrast":[{"backdrop-contrast":[_e,pe,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_e,pe,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_e,pe,me]}],"backdrop-invert":[{"backdrop-invert":["",_e,pe,me]}],"backdrop-opacity":[{"backdrop-opacity":[_e,pe,me]}],"backdrop-saturate":[{"backdrop-saturate":[_e,pe,me]}],"backdrop-sepia":[{"backdrop-sepia":["",_e,pe,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pe,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_e,"initial",pe,me]}],ease:[{ease:["linear","initial",_,pe,me]}],delay:[{delay:[_e,pe,me]}],animate:[{animate:["none",L,pe,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,pe,me]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:Kn()}],"scale-x":[{"scale-x":Kn()}],"scale-y":[{"scale-y":Kn()}],"scale-z":[{"scale-z":Kn()}],"scale-3d":["scale-3d"],skew:[{skew:qi()}],"skew-x":[{"skew-x":qi()}],"skew-y":[{"skew-y":qi()}],transform:[{transform:[pe,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fi()}],"translate-x":[{"translate-x":Fi()}],"translate-y":[{"translate-y":Fi()}],"translate-z":[{"translate-z":Fi()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe,me]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[_e,go,Js,zh]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vR=$j(gR);function Ht(...i){return vR(gx(i))}const yR=am("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ke=E.forwardRef(({className:i,variant:e,size:n,asChild:s=!1,...r},l)=>{const d=s?Aj:"button";return c.jsx(d,{className:Ht(yR({variant:e,size:n,className:i})),ref:l,...r})});Ke.displayName="Button";const bR=({className:i=""})=>{const{i18n:e}=ax(),n=[{code:"zh-TW",name:"",flag:""},{code:"en-US",name:"English",flag:""}],s=n.find(l=>l.code===e.language)||n[0],r=l=>{e.changeLanguage(l)};return c.jsxs("div",{className:`relative group ${i}`,children:[c.jsxs(Ke,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 text-white hover:text-green-200",children:[c.jsx(ux,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:s.name}),c.jsx("span",{className:"sm:hidden",children:s.flag})]}),c.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white rounded-md shadow-lg border py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 min-w-[120px]",children:n.map(l=>c.jsxs("button",{onClick:()=>r(l.code),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 ${e.language===l.code?"bg-green-50 text-green-800":"text-gray-700"}`,children:[c.jsx("span",{children:l.flag}),c.jsx("span",{children:l.name})]},l.code))})]})},xR=()=>{const[i,e]=E.useState(!1),n=Ns(),{t:s}=ax(),r=[{name:s("nav.home"),href:"/"},{name:s("nav.about"),href:"/about"},{name:s("nav.aboutMaster"),href:"/about-master"},{name:s("nav.onlineCourses"),href:"/online-courses"},{name:s("nav.offlineCourses"),href:"/offline-courses"},{name:s("nav.shop"),href:"/shop"},{name:s("nav.appointment"),href:"/appointment"},{name:s("nav.reviews"),href:"/reviews"},{name:s("nav.faq"),href:"/faq"},{name:s("nav.contact"),href:"/contact"},{name:s("nav.member"),href:"/member"},{name:s("nav.live"),href:"/live"}];return c.jsxs("header",{className:"bg-white shadow-lg sticky top-0 z-50",children:[c.jsx("div",{className:"bg-green-800 text-white py-2",children:c.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Mi,{className:"h-4 w-4"}),c.jsx("span",{children:"+86 756 1234567"})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ea,{className:"h-4 w-4"}),c.jsx("span",{children:"info@yaoxianjiu.com"})]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"text-sm",children:"  "}),c.jsx(bR,{})]})]})}),c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs(Lt,{to:"/",className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-amber-600 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white font-bold text-lg",children:""})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-green-800",children:""}),c.jsx("p",{className:"text-sm text-gray-600",children:"  "})]})]}),c.jsx("nav",{className:"hidden lg:flex space-x-1",children:r.map(l=>c.jsx(Lt,{to:l.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${n.pathname===l.href?"bg-green-100 text-green-800":"text-gray-700 hover:bg-green-50 hover:text-green-800"}`,children:l.name},l.name))}),c.jsx(Ke,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>e(!i),children:i?c.jsx(im,{className:"h-6 w-6"}):c.jsx(Yw,{className:"h-6 w-6"})})]}),i&&c.jsx("div",{className:"lg:hidden pb-4",children:c.jsx("nav",{className:"flex flex-col space-y-1",children:r.map(l=>c.jsx(Lt,{to:l.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${n.pathname===l.href?"bg-green-100 text-green-800":"text-gray-700 hover:bg-green-50 hover:text-green-800"}`,onClick:()=>e(!1),children:l.name},l.name))})})]})]})},SR=()=>c.jsx("footer",{className:"bg-green-900 text-white",children:c.jsxs("div",{className:"container mx-auto px-4 py-12",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),c.jsx("p",{className:"text-green-100 mb-4",children:""}),c.jsxs("div",{className:"flex items-center space-x-2 text-green-100",children:[c.jsx(Pi,{className:"h-4 w-4"}),c.jsx("span",{children:" 9:00-18:00"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(Lt,{to:"/about",className:"text-green-100 hover:text-white transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Lt,{to:"/about-master",className:"text-green-100 hover:text-white transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Lt,{to:"/online-courses",className:"text-green-100 hover:text-white transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Lt,{to:"/offline-courses",className:"text-green-100 hover:text-white transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Lt,{to:"/shop",className:"text-green-100 hover:text-white transition-colors",children:""})}),c.jsx("li",{children:c.jsx(Lt,{to:"/appointment",className:"text-green-100 hover:text-white transition-colors",children:""})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),c.jsxs("ul",{className:"space-y-2 text-green-100",children:[c.jsx("li",{children:""}),c.jsx("li",{children:""}),c.jsx("li",{children:""}),c.jsx("li",{children:""}),c.jsx("li",{children:""}),c.jsx("li",{children:""})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Mi,{className:"h-4 w-4 text-green-300"}),c.jsx("span",{className:"text-green-100",children:"+86 756 1234567"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ea,{className:"h-4 w-4 text-green-300"}),c.jsx("span",{className:"text-green-100",children:"info@yaoxianjiu.com"})]}),c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(ta,{className:"h-4 w-4 text-green-300 mt-1"}),c.jsxs("span",{className:"text-green-100",children:["",c.jsx("br",{}),"123"]})]})]})]})]}),c.jsx("div",{className:"border-t border-green-800 mt-8 pt-8 text-center",children:c.jsx("p",{className:"text-green-100",children:" 2024 .  |  | "})})]})}),ae=E.forwardRef(({className:i,...e},n)=>c.jsx("div",{ref:n,className:Ht("rounded-lg border bg-card text-card-foreground shadow-sm",i),...e}));ae.displayName="Card";const ue=E.forwardRef(({className:i,...e},n)=>c.jsx("div",{ref:n,className:Ht("flex flex-col space-y-1.5 p-6",i),...e}));ue.displayName="CardHeader";const de=E.forwardRef(({className:i,...e},n)=>c.jsx("h3",{ref:n,className:Ht("text-2xl font-semibold leading-none tracking-tight",i),...e}));de.displayName="CardTitle";const We=E.forwardRef(({className:i,...e},n)=>c.jsx("p",{ref:n,className:Ht("text-sm text-muted-foreground",i),...e}));We.displayName="CardDescription";const re=E.forwardRef(({className:i,...e},n)=>c.jsx("div",{ref:n,className:Ht("p-6 pt-0",i),...e}));re.displayName="CardContent";const TR=E.forwardRef(({className:i,...e},n)=>c.jsx("div",{ref:n,className:Ht("flex items-center p-6 pt-0",i),...e}));TR.displayName="CardFooter";const yt=E.forwardRef(({className:i,type:e,...n},s)=>c.jsx("input",{type:e,className:Ht("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:s,...n}));yt.displayName="Input";const CR=am("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vt({className:i,variant:e,...n}){return c.jsx("div",{className:Ht(CR({variant:e}),i),...n})}function kR(i,e=[]){let n=[];function s(l,d){const h=E.createContext(d);h.displayName=l+"Context";const f=n.length;n=[...n,d];const m=y=>{const{scope:x,children:S,...k}=y,C=x?.[i]?.[f]||h,w=E.useMemo(()=>k,Object.values(k));return c.jsx(C.Provider,{value:w,children:S})};m.displayName=l+"Provider";function v(y,x){const S=x?.[i]?.[f]||h,k=E.useContext(S);if(k)return k;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${l}\``)}return[m,v]}const r=()=>{const l=n.map(d=>E.createContext(d));return function(h){const f=h?.[i]||l;return E.useMemo(()=>({[`__scope${i}`]:{...h,[i]:f}}),[h,f])}};return r.scopeName=i,[s,ER(r,...e)]}function ER(...i){const e=i[0];if(i.length===1)return e;const n=()=>{const s=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(l){const d=s.reduce((h,{useScope:f,scopeName:m})=>{const y=f(l)[`__scope${m}`];return{...h,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}function wx(i){const e=E.useRef(i);return E.useEffect(()=>{e.current=i}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}var aa=globalThis?.document?E.useLayoutEffect:()=>{},NR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zc=NR.reduce((i,e)=>{const n=mx(`Primitive.${e}`),s=E.forwardRef((r,l)=>{const{asChild:d,...h}=r,f=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(f,{...h,ref:l})});return s.displayName=`Primitive.${e}`,{...i,[e]:s}},{});function wR(){return sx.useSyncExternalStore(jR,()=>!0,()=>!1)}function jR(){return()=>{}}var om="Avatar",[RR]=kR(om),[_R,jx]=RR(om),Rx=E.forwardRef((i,e)=>{const{__scopeAvatar:n,...s}=i,[r,l]=E.useState("idle");return c.jsx(_R,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:l,children:c.jsx(Zc.span,{...s,ref:e})})});Rx.displayName=om;var _x="AvatarImage",Ox=E.forwardRef((i,e)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:r=()=>{},...l}=i,d=jx(_x,n),h=OR(s,l),f=wx(m=>{r(m),d.onImageLoadingStatusChange(m)});return aa(()=>{h!=="idle"&&f(h)},[h,f]),h==="loaded"?c.jsx(Zc.img,{...l,ref:e,src:s}):null});Ox.displayName=_x;var Ax="AvatarFallback",Mx=E.forwardRef((i,e)=>{const{__scopeAvatar:n,delayMs:s,...r}=i,l=jx(Ax,n),[d,h]=E.useState(s===void 0);return E.useEffect(()=>{if(s!==void 0){const f=window.setTimeout(()=>h(!0),s);return()=>window.clearTimeout(f)}},[s]),d&&l.imageLoadingStatus!=="loaded"?c.jsx(Zc.span,{...r,ref:e}):null});Mx.displayName=Ax;function jy(i,e){return i?e?(i.src!==e&&(i.src=e),i.complete&&i.naturalWidth>0?"loaded":"loading"):"error":"idle"}function OR(i,{referrerPolicy:e,crossOrigin:n}){const s=wR(),r=E.useRef(null),l=s?(r.current||(r.current=new window.Image),r.current):null,[d,h]=E.useState(()=>jy(l,i));return aa(()=>{h(jy(l,i))},[l,i]),aa(()=>{const f=y=>()=>{h(y)};if(!l)return;const m=f("loaded"),v=f("error");return l.addEventListener("load",m),l.addEventListener("error",v),e&&(l.referrerPolicy=e),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",m),l.removeEventListener("error",v)}},[l,n,e]),d}var Dx=Rx,Px=Ox,Lx=Mx;const sr=E.forwardRef(({className:i,...e},n)=>c.jsx(Dx,{ref:n,className:Ht("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i),...e}));sr.displayName=Dx.displayName;const Pc=E.forwardRef(({className:i,...e},n)=>c.jsx(Px,{ref:n,className:Ht("aspect-square h-full w-full",i),...e}));Pc.displayName=Px.displayName;const Ws=E.forwardRef(({className:i,...e},n)=>c.jsx(Lx,{ref:n,className:Ht("flex h-full w-full items-center justify-center rounded-full bg-muted",i),...e}));Ws.displayName=Lx.displayName;const AR=({isOpen:i,onClose:e,onMinimize:n,isMinimized:s})=>{const[r,l]=E.useState([{id:1,sender:"admin",senderName:"",message:"",timestamp:new Date(Date.now()-6e4),type:"text"}]),[d,h]=E.useState(""),[f,m]=E.useState(!1),[v,y]=E.useState({name:"",email:"",isGuest:!0}),[x,S]=E.useState(!0),k=E.useRef(null),C=["","","","",""],w=()=>{k.current?.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{w()},[r]);const _=()=>{if(!d.trim())return;const P={id:r.length+1,sender:"user",senderName:v.name||"",message:d,timestamp:new Date,type:"text"};l(I=>[...I,P]),h(""),m(!0),setTimeout(()=>{const I={id:r.length+2,sender:"admin",senderName:"",message:L(d),timestamp:new Date,type:"text"};l(H=>[...H,I]),m(!1)},1500)},L=P=>{const I=P.toLowerCase();return I.includes("")||I.includes("")?"12":I.includes("")||I.includes("")?" 9:00-18:00":I.includes("")||I.includes("")?"":I.includes("")||I.includes("")?"200300":"+86 756 1234567"},F=P=>{h(P)},j=()=>{if(v.name&&v.email){S(!1);const P={id:r.length+1,sender:"admin",senderName:"",message:`${v.name}`,timestamp:new Date,type:"text"};l(I=>[...I,P])}},M=P=>new Date(P).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"});return i?c.jsxs("div",{className:`fixed ${s?"bottom-4 right-4 w-80 h-16":"bottom-4 right-4 w-96 h-[600px]"} bg-white rounded-lg shadow-2xl border z-50 transition-all duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-green-600 text-white rounded-t-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs(sr,{className:"h-8 w-8",children:[c.jsx(Pc,{src:"/images/customer-service.jpg"}),c.jsx(Ws,{children:""})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:""}),c.jsx("div",{className:"text-xs text-green-100",children:""})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ke,{size:"sm",variant:"ghost",onClick:n,className:"text-white hover:bg-green-700 p-1",children:s?c.jsx(Gw,{className:"h-4 w-4"}):c.jsx(Xw,{className:"h-4 w-4"})}),c.jsx(Ke,{size:"sm",variant:"ghost",onClick:e,className:"text-white hover:bg-green-700 p-1",children:c.jsx(im,{className:"h-4 w-4"})})]})]}),!s&&c.jsxs(c.Fragment,{children:[x&&c.jsxs("div",{className:"p-4 border-b bg-blue-50",children:[c.jsx("div",{className:"text-sm font-medium mb-3",children:""}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(yt,{placeholder:"",value:v.name,onChange:P=>y(I=>({...I,name:P.target.value})),size:"sm"}),c.jsx(yt,{placeholder:"",type:"email",value:v.email,onChange:P=>y(I=>({...I,email:P.target.value})),size:"sm"}),c.jsx(Ke,{onClick:j,size:"sm",className:"w-full",children:""})]})]}),c.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",style:{height:x?"300px":"400px"},children:[r.map(P=>c.jsx("div",{className:`flex ${P.sender==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`flex items-start space-x-2 max-w-[80%] ${P.sender==="user"?"flex-row-reverse space-x-reverse":""}`,children:[c.jsx(sr,{className:"h-6 w-6",children:P.sender==="user"?c.jsx(Ws,{className:"bg-blue-500 text-white text-xs",children:v.name?v.name.charAt(0):"U"}):c.jsx(Ws,{className:"bg-green-500 text-white text-xs",children:""})}),c.jsxs("div",{children:[c.jsx("div",{className:`p-3 rounded-lg ${P.sender==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:c.jsx("div",{className:"text-sm",children:P.message})}),c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M(P.timestamp)})]})]})},P.id)),f&&c.jsx("div",{className:"flex justify-start",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(sr,{className:"h-6 w-6",children:c.jsx(Ws,{className:"bg-green-500 text-white text-xs",children:""})}),c.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),c.jsx("div",{ref:k})]}),!x&&c.jsxs("div",{className:"px-4 py-2 border-t",children:[c.jsx("div",{className:"text-xs text-gray-500 mb-2",children:""}),c.jsx("div",{className:"flex flex-wrap gap-1",children:C.map((P,I)=>c.jsx(Ke,{size:"sm",variant:"outline",onClick:()=>F(P),className:"text-xs h-6",children:P},I))})]}),!x&&c.jsx("div",{className:"p-4 border-t",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(yt,{placeholder:"...",value:d,onChange:P=>h(P.target.value),onKeyPress:P=>P.key==="Enter"&&_(),className:"flex-1"}),c.jsx(Ke,{onClick:_,size:"sm",children:c.jsx(ff,{className:"h-4 w-4"})})]})})]})]}):null},MR=()=>{const[i,e]=E.useState(!1),[n,s]=E.useState(!1),[r,l]=E.useState(!1);E.useEffect(()=>{const m=setTimeout(()=>{i||l(!0)},1e4);return()=>clearTimeout(m)},[i]);const d=()=>{e(!0),s(!1),l(!1)},h=()=>{e(!1),s(!1)},f=()=>{s(!n)};return c.jsxs(c.Fragment,{children:[!i&&c.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[c.jsxs(Ke,{onClick:d,className:"bg-green-600 hover:bg-green-700 rounded-full w-14 h-14 shadow-lg relative",children:[c.jsx(Oc,{className:"h-6 w-6"}),r&&c.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),r&&c.jsxs("div",{className:"absolute bottom-16 right-0 bg-white rounded-lg shadow-lg p-3 max-w-xs",children:[c.jsx("div",{className:"text-sm font-medium",children:""}),c.jsx("div",{className:"text-xs text-gray-600",children:""})]})]}),c.jsx(AR,{isOpen:i,onClose:h,onMinimize:f,isMinimized:n})]})},DR=({url:i,title:e,description:n,className:s=""})=>{const r=i||window.location.href,l=e||" - ",d=n||"12",h={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(r)}&text=${encodeURIComponent(l)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(r)}`,wechat:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(r)}`,email:`mailto:?subject=${encodeURIComponent(l)}&body=${encodeURIComponent(d+`

`+r)}`},f=v=>{if(v==="copy"){navigator.clipboard.writeText(r).then(()=>{alert("")});return}if(v==="wechat"){window.open("","_blank","width=300,height=300").document.write(`
        <html>
          <head><title></title></head>
          <body style="text-align: center; padding: 20px;">
            <h3></h3>
            <img src="${h.wechat}" alt="" />
            <p></p>
          </body>
        </html>
      `);return}window.open(h[v],"_blank","width=600,height=400")},m=[{platform:"facebook",icon:Pw,label:"Facebook",color:"bg-blue-600 hover:bg-blue-700"},{platform:"twitter",icon:kj,label:"Twitter",color:"bg-sky-500 hover:bg-sky-600"},{platform:"linkedin",icon:qw,label:"LinkedIn",color:"bg-blue-700 hover:bg-blue-800"},{platform:"wechat",icon:Oc,label:"",color:"bg-green-500 hover:bg-green-600"},{platform:"email",icon:ea,label:"",color:"bg-gray-600 hover:bg-gray-700"},{platform:"copy",icon:jw,label:"",color:"bg-gray-500 hover:bg-gray-600"}];return c.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[c.jsx(dx,{className:"h-4 w-4 text-gray-600"}),c.jsx("span",{className:"text-sm text-gray-600 mr-2",children:""}),m.map(v=>{const y=v.icon;return c.jsx(Ke,{size:"sm",onClick:()=>f(v.platform),className:`${v.color} text-white p-2 h-8 w-8`,title:`${v.label}`,children:c.jsx(y,{className:"h-3 w-3"})},v.platform)})]})},PR=({url:i,title:e,description:n})=>{const[s,r]=Zn.useState(!1);return c.jsx("div",{className:"fixed left-4 top-1/2 transform -translate-y-1/2 z-40",children:c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx(Ke,{onClick:()=>r(!s),className:"bg-blue-600 hover:bg-blue-700 rounded-full w-12 h-12 shadow-lg",children:c.jsx(dx,{className:"h-5 w-5"})}),s&&c.jsx("div",{className:"flex flex-col space-y-2 animate-in slide-in-from-left duration-300",children:c.jsx(DR,{url:i,title:e,description:n,className:"flex-col space-x-0 space-y-2"})})]})})},LR=()=>{const i=[{icon:$c,title:"",description:""},{icon:ia,title:"",description:""},{icon:Cs,title:"",description:"40002"},{icon:Ln,title:"",description:""}],e=[{title:"",description:"",icon:Ln,link:"/online-courses",color:"bg-blue-500"},{title:"",description:"",icon:Cs,link:"/offline-courses",color:"bg-green-500"},{title:"",description:"",icon:mf,link:"/shop",color:"bg-amber-500"},{title:"",description:"",icon:sa,link:"/appointment",color:"bg-red-500"}],n=[{name:"",condition:"",content:"",rating:5},{name:"",condition:"",content:"",rating:5},{name:"",condition:"",content:"",rating:5}];return c.jsxs("div",{className:"min-h-screen",children:[c.jsx("section",{className:"relative bg-gradient-to-r from-green-800 to-green-600 text-white py-20",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[c.jsxs("div",{children:[c.jsx(vt,{className:"mb-4 bg-amber-500 text-white",children:""}),c.jsx("h1",{className:"text-4xl lg:text-6xl font-bold mb-6",children:""}),c.jsx("p",{className:"text-xl mb-8 text-green-100",children:"    "}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx(Ke,{asChild:!0,size:"lg",className:"bg-amber-500 hover:bg-amber-600",children:c.jsxs(Lt,{to:"/appointment",children:["",c.jsx(hf,{className:"ml-2 h-4 w-4"})]})}),c.jsx(Ke,{asChild:!0,variant:"outline",size:"lg",className:"border-white text-white hover:bg-white hover:text-green-800",children:c.jsx(Lt,{to:"/about",children:""})})]})]}),c.jsx("div",{className:"relative",children:c.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg shadow-2xl flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center mb-4 mx-auto",children:c.jsx("span",{className:"text-4xl font-bold text-green-800",children:""})}),c.jsx("p",{className:"text-white font-semibold",children:""}),c.jsx("p",{className:"text-amber-100",children:""})]})})})]})})}),c.jsx("section",{className:"py-16 bg-white",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:""}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:i.map((s,r)=>c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(s.icon,{className:"h-8 w-8 text-green-600"})}),c.jsx(de,{className:"text-lg",children:s.title})]}),c.jsx(re,{children:c.jsx(We,{children:s.description})})]},r))})]})}),c.jsx("section",{className:"py-16 bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:""}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((s,r)=>c.jsxs(ae,{className:"hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[c.jsxs(ue,{children:[c.jsx("div",{className:`w-12 h-12 ${s.color} rounded-lg flex items-center justify-center mb-4`,children:c.jsx(s.icon,{className:"h-6 w-6 text-white"})}),c.jsx(de,{className:"text-lg",children:s.title}),c.jsx(We,{children:s.description})]}),c.jsx(re,{children:c.jsx(Ke,{asChild:!0,variant:"outline",className:"w-full",children:c.jsxs(Lt,{to:s.link,children:["",c.jsx(hf,{className:"ml-2 h-4 w-4"})]})})})]},r))})]})}),c.jsx("section",{className:"py-16 bg-white",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:""}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((s,r)=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(ue,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(de,{className:"text-lg",children:s.name}),c.jsx(We,{children:s.condition})]}),c.jsx("div",{className:"flex",children:[...Array(s.rating)].map((l,d)=>c.jsx(ca,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},d))})]})}),c.jsx(re,{children:c.jsxs("p",{className:"text-gray-600 italic",children:['"',s.content,'"']})})]},r))})]})}),c.jsx("section",{className:"py-16 bg-green-800 text-white",children:c.jsxs("div",{className:"container mx-auto px-4 text-center",children:[c.jsx("h2",{className:"text-3xl font-bold mb-4",children:""}),c.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-2xl mx-auto",children:""}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx(Ke,{asChild:!0,size:"lg",className:"bg-amber-500 hover:bg-amber-600",children:c.jsxs(Lt,{to:"/appointment",children:["",c.jsx(sa,{className:"ml-2 h-4 w-4"})]})}),c.jsx(Ke,{asChild:!0,variant:"outline",size:"lg",className:"border-white text-white hover:bg-white hover:text-green-800",children:c.jsxs(Lt,{to:"/online-courses",children:["",c.jsx(Ln,{className:"ml-2 h-4 w-4"})]})})]})]})})]})},IR=()=>{const i=[{icon:$c,title:"",description:""},{icon:Rj,title:"",description:""},{icon:nm,title:"",description:""},{icon:yj,title:"",description:""}],e=["","","","","","","","","","","",""],n=[{step:1,title:"",description:""},{step:2,title:"",description:""},{step:3,title:"",description:""},{step:4,title:"",description:""}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-green-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-16",children:c.jsxs(ae,{className:"mb-8",children:[c.jsx(ue,{children:c.jsx(de,{className:"text-2xl text-green-800",children:""})}),c.jsxs(re,{className:"prose max-w-none",children:[c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:" "}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"  "}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:"2011 "})]})]})}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-xl text-green-800",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:""})]}),c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:"30cm3"})]}),c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:""})]})]})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-xl text-green-800",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:""})]}),c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:""})]}),c.jsxs("li",{className:"flex items-start space-x-2",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsx("span",{children:""})]})]})})]})]})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((s,r)=>c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(s.icon,{className:"h-8 w-8 text-green-600"})}),c.jsx(de,{className:"text-lg",children:s.title})]}),c.jsx(re,{children:c.jsx(We,{children:s.description})})]},r))})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-xl text-green-800",children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map((s,r)=>c.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg",children:[c.jsx(Dn,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-gray-700",children:s})]},r))})})]})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((s,r)=>c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx("div",{className:"w-12 h-12 bg-green-600 text-white rounded-full flex items-center justify-center mx-auto mb-4 text-lg font-bold",children:s.step}),c.jsx(de,{className:"text-lg",children:s.title})]}),c.jsx(re,{children:c.jsx(We,{children:s.description})})]},r))})]}),c.jsx("section",{children:c.jsxs(ae,{className:"border-amber-200 bg-amber-50",children:[c.jsx(ue,{children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Sj,{className:"h-6 w-6 text-amber-600"}),c.jsx(de,{className:"text-xl text-amber-800",children:""})]})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-2 text-amber-700",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]})})]})})},UR=()=>{const i=[{year:"1990",title:"",description:"22543"},{year:"1994",title:"",description:""},{year:"2008",title:"",description:"--"},{year:"2011",title:"",description:""},{year:"2012",title:"",description:""},{year:"2019",title:"",description:""}],e=[{icon:Cs,number:"2+",label:"",description:"20192"},{icon:pf,number:"4000+",label:"",description:"20154000"},{icon:Ln,number:"100+",label:"",description:""},{icon:ia,number:"43",label:"",description:"43"}],n=[{title:"",description:"",icon:pf},{title:"",description:"",icon:ca},{title:"",description:"",icon:Ln}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-green-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-16",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[c.jsx("div",{children:c.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-green-600 to-amber-600 rounded-lg shadow-2xl flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center mb-4 mx-auto",children:c.jsx("span",{className:"text-4xl font-bold text-green-800",children:""})}),c.jsx("p",{className:"text-white font-semibold text-xl",children:""}),c.jsx("p",{className:"text-amber-100",children:""})]})})}),c.jsx("div",{children:c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-2xl text-green-800",children:""})}),c.jsxs(re,{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 leading-relaxed",children:" 1990225 43"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:"1994  "})]})]})})]})}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((s,r)=>c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(s.icon,{className:"h-8 w-8 text-green-600"})}),c.jsx(de,{className:"text-3xl font-bold text-green-800",children:s.number}),c.jsx(We,{className:"text-lg font-semibold",children:s.label})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600 text-sm",children:s.description})})]},r))})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"space-y-8",children:i.map((s,r)=>c.jsxs("div",{className:"flex items-start space-x-6",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-16 h-16 bg-green-600 text-white rounded-full flex items-center justify-center font-bold",children:s.year})}),c.jsxs(ae,{className:"flex-1",children:[c.jsx(ue,{children:c.jsx(de,{className:"text-xl text-green-800",children:s.title})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-700",children:s.description})})]})]},r))})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((s,r)=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(s.icon,{className:"h-6 w-6 text-amber-600"})}),c.jsx(de,{className:"text-lg",children:s.title})]}),c.jsx(re,{children:c.jsx(We,{children:s.description})})]},r))})]}),c.jsx("section",{className:"mb-16",children:c.jsxs(ae,{className:"bg-green-50 border-green-200",children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-2xl text-green-800 flex items-center",children:[c.jsx($c,{className:"h-6 w-6 mr-2"}),""]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 leading-relaxed",children:" "}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:" "})]})]})}),c.jsx("section",{className:"text-center",children:c.jsxs(ae,{className:"bg-gradient-to-r from-green-600 to-green-800 text-white",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-2xl",children:""}),c.jsx(We,{className:"text-green-100",children:""})]}),c.jsx(re,{children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx(Ke,{asChild:!0,size:"lg",className:"bg-amber-500 hover:bg-amber-600",children:c.jsxs(Lt,{to:"/appointment",children:["",c.jsx(sa,{className:"ml-2 h-4 w-4"})]})}),c.jsx(Ke,{asChild:!0,variant:"outline",size:"lg",className:"border-white text-white hover:bg-white hover:text-green-800",children:c.jsxs(Lt,{to:"/online-courses",children:["",c.jsx(hf,{className:"ml-2 h-4 w-4"})]})})]})})]})})]})})};var zR="Label",Ix=E.forwardRef((i,e)=>c.jsx(Zc.label,{...i,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(i.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Ix.displayName=zR;var Ux=Ix;const BR=am("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ge=E.forwardRef(({className:i,...e},n)=>c.jsx(Ux,{ref:n,className:Ht(BR(),i),...e}));Ge.displayName=Ux.displayName;const dr=E.forwardRef(({className:i,...e},n)=>c.jsx("textarea",{className:Ht("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:n,...e}));dr.displayName="Textarea";const qR=()=>{const i=[{id:1,title:"",description:"",duration:"8",lessons:12,students:156,rating:4.9,price:899,level:"",features:["","","","",""]},{id:2,title:"",description:"",duration:"16",lessons:24,students:89,rating:4.8,price:1599,level:"",features:["","","","",""]},{id:3,title:"",description:"",duration:"32",lessons:48,students:34,rating:5,price:2999,level:"",features:["","","","",""]}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-blue-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-16",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Ln,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(nj,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"4K"})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Pi,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Mw,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]})]})}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:i.map(e=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx(vt,{variant:e.level===""?"default":e.level===""?"secondary":"destructive",children:e.level}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ca,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),c.jsx("span",{className:"text-sm font-medium",children:e.rating})]})]}),c.jsx(de,{className:"text-xl mb-2",children:e.title}),c.jsx(We,{children:e.description})]}),c.jsxs(re,{children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 text-center",children:[c.jsxs("div",{children:[c.jsx(Pi,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsx("p",{className:"text-sm text-gray-600",children:e.duration})]}),c.jsxs("div",{children:[c.jsx(Ln,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.lessons,""]})]}),c.jsxs("div",{children:[c.jsx(Cs,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.students,""]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"font-semibold mb-3",children:""}),c.jsx("ul",{className:"space-y-2",children:e.features.map((n,s)=>c.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[c.jsx(Dn,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{children:n})]},s))})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",e.price]}),c.jsx("span",{className:"text-sm text-gray-500",children:""})]}),c.jsxs(Ke,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[c.jsx(tm,{className:"h-4 w-4 mr-2"}),""]})]})]})]},e.id))})]}),c.jsx("section",{className:"mb-16",children:c.jsxs(ae,{className:"max-w-2xl mx-auto",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-2xl text-center",children:""}),c.jsx(We,{className:"text-center",children:"24"})]}),c.jsx(re,{children:c.jsxs("form",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"name",children:" *"}),c.jsx(yt,{id:"name",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"phone",children:" *"}),c.jsx(yt,{id:"phone",placeholder:"",required:!0})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"email",children:" *"}),c.jsx(yt,{id:"email",type:"email",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"course",children:" *"}),c.jsxs("select",{id:"course",className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"basic",children:" - 899"}),c.jsx("option",{value:"advanced",children:" - 1599"}),c.jsx("option",{value:"instructor",children:" - 2999"})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"experience",children:""}),c.jsxs("select",{id:"experience",className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"none",children:""}),c.jsx("option",{value:"basic",children:""}),c.jsx("option",{value:"intermediate",children:""}),c.jsx("option",{value:"advanced",children:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"message",children:""}),c.jsx(dr,{id:"message",placeholder:"",rows:4})]}),c.jsx(Ke,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:""})]})})]})}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"7"})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]})]})]})]})})},FR=()=>{const i=[{id:1,title:"",description:"",duration:"3",lessons:18,students:12,rating:4.9,price:3999,level:"",location:"123",schedule:["","",""],features:["","12","","","",""]},{id:2,title:"",description:"",duration:"5",lessons:30,students:8,rating:5,price:6999,level:"",location:"123",schedule:["","","","",""],features:["","8","","","",""]},{id:3,title:"",description:"",duration:"7",lessons:42,students:6,rating:5,price:12999,level:"",location:"123",schedule:["","","","","","",""],features:["","VIP6","","","",""]}],e=[{course:"",date:"2024715-17",status:"",remaining:5},{course:"",date:"202485-9",status:"",remaining:3},{course:"",date:"2024910-16",status:"",remaining:2}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-green-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-16",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Ac,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Cs,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(Ln,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(ia,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]})]})}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:i.map(n=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx(vt,{variant:n.level===""?"default":n.level===""?"secondary":"destructive",children:n.level}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ca,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),c.jsx("span",{className:"text-sm font-medium",children:n.rating})]})]}),c.jsx(de,{className:"text-xl mb-2",children:n.title}),c.jsx(We,{children:n.description})]}),c.jsxs(re,{children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 text-center",children:[c.jsxs("div",{children:[c.jsx(Pi,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsx("p",{className:"text-sm text-gray-600",children:n.duration})]}),c.jsxs("div",{children:[c.jsx(Ln,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[n.lessons,""]})]}),c.jsxs("div",{children:[c.jsx(Cs,{className:"h-5 w-5 text-gray-400 mx-auto mb-1"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["",n.students,""]})]})]}),c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(ta,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:n.location})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"font-semibold mb-3",children:""}),c.jsx("ul",{className:"space-y-1",children:n.schedule.map((s,r)=>c.jsxs("li",{className:"text-sm text-gray-600",children:[" ",s]},r))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"font-semibold mb-3",children:""}),c.jsx("ul",{className:"space-y-2",children:n.features.map((s,r)=>c.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[c.jsx(Dn,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{children:s})]},r))})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",n.price]}),c.jsx("span",{className:"text-sm text-gray-500",children:""})]}),c.jsxs(Ke,{className:"w-full bg-green-600 hover:bg-green-700",children:[c.jsx(tm,{className:"h-4 w-4 mr-2"}),""]})]})]})]},n.id))})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map((n,s)=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-lg",children:n.course}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(sa,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:n.date})]})]}),c.jsx(re,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(vt,{variant:n.status===""?"default":"secondary",children:n.status}),c.jsxs("span",{className:"text-sm text-gray-600",children:["",n.remaining,""]})]})})]},s))})]}),c.jsx("section",{className:"mb-16",children:c.jsxs(ae,{className:"max-w-2xl mx-auto",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-2xl text-center",children:""}),c.jsx(We,{className:"text-center",children:"24"})]}),c.jsx(re,{children:c.jsxs("form",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"name",children:" *"}),c.jsx(yt,{id:"name",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"phone",children:" *"}),c.jsx(yt,{id:"phone",placeholder:"",required:!0})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"email",children:" *"}),c.jsx(yt,{id:"email",type:"email",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"course",children:" *"}),c.jsxs("select",{id:"course",className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"basic",children:" - 3999"}),c.jsx("option",{value:"advanced",children:" - 6999"}),c.jsx("option",{value:"instructor",children:" - 12999"})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"experience",children:""}),c.jsxs("select",{id:"experience",className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"none",children:""}),c.jsx("option",{value:"basic",children:""}),c.jsx("option",{value:"intermediate",children:""}),c.jsx("option",{value:"advanced",children:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"preferred_date",children:""}),c.jsxs("select",{id:"preferred_date",className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"july",children:"2024715-17"}),c.jsx("option",{value:"august",children:"202485-9"}),c.jsx("option",{value:"september",children:"2024910-16"}),c.jsx("option",{value:"other",children:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"message",children:""}),c.jsx(dr,{id:"message",placeholder:"",rows:4})]}),c.jsx(Ke,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:""})]})})]})}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]})]})]})]})})},VR=()=>{const[i,e]=E.useState([]),[n,s]=E.useState("all"),[r,l]=E.useState(""),d=[{id:1,name:"1",description:"1030cm",price:88,originalPrice:108,stock:100,category:"",image:"/images/yaoxian-1.jpg",rating:4.8,reviews:156,features:["","","",""],specifications:{:"1.2mm",:"30cm",:"10/",:"3"}},{id:2,name:"2",description:"",price:98,originalPrice:118,stock:150,category:"",image:"/images/yaoxian-2.jpg",rating:4.9,reviews:203,features:["","","",""],specifications:{:"1.5mm",:"30cm",:"10/",:"3"}},{id:3,name:"3",description:"",price:108,originalPrice:128,stock:80,category:"",image:"/images/yaoxian-3.jpg",rating:4.7,reviews:89,features:["","","",""],specifications:{:"2.0mm",:"30cm",:"10/",:"3"}},{id:4,name:"",description:"",price:288,originalPrice:358,stock:50,category:"",image:"/images/tools-set.jpg",rating:4.9,reviews:67,features:["","","",""],specifications:{:"",:"",:"",:"1"}},{id:5,name:"",description:"225",price:68,originalPrice:88,stock:200,category:"",image:"/images/handbook.jpg",rating:5,reviews:312,features:["","","",""],specifications:{:"368",:"16",:"",:""}},{id:6,name:"",description:"",price:128,originalPrice:158,stock:75,category:"",image:"/images/acupoint-chart.jpg",rating:4.8,reviews:94,features:["","","",""],specifications:{:"A3",:"",:"",:""}},{id:7,name:"",description:"100",price:188,originalPrice:228,stock:30,category:"",image:"/images/materials.jpg",rating:4.6,reviews:45,features:["DIY","","",""],specifications:{:"500g",:"",:"100",:""}},{id:8,name:"",description:"",price:168,originalPrice:208,stock:120,category:"",image:"/images/starter-kit.jpg",rating:4.9,reviews:178,features:["","","",""],specifications:{:"1-35",:"",:"",:""}}],h=[{id:"all",name:"",count:d.length},{id:"",name:"",count:d.filter(S=>S.category==="").length},{id:"",name:"",count:d.filter(S=>S.category==="").length},{id:"",name:"",count:d.filter(S=>S.category==="").length},{id:"",name:"",count:d.filter(S=>S.category==="").length},{id:"",name:"",count:d.filter(S=>S.category==="").length}],f=d.filter(S=>{const k=n==="all"||S.category===n,C=S.name.toLowerCase().includes(r.toLowerCase())||S.description.toLowerCase().includes(r.toLowerCase());return k&&C}),m=S=>{e(k=>k.find(w=>w.id===S.id)?k.map(w=>w.id===S.id?{...w,quantity:w.quantity+1}:w):[...k,{...S,quantity:1}])},v=(S,k)=>{e(k===0?C=>C.filter(w=>w.id!==S):C=>C.map(w=>w.id===S?{...w,quantity:k}:w))},y=()=>i.reduce((S,k)=>S+k.price*k.quantity,0),x=()=>i.reduce((S,k)=>S+k.quantity,0);return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-amber-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-12",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(ia,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(hx,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"48"})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(nm,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"7"})})]}),c.jsxs(ae,{className:"text-center",children:[c.jsxs(ue,{children:[c.jsx(by,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),c.jsx(de,{className:"text-lg",children:""})]}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsxs(ae,{className:"mb-6",children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-lg flex items-center",children:[c.jsx(cj,{className:"h-5 w-5 mr-2"}),""]})}),c.jsx(re,{children:c.jsx(yt,{placeholder:"...",value:r,onChange:S=>l(S.target.value)})})]}),c.jsxs(ae,{className:"mb-6",children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-lg flex items-center",children:[c.jsx(Iw,{className:"h-5 w-5 mr-2"}),""]})}),c.jsx(re,{children:c.jsx("div",{className:"space-y-2",children:h.map(S=>c.jsx("button",{onClick:()=>s(S.id),className:`w-full text-left p-2 rounded-md transition-colors ${n===S.id?"bg-amber-100 text-amber-800":"hover:bg-gray-100"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:S.name}),c.jsxs("span",{className:"text-sm text-gray-500",children:["(",S.count,")"]})]})},S.id))})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-lg flex items-center",children:[c.jsx(mf,{className:"h-5 w-5 mr-2"})," (",x(),")"]})}),c.jsx(re,{children:i.length===0?c.jsx("p",{className:"text-gray-500 text-center",children:""}):c.jsxs("div",{className:"space-y-3",children:[i.map(S=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:S.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["",S.price]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("button",{onClick:()=>v(S.id,S.quantity-1),className:"p-1 hover:bg-gray-100 rounded",children:c.jsx(Zw,{className:"h-3 w-3"})}),c.jsx("span",{className:"text-sm w-8 text-center",children:S.quantity}),c.jsx("button",{onClick:()=>v(S.id,S.quantity+1),className:"p-1 hover:bg-gray-100 rounded",children:c.jsx(sj,{className:"h-3 w-3"})})]})]},S.id)),c.jsxs("div",{className:"border-t pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center font-bold",children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"text-amber-600",children:["",y().toFixed(2)]})]}),c.jsx(Ke,{className:"w-full mt-3 bg-amber-600 hover:bg-amber-700",children:""})]})]})})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map(S=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(ue,{className:"p-0",children:c.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-amber-100 to-amber-200 rounded-t-lg flex items-center justify-center",children:c.jsx(by,{className:"h-16 w-16 text-amber-600"})})}),c.jsxs(re,{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx(vt,{variant:"outline",children:S.category}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ca,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),c.jsx("span",{className:"text-sm",children:S.rating}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",S.reviews,")"]})]})]}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:S.name}),c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:S.description}),c.jsx("div",{className:"mb-4",children:c.jsx("div",{className:"flex flex-wrap gap-1",children:S.features.slice(0,2).map((k,C)=>c.jsx(vt,{variant:"secondary",className:"text-xs",children:k},C))})}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:["",S.price]}),S.originalPrice>S.price&&c.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["",S.originalPrice]})]}),c.jsxs("span",{className:"text-sm text-gray-500",children:["",S.stock]})]}),c.jsxs(Ke,{onClick:()=>m(S),className:"w-full bg-amber-600 hover:bg-amber-700",disabled:S.stock===0,children:[c.jsx(mf,{className:"h-4 w-4 mr-2"}),S.stock===0?"":""]})]})]},S.id))})})]}),c.jsxs("section",{className:"mt-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-2 text-gray-600",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" 48"}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-2 text-gray-600",children:[c.jsx("li",{children:" 7"}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-2 text-gray-600",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsxs("ul",{className:"space-y-2 text-gray-600",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]})]})]})]})})},HR=()=>{const[i,e]=E.useState(""),[n,s]=E.useState(""),[r,l]=E.useState({name:"",phone:"",email:"",age:"",gender:"",symptoms:"",medicalHistory:"",urgency:"normal"}),d=[{date:"2024-07-15",day:"",available:!0},{date:"2024-07-16",day:"",available:!0},{date:"2024-07-17",day:"",available:!1},{date:"2024-07-18",day:"",available:!0},{date:"2024-07-19",day:"",available:!0},{date:"2024-07-22",day:"",available:!0},{date:"2024-07-23",day:"",available:!0},{date:"2024-07-24",day:"",available:!0},{date:"2024-07-25",day:"",available:!1},{date:"2024-07-26",day:"",available:!0}],h=[{time:"09:00",available:!0},{time:"09:30",available:!0},{time:"10:00",available:!1},{time:"10:30",available:!0},{time:"11:00",available:!0},{time:"11:30",available:!0},{time:"14:00",available:!0},{time:"14:30",available:!1},{time:"15:00",available:!0},{time:"15:30",available:!0},{time:"16:00",available:!0},{time:"16:30",available:!0},{time:"17:00",available:!0}],f=[{title:"",description:"",duration:"60",price:"300",features:["","",""]},{title:"",description:"",duration:"45",price:"200",features:["","",""]},{title:"",description:"",duration:"30",price:"150",features:["","",""]}],m=(y,x)=>{l(S=>({...S,[y]:x}))},v=y=>{y.preventDefault(),console.log("",{...r,date:i,time:n}),alert("24")};return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-red-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.map((y,x)=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx(de,{className:"text-xl",children:y.title}),c.jsx(vt,{variant:"outline",children:y.price})]}),c.jsx(We,{children:y.description})]}),c.jsxs(re,{children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(Pi,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:y.duration})]}),c.jsx("ul",{className:"space-y-2",children:y.features.map((S,k)=>c.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[c.jsx(Dn,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{children:S})]},k))})]})]},x))})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsxs(ae,{className:"mb-6",children:[c.jsx(ue,{children:c.jsxs(de,{className:"flex items-center",children:[c.jsx(sa,{className:"h-5 w-5 mr-2"}),""]})}),c.jsx(re,{children:c.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(y=>c.jsxs("button",{onClick:()=>y.available&&e(y.date),disabled:!y.available,className:`p-3 rounded-md text-sm transition-colors ${i===y.date?"bg-red-600 text-white":y.available?"bg-gray-100 hover:bg-gray-200":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[c.jsxs("div",{className:"font-medium",children:[new Date(y.date).getDate(),""]}),c.jsx("div",{className:"text-xs",children:y.day})]},y.date))})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"flex items-center",children:[c.jsx(Pi,{className:"h-5 w-5 mr-2"}),""]})}),c.jsxs(re,{children:[c.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(y=>c.jsx("button",{onClick:()=>y.available&&s(y.time),disabled:!y.available||!i,className:`p-2 rounded-md text-sm transition-colors ${n===y.time?"bg-red-600 text-white":y.available&&i?"bg-gray-100 hover:bg-gray-200":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:y.time},y.time))}),!i&&c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]})]})]}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsxs(de,{className:"flex items-center",children:[c.jsx(Ac,{className:"h-5 w-5 mr-2"}),""]}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"name",children:" *"}),c.jsx(yt,{id:"name",value:r.name,onChange:y=>m("name",y.target.value),placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"phone",children:" *"}),c.jsx(yt,{id:"phone",value:r.phone,onChange:y=>m("phone",y.target.value),placeholder:"",required:!0})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"email",children:""}),c.jsx(yt,{id:"email",type:"email",value:r.email,onChange:y=>m("email",y.target.value),placeholder:""})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"age",children:""}),c.jsx(yt,{id:"age",type:"number",value:r.age,onChange:y=>m("age",y.target.value),placeholder:""})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"gender",children:""}),c.jsxs("select",{id:"gender",value:r.gender,onChange:y=>m("gender",y.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"male",children:""}),c.jsx("option",{value:"female",children:""})]})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"symptoms",children:" *"}),c.jsx(dr,{id:"symptoms",value:r.symptoms,onChange:y=>m("symptoms",y.target.value),placeholder:"",rows:4,required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"medicalHistory",children:""}),c.jsx(dr,{id:"medicalHistory",value:r.medicalHistory,onChange:y=>m("medicalHistory",y.target.value),placeholder:"",rows:3})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"urgency",children:""}),c.jsxs("select",{id:"urgency",value:r.urgency,onChange:y=>m("urgency",y.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"normal",children:""}),c.jsx("option",{value:"urgent",children:""}),c.jsx("option",{value:"emergency",children:""})]})]}),i&&n&&c.jsx(ae,{className:"bg-green-50 border-green-200",children:c.jsxs(re,{className:"pt-6",children:[c.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[c.jsx(Dn,{className:"h-5 w-5 text-green-600 mr-2"}),""]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:""}),i," (",d.find(y=>y.date===i)?.day,")"]}),c.jsxs("p",{children:[c.jsx("strong",{children:""}),n]}),c.jsxs("p",{children:[c.jsx("strong",{children:""}),"123"]})]})]})}),c.jsx(Ke,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",size:"lg",disabled:!i||!n||!r.name||!r.phone||!r.symptoms,children:""})]})})]})})]}),c.jsxs("section",{className:"mt-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"flex items-center",children:[c.jsx(ta,{className:"h-5 w-5 mr-2"}),""]})}),c.jsx(re,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("p",{className:"text-gray-700",children:[c.jsx("strong",{children:""}),"123"]}),c.jsxs("p",{className:"text-gray-700",children:[c.jsx("strong",{children:""}),"1A5"]}),c.jsxs("p",{className:"text-gray-700",children:[c.jsx("strong",{children:""}),""]}),c.jsxs("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:[c.jsx(ta,{className:"h-12 w-12 text-gray-400"}),c.jsx("span",{className:"ml-2 text-gray-500",children:""})]})]})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"flex items-center",children:[c.jsx(Pi,{className:"h-5 w-5 mr-2"}),""]})}),c.jsx(re,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold mb-2",children:""}),c.jsxs("div",{className:"space-y-1 text-gray-700",children:[c.jsx("p",{children:"09:00 - 12:0014:00 - 17:30"}),c.jsx("p",{children:"09:00 - 12:00"}),c.jsx("p",{children:""})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold mb-2",children:""}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Mi,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-gray-700",children:"+86 756 1234567"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ea,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-gray-700",children:"info@yaoxianjiu.com"})]})]})]}),c.jsx("div",{className:"bg-amber-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(Tw,{className:"h-5 w-5 text-amber-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-amber-800",children:""}),c.jsxs("ul",{className:"text-sm text-amber-700 mt-1 space-y-1",children:[c.jsx("li",{children:" 15"}),c.jsx("li",{children:" "}),c.jsx("li",{children:" 24"})]})]})]})})]})})]})]})]}),c.jsxs("section",{className:"mt-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"24"})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:""})})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-lg",children:""})}),c.jsx(re,{children:c.jsx("p",{className:"text-gray-600",children:"24"})})]})]})]})]})})},GR=()=>{const[i,e]=Zn.useState({}),n=r=>{e(l=>({...l,[r]:!l[r]}))},s=[{title:"",icon:Ln,color:"bg-green-600",questions:[{question:"",answer:""},{question:"",answer:""},{question:"",answer:""},{question:"",answer:""}]},{title:"",icon:Cs,color:"bg-blue-600",questions:[{question:"",answer:""},{question:"",answer:""},{question:"",answer:""},{question:"",answer:"715750%"}]},{title:"",icon:tm,color:"bg-amber-600",questions:[{question:"",answer:""},{question:"",answer:"3"},{question:"",answer:""},{question:"",answer:""}]},{title:"",icon:hx,color:"bg-purple-600",questions:[{question:"",answer:"481-22-5"},{question:"",answer:"999910"},{question:"",answer:""},{question:"",answer:"247"}]},{title:"",icon:Pi,color:"bg-red-600",questions:[{question:"",answer:"3-724"},{question:"",answer:"300/200/150/"},{question:"",answer:""},{question:"",answer:"24"}]},{title:"",icon:nm,color:"bg-indigo-600",questions:[{question:"",answer:""},{question:"",answer:"9:00-18:0024"},{question:"",answer:""},{question:"",answer:""}]}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-blue-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-12",children:c.jsx(ae,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:c.jsx(re,{className:"pt-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Mi,{className:"h-8 w-8 text-blue-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:""}),c.jsx("p",{className:"text-gray-600 mb-4",children:""}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Mi,{className:"h-4 w-4 text-blue-600"}),c.jsx("span",{className:"text-gray-700",children:"+86 756 1234567"})]}),c.jsx("div",{className:"flex items-center justify-center space-x-2",children:c.jsx("span",{className:"text-gray-700",children:"yaoxianjiu123"})})]})]})})})}),c.jsx("section",{children:c.jsx("div",{className:"space-y-8",children:s.map((r,l)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:`p-3 rounded-lg ${r.color} mr-4`,children:c.jsx(r.icon,{className:"h-6 w-6 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.title})]}),c.jsx("div",{className:"space-y-4",children:r.questions.map((d,h)=>{const f=`${l}-${h}`,m=i[f];return c.jsxs(ae,{className:"hover:shadow-md transition-shadow",children:[c.jsx(ue,{className:"cursor-pointer",onClick:()=>n(f),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(de,{className:"text-lg text-left",children:d.question}),m?c.jsx(xw,{className:"h-5 w-5 text-gray-400"}):c.jsx(mw,{className:"h-5 w-5 text-gray-400"})]})}),m&&c.jsx(re,{children:c.jsx("p",{className:"text-gray-600 leading-relaxed",children:d.answer})})]},h)})})]},l))})}),c.jsxs("section",{className:"mt-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(Ln,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]}),c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(Ew,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[c.jsx("li",{children:"  9:00-18:00"}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]}),c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(Cs,{className:"h-12 w-12 text-purple-600 mx-auto mb-4"}),c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "}),c.jsx("li",{children:" "})]})})]})]})]}),c.jsx("section",{className:"mt-16",children:c.jsx(ae,{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white",children:c.jsx(re,{className:"pt-8 pb-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-2xl font-bold mb-4",children:""}),c.jsx("p",{className:"text-green-100 mb-6",children:""}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx("button",{className:"bg-white text-green-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:""}),c.jsx("button",{className:"bg-transparent border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-green-600 transition-colors",children:""})]})]})})})})]})})},KR=()=>{const[i,e]=E.useState({name:"",email:"",phone:"",subject:"",message:"",contactMethod:"email"}),n=(h,f)=>{e(m=>({...m,[h]:f}))},s=h=>{h.preventDefault(),console.log("",i),alert("24"),e({name:"",email:"",phone:"",subject:"",message:"",contactMethod:"email"})},r=[{icon:Mi,title:"",description:"",info:"+86 756 1234567",available:" 9:00-18:00",color:"text-green-600"},{icon:ea,title:"",description:"",info:"info@yaoxianjiu.com",available:"24",color:"text-blue-600"},{icon:Oc,title:"",description:"",info:"yaoxianjiu123",available:" 9:00-18:00",color:"text-green-500"},{icon:ta,title:"",description:"",info:"123",available:" 9:00-18:00",color:"text-red-600"}],l={address:"123",phone:"+86 756 1234567",email:"info@yaoxianjiu.com",website:"www.yaoxianjiu.com",wechat:"yaoxianjiu123"},d=[{name:"",phone:"+86 756 1234567",email:"appointment@yaoxianjiu.com",description:""},{name:"",phone:"+86 756 1234568",email:"courses@yaoxianjiu.com",description:""},{name:"",phone:"+86 756 1234569",email:"shop@yaoxianjiu.com",description:""},{name:"",phone:"+86 756 1234570",email:"support@yaoxianjiu.com",description:""}];return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-blue-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((h,f)=>c.jsxs(ae,{className:"text-center hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(h.icon,{className:`h-12 w-12 mx-auto mb-4 ${h.color}`}),c.jsx(de,{className:"text-lg",children:h.title}),c.jsx(We,{children:h.description})]}),c.jsxs(re,{children:[c.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:h.info}),c.jsx("p",{className:"text-sm text-gray-500",children:h.available})]})]},f))})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[c.jsx("div",{children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsxs(de,{className:"text-2xl flex items-center",children:[c.jsx(ff,{className:"h-6 w-6 mr-2"}),""]}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsxs("form",{onSubmit:s,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"name",children:" *"}),c.jsx(yt,{id:"name",value:i.name,onChange:h=>n("name",h.target.value),placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"phone",children:""}),c.jsx(yt,{id:"phone",value:i.phone,onChange:h=>n("phone",h.target.value),placeholder:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"email",children:" *"}),c.jsx(yt,{id:"email",type:"email",value:i.email,onChange:h=>n("email",h.target.value),placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"subject",children:" *"}),c.jsxs("select",{id:"subject",value:i.subject,onChange:h=>n("subject",h.target.value),className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"appointment",children:""}),c.jsx("option",{value:"courses",children:""}),c.jsx("option",{value:"products",children:""}),c.jsx("option",{value:"technical",children:""}),c.jsx("option",{value:"cooperation",children:""}),c.jsx("option",{value:"other",children:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"contactMethod",children:""}),c.jsxs("select",{id:"contactMethod",value:i.contactMethod,onChange:h=>n("contactMethod",h.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"email",children:""}),c.jsx("option",{value:"phone",children:""}),c.jsx("option",{value:"wechat",children:""})]})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"message",children:" *"}),c.jsx(dr,{id:"message",value:i.message,onChange:h=>n("message",h.target.value),placeholder:"",rows:5,required:!0})]}),c.jsxs(Ke,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:[c.jsx(ff,{className:"h-4 w-4 mr-2"}),""]})]})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-xl flex items-center",children:[c.jsx(dw,{className:"h-5 w-5 mr-2"}),""]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(ta,{className:"h-5 w-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:""}),c.jsx("p",{className:"text-gray-600",children:l.address})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Mi,{className:"h-5 w-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:""}),c.jsx("p",{className:"text-gray-600",children:l.phone})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(ea,{className:"h-5 w-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:""}),c.jsx("p",{className:"text-gray-600",children:l.email})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Oc,{className:"h-5 w-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:""}),c.jsx("p",{className:"text-gray-600",children:l.wechat})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(ux,{className:"h-5 w-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:""}),c.jsx("p",{className:"text-gray-600",children:l.website})]})]})]})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs(de,{className:"text-xl flex items-center",children:[c.jsx(Pi,{className:"h-5 w-5 mr-2"}),""]})}),c.jsxs(re,{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-medium",children:""}),c.jsx("span",{className:"text-gray-600",children:"9:00 - 18:00"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-medium",children:""}),c.jsx("span",{className:"text-gray-600",children:"9:00 - 12:00"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-medium",children:""}),c.jsx("span",{className:"text-gray-600",children:""})]}),c.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx(Dn,{className:"h-4 w-4 inline mr-1"}),""]})})]})]}),c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsx(de,{className:"text-xl",children:""})}),c.jsxs(re,{children:[c.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-500",children:""}),c.jsx("p",{className:"text-sm text-gray-400",children:"123"})]})}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[c.jsx("p",{children:c.jsx("strong",{children:""})}),c.jsx("p",{children:" 1A5"}),c.jsx("p",{children:" 11528"}),c.jsx("p",{children:" "})]})]})]})]})]}),c.jsxs("section",{className:"mt-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map((h,f)=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-lg",children:h.name}),c.jsx(We,{children:h.description})]}),c.jsx(re,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Mi,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm",children:h.phone})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ea,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm",children:h.email})]})]})})]},f))})]}),c.jsx("section",{className:"mt-16",children:c.jsx(ae,{className:"bg-red-50 border-red-200",children:c.jsx(re,{className:"pt-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx(Mi,{className:"h-8 w-8 text-red-600 mr-2"}),c.jsx("h3",{className:"text-xl font-bold text-red-800",children:""})]}),c.jsx("p",{className:"text-red-700 mb-4",children:""}),c.jsx("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"+86 756 1234567"}),c.jsx("p",{className:"text-sm text-red-600",children:"24"})]})})})})]})})},YR=()=>{const[i,e]=E.useState(0),n=[{id:1,name:"",age:45,location:"",rating:5,title:"",content:"",treatmentType:"",treatmentDuration:"3",date:"2024-05-15",avatar:"/images/avatar-1.jpg",beforeAfter:{before:"",after:""}},{id:2,name:"",age:52,location:"",rating:5,title:"",content:"",treatmentType:"",treatmentDuration:"4",date:"2024-04-20",avatar:"/images/avatar-2.jpg",beforeAfter:{before:"",after:""}},{id:3,name:"",age:38,location:"",rating:5,title:"",content:"",treatmentType:"",treatmentDuration:"2",date:"2024-06-01",avatar:"/images/avatar-3.jpg",beforeAfter:{before:"",after:""}}],s=[{id:1,title:"",patientInfo:"65",condition:"",duration:"6",description:"",results:["80%","82","90%",""],beforeImage:"/images/case-before-1.jpg",afterImage:"/images/case-after-1.jpg"},{id:2,title:"",patientInfo:"8",condition:"",duration:"4",description:"",results:["90%","","5",""],beforeImage:"/images/case-before-2.jpg",afterImage:"/images/case-after-2.jpg"},{id:3,title:"",patientInfo:"42",condition:"",duration:"3",description:"2-3",results:["7-8","15","",""],beforeImage:"/images/case-before-3.jpg",afterImage:"/images/case-after-3.jpg"}],r=[{number:"2000+",label:"",icon:ia,color:"text-green-600"},{number:"98%",label:"",icon:$c,color:"text-red-600"},{number:"15+",label:"",icon:sa,color:"text-blue-600"},{number:"95%",label:"",icon:pf,color:"text-purple-600"}],l=()=>{e(f=>(f+1)%n.length)},d=()=>{e(f=>(f-1+n.length)%n.length)};E.useEffect(()=>{const f=setInterval(l,5e3);return()=>clearInterval(f)},[]);const h=f=>Array.from({length:5},(m,v)=>c.jsx(ca,{className:`h-4 w-4 ${v<f?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},v));return c.jsx("div",{className:"min-h-screen py-12",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(vt,{className:"mb-4 bg-green-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:""}),c.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" "})]}),c.jsx("section",{className:"mb-16",children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:r.map((f,m)=>c.jsx(ae,{className:"text-center hover:shadow-lg transition-shadow",children:c.jsxs(re,{className:"pt-6",children:[c.jsx(f.icon,{className:`h-8 w-8 mx-auto mb-4 ${f.color}`}),c.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:f.number}),c.jsx("div",{className:"text-gray-600",children:f.label})]})},m))})}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsxs("div",{className:"relative",children:[c.jsx(ae,{className:"max-w-4xl mx-auto",children:c.jsxs(re,{className:"pt-8",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsx(rj,{className:"h-12 w-12 text-green-600"})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"flex justify-center mb-4",children:h(n[i].rating)}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:n[i].title}),c.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-6",children:n[i].content})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[c.jsxs(sr,{className:"h-16 w-16",children:[c.jsx(Pc,{src:n[i].avatar}),c.jsx(Ws,{children:n[i].name.charAt(0)})]}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-semibold text-gray-900",children:n[i].name}),c.jsxs("div",{className:"text-sm text-gray-600",children:[n[i].age,"  ",n[i].location]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["",n[i].treatmentDuration]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:""}),c.jsx("p",{className:"text-red-700 text-sm",children:n[i].beforeAfter.before})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:""}),c.jsx("p",{className:"text-green-700 text-sm",children:n[i].beforeAfter.after})]})]}),c.jsx("div",{className:"flex justify-center space-x-2",children:n.map((f,m)=>c.jsx("button",{onClick:()=>e(m),className:`w-3 h-3 rounded-full transition-colors ${m===i?"bg-green-600":"bg-gray-300"}`},m))})]})}),c.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow",children:c.jsx(gw,{className:"h-6 w-6 text-gray-600"})}),c.jsx("button",{onClick:l,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow",children:c.jsx(yw,{className:"h-6 w-6 text-gray-600"})})]})]}),c.jsxs("section",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:s.map(f=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsxs(ue,{children:[c.jsx(de,{className:"text-xl",children:f.title}),c.jsxs(We,{children:[f.patientInfo,"  ",f.condition]})]}),c.jsxs(re,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx(vt,{variant:"outline",className:"mb-2",children:f.duration}),c.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:f.description})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"font-semibold mb-3 text-green-800",children:""}),c.jsx("ul",{className:"space-y-2",children:f.results.map((m,v)=>c.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),c.jsx("span",{children:m})]},v))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("div",{className:"bg-gray-100 rounded-lg p-3 text-center",children:c.jsx("div",{className:"w-full h-24 bg-gray-200 rounded mb-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:""})})}),c.jsx("div",{className:"bg-gray-100 rounded-lg p-3 text-center",children:c.jsx("div",{className:"w-full h-24 bg-gray-200 rounded mb-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:""})})})]})]})]},f.id))})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:""}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(f=>c.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(ue,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs(sr,{children:[c.jsx(Pc,{src:f.avatar}),c.jsx(Ws,{children:f.name.charAt(0)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:f.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[f.age,"  ",f.location]})]})]}),c.jsx("div",{className:"flex items-center space-x-1",children:h(f.rating)})]})}),c.jsxs(re,{children:[c.jsx("h3",{className:"font-semibold mb-2",children:f.title}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:f.content}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[c.jsx("span",{children:f.treatmentType}),c.jsx("span",{children:f.date})]})]})]},f.id))})]}),c.jsx("section",{className:"mt-16",children:c.jsx(ae,{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white",children:c.jsx(re,{className:"pt-8 pb-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-2xl font-bold mb-4",children:""}),c.jsx("p",{className:"text-green-100 mb-6",children:""}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx(Ke,{className:"bg-white text-green-600 hover:bg-gray-100",children:""}),c.jsx(Ke,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-green-600",children:""})]})]})})})})]})})};function Li(i,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(i?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function lm(i,e=[]){let n=[];function s(l,d){const h=E.createContext(d),f=n.length;n=[...n,d];const m=y=>{const{scope:x,children:S,...k}=y,C=x?.[i]?.[f]||h,w=E.useMemo(()=>k,Object.values(k));return c.jsx(C.Provider,{value:w,children:S})};m.displayName=l+"Provider";function v(y,x){const S=x?.[i]?.[f]||h,k=E.useContext(S);if(k)return k;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${l}\``)}return[m,v]}const r=()=>{const l=n.map(d=>E.createContext(d));return function(h){const f=h?.[i]||l;return E.useMemo(()=>({[`__scope${i}`]:{...h,[i]:f}}),[h,f])}};return r.scopeName=i,[s,JR(r,...e)]}function JR(...i){const e=i[0];if(i.length===1)return e;const n=()=>{const s=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(l){const d=s.reduce((h,{useScope:f,scopeName:m})=>{const y=f(l)[`__scope${m}`];return{...h,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}function bf(i){const e=QR(i),n=E.forwardRef((s,r)=>{const{children:l,...d}=s,h=E.Children.toArray(l),f=h.find($R);if(f){const m=f.props.children,v=h.map(y=>y===f?E.Children.count(m)>1?E.Children.only(null):E.isValidElement(m)?m.props.children:null:y);return c.jsx(e,{...d,ref:r,children:E.isValidElement(m)?E.cloneElement(m,void 0,v):null})}return c.jsx(e,{...d,ref:r,children:l})});return n.displayName=`${i}.Slot`,n}function QR(i){const e=E.forwardRef((n,s)=>{const{children:r,...l}=n;if(E.isValidElement(r)){const d=WR(r),h=ZR(l,r.props);return r.type!==E.Fragment&&(h.ref=s?sm(s,d):d),E.cloneElement(r,h)}return E.Children.count(r)>1?E.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var XR=Symbol("radix.slottable");function $R(i){return E.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===XR}function ZR(i,e){const n={...e};for(const s in e){const r=i[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...h)=>{const f=l(...h);return r(...h),f}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...i,...n}}function WR(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?i.props.ref:i.props.ref||i.ref)}function e_(i){const e=i+"CollectionProvider",[n,s]=lm(e),[r,l]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=C=>{const{scope:w,children:_}=C,L=Zn.useRef(null),F=Zn.useRef(new Map).current;return c.jsx(r,{scope:w,itemMap:F,collectionRef:L,children:_})};d.displayName=e;const h=i+"CollectionSlot",f=bf(h),m=Zn.forwardRef((C,w)=>{const{scope:_,children:L}=C,F=l(h,_),j=Mc(w,F.collectionRef);return c.jsx(f,{ref:j,children:L})});m.displayName=h;const v=i+"CollectionItemSlot",y="data-radix-collection-item",x=bf(v),S=Zn.forwardRef((C,w)=>{const{scope:_,children:L,...F}=C,j=Zn.useRef(null),M=Mc(w,j),P=l(v,_);return Zn.useEffect(()=>(P.itemMap.set(j,{ref:j,...F}),()=>void P.itemMap.delete(j))),c.jsx(x,{[y]:"",ref:M,children:L})});S.displayName=v;function k(C){const w=l(i+"CollectionConsumer",C);return Zn.useCallback(()=>{const L=w.collectionRef.current;if(!L)return[];const F=Array.from(L.querySelectorAll(`[${y}]`));return Array.from(w.itemMap.values()).sort((P,I)=>F.indexOf(P.ref.current)-F.indexOf(I.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:d,Slot:m,ItemSlot:S},k,s]}var t_=Qf[" useId ".trim().toString()]||(()=>{}),n_=0;function zx(i){const[e,n]=E.useState(t_());return aa(()=>{n(s=>s??String(n_++))},[i]),e?`radix-${e}`:""}var i_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yr=i_.reduce((i,e)=>{const n=bf(`Primitive.${e}`),s=E.forwardRef((r,l)=>{const{asChild:d,...h}=r,f=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(f,{...h,ref:l})});return s.displayName=`Primitive.${e}`,{...i,[e]:s}},{}),s_=Qf[" useInsertionEffect ".trim().toString()]||aa;function Bx({prop:i,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,l,d]=a_({defaultProp:e,onChange:n}),h=i!==void 0,f=h?i:r;{const v=E.useRef(i!==void 0);E.useEffect(()=>{const y=v.current;y!==h&&console.warn(`${s} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,s])}const m=E.useCallback(v=>{if(h){const y=r_(v)?v(i):v;y!==i&&d.current?.(y)}else l(v)},[h,i,l,d]);return[f,m]}function a_({defaultProp:i,onChange:e}){const[n,s]=E.useState(i),r=E.useRef(n),l=E.useRef(e);return s_(()=>{l.current=e},[e]),E.useEffect(()=>{r.current!==n&&(l.current?.(n),r.current=n)},[n,r]),[n,s,l]}function r_(i){return typeof i=="function"}var o_=E.createContext(void 0);function qx(i){const e=E.useContext(o_);return i||e||"ltr"}var Bh="rovingFocusGroup.onEntryFocus",l_={bubbles:!1,cancelable:!0},qo="RovingFocusGroup",[xf,Fx,c_]=e_(qo),[u_,Vx]=lm(qo,[c_]),[d_,h_]=u_(qo),Hx=E.forwardRef((i,e)=>c.jsx(xf.Provider,{scope:i.__scopeRovingFocusGroup,children:c.jsx(xf.Slot,{scope:i.__scopeRovingFocusGroup,children:c.jsx(f_,{...i,ref:e})})}));Hx.displayName=qo;var f_=E.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:v=!1,...y}=i,x=E.useRef(null),S=Mc(e,x),k=qx(l),[C,w]=Bx({prop:d,defaultProp:h??null,onChange:f,caller:qo}),[_,L]=E.useState(!1),F=wx(m),j=Fx(n),M=E.useRef(!1),[P,I]=E.useState(0);return E.useEffect(()=>{const H=x.current;if(H)return H.addEventListener(Bh,F),()=>H.removeEventListener(Bh,F)},[F]),c.jsx(d_,{scope:n,orientation:s,dir:k,loop:r,currentTabStopId:C,onItemFocus:E.useCallback(H=>w(H),[w]),onItemShiftTab:E.useCallback(()=>L(!0),[]),onFocusableItemAdd:E.useCallback(()=>I(H=>H+1),[]),onFocusableItemRemove:E.useCallback(()=>I(H=>H-1),[]),children:c.jsx(yr.div,{tabIndex:_||P===0?-1:0,"data-orientation":s,...y,ref:S,style:{outline:"none",...i.style},onMouseDown:Li(i.onMouseDown,()=>{M.current=!0}),onFocus:Li(i.onFocus,H=>{const X=!M.current;if(H.target===H.currentTarget&&X&&!_){const te=new CustomEvent(Bh,l_);if(H.currentTarget.dispatchEvent(te),!te.defaultPrevented){const he=j().filter(q=>q.focusable),ve=he.find(q=>q.active),Re=he.find(q=>q.id===C),Xe=[ve,Re,...he].filter(Boolean).map(q=>q.ref.current);Yx(Xe,v)}}M.current=!1}),onBlur:Li(i.onBlur,()=>L(!1))})})}),Gx="RovingFocusGroupItem",Kx=E.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:l,children:d,...h}=i,f=zx(),m=l||f,v=h_(Gx,n),y=v.currentTabStopId===m,x=Fx(n),{onFocusableItemAdd:S,onFocusableItemRemove:k,currentTabStopId:C}=v;return E.useEffect(()=>{if(s)return S(),()=>k()},[s,S,k]),c.jsx(xf.ItemSlot,{scope:n,id:m,focusable:s,active:r,children:c.jsx(yr.span,{tabIndex:y?0:-1,"data-orientation":v.orientation,...h,ref:e,onMouseDown:Li(i.onMouseDown,w=>{s?v.onItemFocus(m):w.preventDefault()}),onFocus:Li(i.onFocus,()=>v.onItemFocus(m)),onKeyDown:Li(i.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){v.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const _=g_(w,v.orientation,v.dir);if(_!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let F=x().filter(j=>j.focusable).map(j=>j.ref.current);if(_==="last")F.reverse();else if(_==="prev"||_==="next"){_==="prev"&&F.reverse();const j=F.indexOf(w.currentTarget);F=v.loop?v_(F,j+1):F.slice(j+1)}setTimeout(()=>Yx(F))}}),children:typeof d=="function"?d({isCurrentTabStop:y,hasTabStop:C!=null}):d})})});Kx.displayName=Gx;var m_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function p_(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function g_(i,e,n){const s=p_(i.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return m_[s]}function Yx(i,e=!1){const n=document.activeElement;for(const s of i)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function v_(i,e){return i.map((n,s)=>i[(e+s)%i.length])}var y_=Hx,b_=Kx;function x_(i,e){return E.useReducer((n,s)=>e[n][s]??n,i)}var Jx=i=>{const{present:e,children:n}=i,s=S_(e),r=typeof n=="function"?n({present:s.isPresent}):E.Children.only(n),l=Mc(s.ref,T_(r));return typeof n=="function"||s.isPresent?E.cloneElement(r,{ref:l}):null};Jx.displayName="Presence";function S_(i){const[e,n]=E.useState(),s=E.useRef(null),r=E.useRef(i),l=E.useRef("none"),d=i?"mounted":"unmounted",[h,f]=x_(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=cc(s.current);l.current=h==="mounted"?m:"none"},[h]),aa(()=>{const m=s.current,v=r.current;if(v!==i){const x=l.current,S=cc(m);i?f("MOUNT"):S==="none"||m?.display==="none"?f("UNMOUNT"):f(v&&x!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,f]),aa(()=>{if(e){let m;const v=e.ownerDocument.defaultView??window,y=S=>{const C=cc(s.current).includes(CSS.escape(S.animationName));if(S.target===e&&C&&(f("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",m=v.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},x=S=>{S.target===e&&(l.current=cc(s.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{v.clearTimeout(m),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:E.useCallback(m=>{s.current=m?getComputedStyle(m):null,n(m)},[])}}function cc(i){return i?.animationName||"none"}function T_(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?i.props.ref:i.props.ref||i.ref)}var Wc="Tabs",[C_]=lm(Wc,[Vx]),Qx=Vx(),[k_,cm]=C_(Wc),Xx=E.forwardRef((i,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:l,orientation:d="horizontal",dir:h,activationMode:f="automatic",...m}=i,v=qx(h),[y,x]=Bx({prop:s,onChange:r,defaultProp:l??"",caller:Wc});return c.jsx(k_,{scope:n,baseId:zx(),value:y,onValueChange:x,orientation:d,dir:v,activationMode:f,children:c.jsx(yr.div,{dir:v,"data-orientation":d,...m,ref:e})})});Xx.displayName=Wc;var $x="TabsList",Zx=E.forwardRef((i,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=i,l=cm($x,n),d=Qx(n);return c.jsx(y_,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:s,children:c.jsx(yr.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:e})})});Zx.displayName=$x;var Wx="TabsTrigger",eS=E.forwardRef((i,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...l}=i,d=cm(Wx,n),h=Qx(n),f=iS(d.baseId,s),m=sS(d.baseId,s),v=s===d.value;return c.jsx(b_,{asChild:!0,...h,focusable:!r,active:v,children:c.jsx(yr.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":m,"data-state":v?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:f,...l,ref:e,onMouseDown:Li(i.onMouseDown,y=>{!r&&y.button===0&&y.ctrlKey===!1?d.onValueChange(s):y.preventDefault()}),onKeyDown:Li(i.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&d.onValueChange(s)}),onFocus:Li(i.onFocus,()=>{const y=d.activationMode!=="manual";!v&&!r&&y&&d.onValueChange(s)})})})});eS.displayName=Wx;var tS="TabsContent",nS=E.forwardRef((i,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:l,...d}=i,h=cm(tS,n),f=iS(h.baseId,s),m=sS(h.baseId,s),v=s===h.value,y=E.useRef(v);return E.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),c.jsx(Jx,{present:r||v,children:({present:x})=>c.jsx(yr.div,{"data-state":v?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":f,hidden:!x,id:m,tabIndex:0,...d,ref:e,style:{...i.style,animationDuration:y.current?"0s":void 0},children:x&&l})})});nS.displayName=tS;function iS(i,e){return`${i}-trigger-${e}`}function sS(i,e){return`${i}-content-${e}`}var E_=Xx,aS=Zx,rS=eS,oS=nS;const N_=E_,lS=E.forwardRef(({className:i,...e},n)=>c.jsx(aS,{ref:n,className:Ht("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...e}));lS.displayName=aS.displayName;const Qs=E.forwardRef(({className:i,...e},n)=>c.jsx(rS,{ref:n,className:Ht("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...e}));Qs.displayName=rS.displayName;const Xs=E.forwardRef(({className:i,...e},n)=>c.jsx(oS,{ref:n,className:Ht("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));Xs.displayName=oS.displayName;const w_=()=>{const[i,e]=E.useState(!1),[n,s]=E.useState(!1),[r,l]=E.useState({name:"",email:"lixiaoming@example.com",phone:"+86 138 0000 0000",address:"",membershipLevel:"gold",points:1250,joinDate:"2023-08-15"}),d={basic:{name:"",color:"bg-gray-500",icon:Ac,benefits:["","",""]},silver:{name:"",color:"bg-gray-400",icon:ca,benefits:["9","","",""]},gold:{name:"",color:"bg-yellow-500",icon:Ow,benefits:["8","VIP","","",""]},platinum:{name:"",color:"bg-purple-500",icon:ia,benefits:["7","","","24",""]}},h=[{id:"ORD001",date:"2024-06-10",items:" x2,  x1",amount:298,status:"",points:30},{id:"ORD002",date:"2024-05-25",items:"",amount:1200,status:"",points:120},{id:"ORD003",date:"2024-05-15",items:"",amount:200,status:"",points:20}],f=[{id:1,title:"",progress:100,totalLessons:12,completedLessons:12,certificate:!0},{id:2,title:"",progress:75,totalLessons:16,completedLessons:12,certificate:!1},{id:3,title:"",progress:30,totalLessons:20,completedLessons:6,certificate:!1}],m=[{id:1,date:"2024-06-10",description:"",points:30,type:"earn"},{id:2,date:"2024-06-05",description:"",points:-100,type:"spend"},{id:3,date:"2024-05-25",description:"",points:120,type:"earn"},{id:4,date:"2024-05-20",description:"",points:10,type:"earn"}],v=[{id:1,date:"2024-06-20",time:"14:00",type:"",status:"",doctor:""},{id:2,date:"2024-06-15",time:"10:00",type:"",status:"",doctor:""}],y=()=>{e(!1),console.log(":",r)},x=(C,w)=>{l(_=>({..._,[C]:w}))},S=d[r.membershipLevel],k=S.icon;return c.jsx("div",{className:"min-h-screen py-12 bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(vt,{className:"mb-4 bg-purple-600",children:""}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:""}),c.jsx("p",{className:"text-xl text-gray-600",children:""})]}),c.jsx(ae,{className:"mb-8 bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:c.jsx(re,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:`p-3 rounded-full ${S.color}`,children:c.jsx(k,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:r.name}),c.jsx("p",{className:"text-purple-100",children:S.name}),c.jsxs("p",{className:"text-sm text-purple-200",children:["",r.joinDate]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-3xl font-bold",children:r.points}),c.jsx("div",{className:"text-purple-200",children:""})]})]})})}),c.jsxs(N_,{defaultValue:"profile",className:"space-y-6",children:[c.jsxs(lS,{className:"grid w-full grid-cols-2 lg:grid-cols-6",children:[c.jsx(Qs,{value:"profile",children:""}),c.jsx(Qs,{value:"courses",children:""}),c.jsx(Qs,{value:"orders",children:""}),c.jsx(Qs,{value:"appointments",children:""}),c.jsx(Qs,{value:"points",children:""}),c.jsx(Qs,{value:"benefits",children:""})]}),c.jsx(Xs,{value:"profile",children:c.jsxs(ae,{children:[c.jsx(ue,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(Ke,{onClick:()=>i?y():e(!0),className:i?"bg-green-600 hover:bg-green-700":"",children:i?c.jsxs(c.Fragment,{children:[c.jsx(xy,{className:"h-4 w-4 mr-2"}),""]}):c.jsxs(c.Fragment,{children:[c.jsx(pj,{className:"h-4 w-4 mr-2"}),""]})})]})}),c.jsxs(re,{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"name",children:""}),c.jsx(yt,{id:"name",value:r.name,onChange:C=>x("name",C.target.value),disabled:!i})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"email",children:""}),c.jsx(yt,{id:"email",type:"email",value:r.email,onChange:C=>x("email",C.target.value),disabled:!i})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"phone",children:""}),c.jsx(yt,{id:"phone",value:r.phone,onChange:C=>x("phone",C.target.value),disabled:!i})]}),c.jsxs("div",{children:[c.jsx(Ge,{htmlFor:"address",children:""}),c.jsx(yt,{id:"address",value:r.address,onChange:C=>x("address",C.target.value),disabled:!i})]})]}),i&&c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs(Ke,{onClick:y,className:"bg-green-600 hover:bg-green-700",children:[c.jsx(xy,{className:"h-4 w-4 mr-2"}),""]}),c.jsxs(Ke,{variant:"outline",onClick:()=>e(!1),children:[c.jsx(im,{className:"h-4 w-4 mr-2"}),""]})]})]})]})}),c.jsx(Xs,{value:"courses",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsx("div",{className:"space-y-4",children:f.map(C=>c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"font-semibold",children:C.title}),C.certificate&&c.jsxs(vt,{className:"bg-green-600",children:[c.jsx(ia,{className:"h-3 w-3 mr-1"}),""]})]}),c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[c.jsxs("span",{children:["",C.completedLessons,"/",C.totalLessons," "]}),c.jsxs("span",{children:[C.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${C.progress}%`}})})]}),c.jsxs(Ke,{size:"sm",className:"w-full",children:[c.jsx(Ln,{className:"h-4 w-4 mr-2"}),""]})]},C.id))})})]})}),c.jsx(Xs,{value:"orders",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsx("div",{className:"space-y-4",children:h.map(C=>c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"font-semibold",children:[" #",C.id]}),c.jsx(vt,{variant:C.status===""?"default":"secondary",children:C.status})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[c.jsxs("div",{children:["",C.date]}),c.jsxs("div",{children:["",C.items]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"font-semibold",children:["",C.amount]}),c.jsxs("div",{className:"text-sm text-green-600",children:["+",C.points," "]})]})]},C.id))})})]})}),c.jsx(Xs,{value:"appointments",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsx(re,{children:c.jsx("div",{className:"space-y-4",children:v.map(C=>c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"font-semibold",children:C.type}),c.jsx(vt,{variant:C.status===""?"default":"secondary",children:C.status})]}),c.jsx("div",{className:"text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("span",{children:[c.jsx(sa,{className:"h-4 w-4 inline mr-1"}),C.date," ",C.time]}),c.jsxs("span",{children:[c.jsx(Ac,{className:"h-4 w-4 inline mr-1"}),C.doctor]})]})})]},C.id))})})]})}),c.jsx(Xs,{value:"points",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsxs(re,{children:[c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg text-white",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold mb-2",children:r.points}),c.jsx("div",{children:""})]})}),c.jsx("div",{className:"space-y-4",children:m.map(C=>c.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:C.description}),c.jsx("div",{className:"text-sm text-gray-500",children:C.date})]}),c.jsxs("div",{className:`font-semibold ${C.type==="earn"?"text-green-600":"text-red-600"}`,children:[C.type==="earn"?"+":"",C.points]})]},C.id))})]})]})}),c.jsx(Xs,{value:"benefits",children:c.jsxs(ae,{children:[c.jsxs(ue,{children:[c.jsx(de,{children:""}),c.jsx(We,{children:""})]}),c.jsxs(re,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:Object.entries(d).map(([C,w])=>{const _=w.icon,L=C===r.membershipLevel;return c.jsx(ae,{className:`${L?"ring-2 ring-purple-500":""}`,children:c.jsxs(re,{className:"pt-6",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:`inline-flex p-3 rounded-full ${w.color} mb-3`,children:c.jsx(_,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"font-semibold",children:w.name}),L&&c.jsx(vt,{className:"mt-2",children:""})]}),c.jsx("ul",{className:"space-y-2 text-sm",children:w.benefits.map((F,j)=>c.jsxs("li",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),c.jsx("span",{children:F})]},j))})]})},C)})}),c.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-4 text-blue-900",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:""}),c.jsx("div",{children:" 2,000"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:""}),c.jsx("div",{children:" 5,000"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:""}),c.jsx("div",{children:" 10,000"})]})]})]})]})]})})]})]})})};var Ry={};function j_(i,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in i)){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(i)}var R_=Object.defineProperty,__=(i,e,n)=>e in i?R_(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,_y=(i,e,n)=>__(i,typeof e!="symbol"?e+"":e,n);class Xt{constructor(){_y(this,"_locking"),_y(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),s=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),s}}function pt(i,e){if(!i)throw new Error(e)}const O_=34028234663852886e22,A_=-34028234663852886e22,M_=4294967295,D_=2147483647,P_=-2147483648;function mc(i){if(typeof i!="number")throw new Error("invalid int 32: "+typeof i);if(!Number.isInteger(i)||i>D_||i<P_)throw new Error("invalid int 32: "+i)}function Sf(i){if(typeof i!="number")throw new Error("invalid uint 32: "+typeof i);if(!Number.isInteger(i)||i>M_||i<0)throw new Error("invalid uint 32: "+i)}function cS(i){if(typeof i!="number")throw new Error("invalid float 32: "+typeof i);if(Number.isFinite(i)&&(i>O_||i<A_))throw new Error("invalid float 32: "+i)}const uS=Symbol("@bufbuild/protobuf/enum-type");function L_(i){const e=i[uS];return pt(e,"missing enum type on enum object"),e}function dS(i,e,n,s){i[uS]=hS(e,n.map(r=>({no:r.no,name:r.name,localName:i[r.no]})))}function hS(i,e,n){const s=Object.create(null),r=Object.create(null),l=[];for(const d of e){const h=fS(d);l.push(h),s[d.name]=h,r[d.no]=h}return{typeName:i,values:l,findName(d){return s[d]},findNumber(d){return r[d]}}}function I_(i,e,n){const s={};for(const r of e){const l=fS(r);s[l.localName]=l.no,s[l.no]=l.localName}return dS(s,i,e),s}function fS(i){return"localName"in i?i:Object.assign(Object.assign({},i),{localName:i.name})}class um{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const s=this.getType(),r=s.runtime.bin,l=r.makeReadOptions(n);return r.readMessage(this,l.readerFactory(e),e.byteLength,l),this}fromJson(e,n){const s=this.getType(),r=s.runtime.json,l=r.makeReadOptions(n);return r.readMessage(s,e,l,this),this}fromJsonString(e,n){let s;try{s=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(s,n)}toBinary(e){const n=this.getType(),s=n.runtime.bin,r=s.makeWriteOptions(e),l=r.writerFactory();return s.writeMessage(this,l,r),l.finish()}toJson(e){const n=this.getType(),s=n.runtime.json,r=s.makeWriteOptions(e);return s.writeMessage(this,r)}toJsonString(e){var n;const s=this.toJson(e);return JSON.stringify(s,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function U_(i,e,n,s){var r;const l=(r=s?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),d={[l]:function(h){i.util.initFields(this),i.util.initPartial(h,this)}}[l];return Object.setPrototypeOf(d.prototype,new um),Object.assign(d,{runtime:i,typeName:e,fields:i.util.newFieldList(n),fromBinary(h,f){return new d().fromBinary(h,f)},fromJson(h,f){return new d().fromJson(h,f)},fromJsonString(h,f){return new d().fromJsonString(h,f)},equals(h,f){return i.util.equals(d,h,f)}}),d}function z_(){let i=0,e=0;for(let s=0;s<28;s+=7){let r=this.buf[this.pos++];if(i|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[i,e]}let n=this.buf[this.pos++];if(i|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[i,e];for(let s=3;s<=31;s+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[i,e]}throw new Error("invalid varint")}function qh(i,e,n){for(let l=0;l<28;l=l+7){const d=i>>>l,h=!(!(d>>>7)&&e==0),f=(h?d|128:d)&255;if(n.push(f),!h)return}const s=i>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?s|128:s)&255),!!r){for(let l=3;l<31;l=l+7){const d=e>>>l,h=!!(d>>>7),f=(h?d|128:d)&255;if(n.push(f),!h)return}n.push(e>>>31&1)}}const pc=4294967296;function Oy(i){const e=i[0]==="-";e&&(i=i.slice(1));const n=1e6;let s=0,r=0;function l(d,h){const f=Number(i.slice(d,h));r*=n,s=s*n+f,s>=pc&&(r=r+(s/pc|0),s=s%pc)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),e?pS(s,r):dm(s,r)}function B_(i,e){let n=dm(i,e);const s=n.hi&2147483648;s&&(n=pS(n.lo,n.hi));const r=mS(n.lo,n.hi);return s?"-"+r:r}function mS(i,e){if({lo:i,hi:e}=q_(i,e),e<=2097151)return String(pc*e+i);const n=i&16777215,s=(i>>>24|e<<8)&16777215,r=e>>16&65535;let l=n+s*6777216+r*6710656,d=s+r*8147497,h=r*2;const f=1e7;return l>=f&&(d+=Math.floor(l/f),l%=f),d>=f&&(h+=Math.floor(d/f),d%=f),h.toString()+Ay(d)+Ay(l)}function q_(i,e){return{lo:i>>>0,hi:e>>>0}}function dm(i,e){return{lo:i|0,hi:e|0}}function pS(i,e){return e=~e,i?i=~i+1:e+=1,dm(i,e)}const Ay=i=>{const e=String(i);return"0000000".slice(e.length)+e};function My(i,e){if(i>=0){for(;i>127;)e.push(i&127|128),i=i>>>7;e.push(i)}else{for(let n=0;n<9;n++)e.push(i&127|128),i=i>>7;e.push(1)}}function F_(){let i=this.buf[this.pos++],e=i&127;if((i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<7,(i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<14,(i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<21,(i&128)==0)return this.assertBounds(),e;i=this.buf[this.pos++],e|=(i&15)<<28;for(let n=5;(i&128)!==0&&n<10;n++)i=this.buf[this.pos++];if((i&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function V_(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof Ry!="object"||Ry.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),d=BigInt("0"),h=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(f){const m=typeof f=="bigint"?f:BigInt(f);if(m>l||m<r)throw new Error("int64 invalid: ".concat(f));return m},uParse(f){const m=typeof f=="bigint"?f:BigInt(f);if(m>h||m<d)throw new Error("uint64 invalid: ".concat(f));return m},enc(f){return i.setBigInt64(0,this.parse(f),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(f){return i.setBigInt64(0,this.uParse(f),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(f,m){return i.setInt32(0,f,!0),i.setInt32(4,m,!0),i.getBigInt64(0,!0)},uDec(f,m){return i.setInt32(0,f,!0),i.setInt32(4,m,!0),i.getBigUint64(0,!0)}}}const n=r=>pt(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),s=r=>pt(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),s(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),Oy(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),s(r),Oy(r)},dec(r,l){return B_(r,l)},uDec(r,l){return mS(r,l)}}}const ct=V_();var Z;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(Z||(Z={}));var ks;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(ks||(ks={}));function ps(i,e,n){if(e===n)return!0;if(i==Z.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==n[s])return!1;return!0}switch(i){case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return e==n}return!1}function hr(i,e){switch(i){case Z.BOOL:return!1;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return e==0?ct.zero:"0";case Z.DOUBLE:case Z.FLOAT:return 0;case Z.BYTES:return new Uint8Array(0);case Z.STRING:return"";default:return 0}}function gS(i,e){switch(i){case Z.BOOL:return e===!1;case Z.STRING:return e==="";case Z.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var St;(function(i){i[i.Varint=0]="Varint",i[i.Bit64=1]="Bit64",i[i.LengthDelimited=2]="LengthDelimited",i[i.StartGroup=3]="StartGroup",i[i.EndGroup=4]="EndGroup",i[i.Bit32=5]="Bit32"})(St||(St={}));class H_{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),s=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],s),s+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Sf(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return mc(e),My(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){cS(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Sf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){mc(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return mc(e),e=(e<<1^e>>31)>>>0,My(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),s=new DataView(n.buffer),r=ct.enc(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),s=new DataView(n.buffer),r=ct.uEnc(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=ct.enc(e);return qh(n.lo,n.hi,this.buf),this}sint64(e){let n=ct.enc(e),s=n.hi>>31,r=n.lo<<1^s,l=(n.hi<<1|n.lo>>>31)^s;return qh(r,l,this.buf),this}uint64(e){let n=ct.uEnc(e);return qh(n.lo,n.hi,this.buf),this}}class G_{constructor(e,n){this.varint64=z_,this.uint32=F_,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,s=e&7;if(n<=0||s<0||s>5)throw new Error("illegal tag: field no "+n+" wire type "+s);return[n,s]}skip(e,n){let s=this.pos;switch(e){case St.Varint:for(;this.buf[this.pos++]&128;);break;case St.Bit64:this.pos+=4;case St.Bit32:this.pos+=4;break;case St.LengthDelimited:let r=this.uint32();this.pos+=r;break;case St.StartGroup:for(;;){const[l,d]=this.tag();if(d===St.EndGroup){if(n!==void 0&&l!==n)throw new Error("invalid end group tag");break}this.skip(d,l)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(s,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ct.dec(...this.varint64())}uint64(){return ct.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),s=-(e&1);return e=(e>>>1|(n&1)<<31)^s,n=n>>>1^s,ct.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ct.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ct.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function K_(i,e,n,s){let r;return{typeName:e,extendee:n,get field(){if(!r){const l=typeof s=="function"?s():s;l.name=e.split(".").pop(),l.jsonName="[".concat(e,"]"),r=i.util.newFieldList([l]).list()[0]}return r},runtime:i}}function vS(i){const e=i.field.localName,n=Object.create(null);return n[e]=Y_(i),[n,()=>n[e]]}function Y_(i){const e=i.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return hr(e.T,e.L);case"message":const n=e.T,s=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(s):s;case"map":throw"map fields are not allowed to be extensions"}}function J_(i,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=i.length-1;n>=0;--n)if(i[n].no==e.no)return[i[n]];return[]}return i.filter(n=>n.no===e.no)}let Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),eu=[];for(let i=0;i<Ri.length;i++)eu[Ri[i].charCodeAt(0)]=i;eu[45]=Ri.indexOf("+");eu[95]=Ri.indexOf("/");const yS={dec(i){let e=i.length*3/4;i[i.length-2]=="="?e-=2:i[i.length-1]=="="&&(e-=1);let n=new Uint8Array(e),s=0,r=0,l,d=0;for(let h=0;h<i.length;h++){if(l=eu[i.charCodeAt(h)],l===void 0)switch(i[h]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:d=l,r=1;break;case 1:n[s++]=d<<2|(l&48)>>4,d=l,r=2;break;case 2:n[s++]=(d&15)<<4|(l&60)>>2,d=l,r=3;break;case 3:n[s++]=(d&3)<<6|l,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,s)},enc(i){let e="",n=0,s,r=0;for(let l=0;l<i.length;l++)switch(s=i[l],n){case 0:e+=Ri[s>>2],r=(s&3)<<4,n=1;break;case 1:e+=Ri[r|s>>4],r=(s&15)<<2,n=2;break;case 2:e+=Ri[r|s>>6],e+=Ri[s&63],n=0;break}return n&&(e+=Ri[r],e+="=",n==1&&(e+="=")),e}};function Q_(i,e,n){xS(e,i);const s=e.runtime.bin.makeReadOptions(n),r=J_(i.getType().runtime.bin.listUnknownFields(i),e.field),[l,d]=vS(e);for(const h of r)e.runtime.bin.readField(l,s.readerFactory(h.data),e.field,h.wireType,s);return d()}function X_(i,e,n,s){xS(e,i);const r=e.runtime.bin.makeReadOptions(s),l=e.runtime.bin.makeWriteOptions(s);if(bS(i,e)){const m=i.getType().runtime.bin.listUnknownFields(i).filter(v=>v.no!=e.field.no);i.getType().runtime.bin.discardUnknownFields(i);for(const v of m)i.getType().runtime.bin.onUnknownField(i,v.no,v.wireType,v.data)}const d=l.writerFactory();let h=e.field;!h.opt&&!h.repeated&&(h.kind=="enum"||h.kind=="scalar")&&(h=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(h,n,d,l);const f=r.readerFactory(d.finish());for(;f.pos<f.len;){const[m,v]=f.tag(),y=f.skip(v,m);i.getType().runtime.bin.onUnknownField(i,m,v,y)}}function bS(i,e){const n=i.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(i).find(s=>s.no==e.field.no)}function xS(i,e){pt(i.extendee.typeName==e.getType().typeName,"extension ".concat(i.typeName," can only be applied to message ").concat(i.extendee.typeName))}function SS(i,e){const n=i.localName;if(i.repeated)return e[n].length>0;if(i.oneof)return e[i.oneof.localName].case===n;switch(i.kind){case"enum":case"scalar":return i.opt||i.req?e[n]!==void 0:i.kind=="enum"?e[n]!==i.T.values[0].no:!gS(i.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function Dy(i,e){const n=i.localName,s=!i.opt&&!i.req;if(i.repeated)e[n]=[];else if(i.oneof)e[i.oneof.localName]={case:void 0};else switch(i.kind){case"map":e[n]={};break;case"enum":e[n]=s?i.T.values[0].no:void 0;break;case"scalar":e[n]=s?hr(i.T,i.L):void 0;break;case"message":e[n]=void 0;break}}function _i(i,e){if(i===null||typeof i!="object"||!Object.getOwnPropertyNames(um.prototype).every(s=>s in i&&typeof i[s]=="function"))return!1;const n=i.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function TS(i,e){return _i(e)||!i.fieldWrapper?e:i.fieldWrapper.wrapField(e)}Z.DOUBLE,Z.FLOAT,Z.INT64,Z.UINT64,Z.INT32,Z.UINT32,Z.BOOL,Z.STRING,Z.BYTES;const Py={ignoreUnknownFields:!1},Ly={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function $_(i){return i?Object.assign(Object.assign({},Py),i):Py}function Z_(i){return i?Object.assign(Object.assign({},Ly),i):Ly}const Lc=Symbol(),gc=Symbol();function W_(){return{makeReadOptions:$_,makeWriteOptions:Z_,readMessage(i,e,n,s){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(i.typeName," from JSON: ").concat(Wn(e)));s=s??new i;const r=new Map,l=n.typeRegistry;for(const[d,h]of Object.entries(e)){const f=i.fields.findJsonName(d);if(f){if(f.oneof){if(h===null&&f.kind=="scalar")continue;const m=r.get(f.oneof);if(m!==void 0)throw new Error("cannot decode message ".concat(i.typeName,' from JSON: multiple keys for oneof "').concat(f.oneof.name,'" present: "').concat(m,'", "').concat(d,'"'));r.set(f.oneof,d)}Iy(s,h,f,n,i)}else{let m=!1;if(l?.findExtension&&d.startsWith("[")&&d.endsWith("]")){const v=l.findExtension(d.substring(1,d.length-1));if(v&&v.extendee.typeName==i.typeName){m=!0;const[y,x]=vS(v);Iy(y,h,v.field,n,v),X_(s,v,x(),n)}}if(!m&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(i.typeName,' from JSON: key "').concat(d,'" is unknown'))}}return s},writeMessage(i,e){const n=i.getType(),s={};let r;try{for(r of n.fields.byNumber()){if(!SS(r,i)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!t2(r))continue}const d=r.oneof?i[r.oneof.localName].value:i[r.localName],h=Uy(r,d,e);h!==void 0&&(s[e.useProtoFieldName?r.name:r.jsonName]=h)}const l=e.typeRegistry;if(l?.findExtensionFor)for(const d of n.runtime.bin.listUnknownFields(i)){const h=l.findExtensionFor(n.typeName,d.no);if(h&&bS(i,h)){const f=Q_(i,h,e),m=Uy(h.field,f,e);m!==void 0&&(s[h.field.jsonName]=m)}}}catch(l){const d=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),h=l instanceof Error?l.message:String(l);throw new Error(d+(h.length>0?": ".concat(h):""))}return s},readScalar(i,e,n){return No(i,e,n??ks.BIGINT,!0)},writeScalar(i,e,n){if(e!==void 0&&(n||gS(i,e)))return vc(i,e)},debug:Wn}}function Wn(i){if(i===null)return"null";switch(typeof i){case"object":return Array.isArray(i)?"array":"object";case"string":return i.length>100?"string":'"'.concat(i.split('"').join('\\"'),'"');default:return String(i)}}function Iy(i,e,n,s,r){let l=n.localName;if(n.repeated){if(pt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(e)));const d=i[l];for(const h of e){if(h===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(h)));switch(n.kind){case"message":d.push(n.T.fromJson(h,s));break;case"enum":const f=Fh(n.T,h,s.ignoreUnknownFields,!0);f!==gc&&d.push(f);break;case"scalar":try{d.push(No(n.T,h,n.L,!0))}catch(m){let v="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(h));throw m instanceof Error&&m.message.length>0&&(v+=": ".concat(m.message)),new Error(v)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(e)));const d=i[l];for(const[h,f]of Object.entries(e)){if(f===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let m;try{m=e2(n.K,h)}catch(v){let y="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(e));throw v instanceof Error&&v.message.length>0&&(y+=": ".concat(v.message)),new Error(y)}switch(n.V.kind){case"message":d[m]=n.V.T.fromJson(f,s);break;case"enum":const v=Fh(n.V.T,f,s.ignoreUnknownFields,!0);v!==gc&&(d[m]=v);break;case"scalar":try{d[m]=No(n.V.T,f,ks.BIGINT,!0)}catch(y){let x="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(e));throw y instanceof Error&&y.message.length>0&&(x+=": ".concat(y.message)),new Error(x)}break}}}else switch(n.oneof&&(i=i[n.oneof.localName]={case:l},l="value"),n.kind){case"message":const d=n.T;if(e===null&&d.typeName!="google.protobuf.Value")return;let h=i[l];_i(h)?h.fromJson(e,s):(i[l]=h=d.fromJson(e,s),d.fieldWrapper&&!n.oneof&&(i[l]=d.fieldWrapper.unwrapField(h)));break;case"enum":const f=Fh(n.T,e,s.ignoreUnknownFields,!1);switch(f){case Lc:Dy(n,i);break;case gc:break;default:i[l]=f;break}break;case"scalar":try{const m=No(n.T,e,n.L,!1);switch(m){case Lc:Dy(n,i);break;default:i[l]=m;break}}catch(m){let v="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Wn(e));throw m instanceof Error&&m.message.length>0&&(v+=": ".concat(m.message)),new Error(v)}break}}function e2(i,e){if(i===Z.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return No(i,e,ks.BIGINT,!0).toString()}function No(i,e,n,s){if(e===null)return s?hr(i,n):Lc;switch(i){case Z.DOUBLE:case Z.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return i==Z.FLOAT&&cS(r),r;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:let l;if(typeof e=="number"?l=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(l=Number(e)),l===void 0)break;return i==Z.UINT32||i==Z.FIXED32?Sf(l):mc(l),l;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(typeof e!="number"&&typeof e!="string")break;const d=ct.parse(e);return n?d.toString():d;case Z.FIXED64:case Z.UINT64:if(typeof e!="number"&&typeof e!="string")break;const h=ct.uParse(e);return n?h.toString():h;case Z.BOOL:if(typeof e!="boolean")break;return e;case Z.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case Z.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return yS.dec(e)}throw new Error}function Fh(i,e,n,s){if(e===null)return i.typeName=="google.protobuf.NullValue"?0:s?i.values[0].no:Lc;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=i.findName(e);if(r!==void 0)return r.no;if(n)return gc;break}throw new Error("cannot decode enum ".concat(i.typeName," from JSON: ").concat(Wn(e)))}function t2(i){return i.repeated||i.kind=="map"?!0:!(i.oneof||i.kind=="message"||i.opt||i.req)}function Uy(i,e,n){if(i.kind=="map"){pt(typeof e=="object"&&e!=null);const s={},r=Object.entries(e);switch(i.V.kind){case"scalar":for(const[d,h]of r)s[d.toString()]=vc(i.V.T,h);break;case"message":for(const[d,h]of r)s[d.toString()]=h.toJson(n);break;case"enum":const l=i.V.T;for(const[d,h]of r)s[d.toString()]=Vh(l,h,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?s:void 0}if(i.repeated){pt(Array.isArray(e));const s=[];switch(i.kind){case"scalar":for(let r=0;r<e.length;r++)s.push(vc(i.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)s.push(Vh(i.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)s.push(e[r].toJson(n));break}return n.emitDefaultValues||s.length>0?s:void 0}switch(i.kind){case"scalar":return vc(i.T,e);case"enum":return Vh(i.T,e,n.enumAsInteger);case"message":return TS(i.T,e).toJson(n)}}function Vh(i,e,n){var s;if(pt(typeof e=="number"),i.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=i.findNumber(e);return(s=r?.name)!==null&&s!==void 0?s:e}function vc(i,e){switch(i){case Z.INT32:case Z.SFIXED32:case Z.SINT32:case Z.FIXED32:case Z.UINT32:return pt(typeof e=="number"),e;case Z.FLOAT:case Z.DOUBLE:return pt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case Z.STRING:return pt(typeof e=="string"),e;case Z.BOOL:return pt(typeof e=="boolean"),e;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return pt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case Z.BYTES:return pt(e instanceof Uint8Array),yS.enc(e)}}const Wa=Symbol("@bufbuild/protobuf/unknown-fields"),zy={readUnknownFields:!0,readerFactory:i=>new G_(i)},By={writeUnknownFields:!0,writerFactory:()=>new H_};function n2(i){return i?Object.assign(Object.assign({},zy),i):zy}function i2(i){return i?Object.assign(Object.assign({},By),i):By}function s2(){return{makeReadOptions:n2,makeWriteOptions:i2,listUnknownFields(i){var e;return(e=i[Wa])!==null&&e!==void 0?e:[]},discardUnknownFields(i){delete i[Wa]},writeUnknownFields(i,e){const s=i[Wa];if(s)for(const r of s)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(i,e,n,s){const r=i;Array.isArray(r[Wa])||(r[Wa]=[]),r[Wa].push({no:e,wireType:n,data:s})},readMessage(i,e,n,s,r){const l=i.getType(),d=r?e.len:e.pos+n;let h,f;for(;e.pos<d&&([h,f]=e.tag(),!(r===!0&&f==St.EndGroup));){const m=l.fields.find(h);if(!m){const v=e.skip(f,h);s.readUnknownFields&&this.onUnknownField(i,h,f,v);continue}qy(i,e,m,f,s)}if(r&&(f!=St.EndGroup||h!==n))throw new Error("invalid end group tag")},readField:qy,writeMessage(i,e,n){const s=i.getType();for(const r of s.fields.byNumber()){if(!SS(r,i)){if(r.req)throw new Error("cannot encode field ".concat(s.typeName,".").concat(r.name," to binary: required field not set"));continue}const l=r.oneof?i[r.oneof.localName].value:i[r.localName];Fy(r,l,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(i,e),e},writeField(i,e,n,s){e!==void 0&&Fy(i,e,n,s)}}}function qy(i,e,n,s,r){let{repeated:l,localName:d}=n;switch(n.oneof&&(i=i[n.oneof.localName],i.case!=d&&delete i.value,i.case=d,d="value"),n.kind){case"scalar":case"enum":const h=n.kind=="enum"?Z.INT32:n.T;let f=Ic;if(n.kind=="scalar"&&n.L>0&&(f=r2),l){let x=i[d];if(s==St.LengthDelimited&&h!=Z.STRING&&h!=Z.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)x.push(f(e,h))}else x.push(f(e,h))}else i[d]=f(e,h);break;case"message":const m=n.T;l?i[d].push(yc(e,new m,r,n)):_i(i[d])?yc(e,i[d],r,n):(i[d]=yc(e,new m,r,n),m.fieldWrapper&&!n.oneof&&!n.repeated&&(i[d]=m.fieldWrapper.unwrapField(i[d])));break;case"map":let[v,y]=a2(n,e,r);i[d][v]=y;break}}function yc(i,e,n,s){const r=e.getType().runtime.bin,l=s?.delimited;return r.readMessage(e,i,l?s.no:i.uint32(),n,l),e}function a2(i,e,n){const s=e.uint32(),r=e.pos+s;let l,d;for(;e.pos<r;){const[h]=e.tag();switch(h){case 1:l=Ic(e,i.K);break;case 2:switch(i.V.kind){case"scalar":d=Ic(e,i.V.T);break;case"enum":d=e.int32();break;case"message":d=yc(e,new i.V.T,n,void 0);break}break}}if(l===void 0&&(l=hr(i.K,ks.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),d===void 0)switch(i.V.kind){case"scalar":d=hr(i.V.T,ks.BIGINT);break;case"enum":d=i.V.T.values[0].no;break;case"message":d=new i.V.T;break}return[l,d]}function r2(i,e){const n=Ic(i,e);return typeof n=="bigint"?n.toString():n}function Ic(i,e){switch(e){case Z.STRING:return i.string();case Z.BOOL:return i.bool();case Z.DOUBLE:return i.double();case Z.FLOAT:return i.float();case Z.INT32:return i.int32();case Z.INT64:return i.int64();case Z.UINT64:return i.uint64();case Z.FIXED64:return i.fixed64();case Z.BYTES:return i.bytes();case Z.FIXED32:return i.fixed32();case Z.SFIXED32:return i.sfixed32();case Z.SFIXED64:return i.sfixed64();case Z.SINT64:return i.sint64();case Z.UINT32:return i.uint32();case Z.SINT32:return i.sint32()}}function Fy(i,e,n,s){pt(e!==void 0);const r=i.repeated;switch(i.kind){case"scalar":case"enum":let l=i.kind=="enum"?Z.INT32:i.T;if(r)if(pt(Array.isArray(e)),i.packed)l2(n,l,i.no,e);else for(const d of e)wo(n,l,i.no,d);else wo(n,l,i.no,e);break;case"message":if(r){pt(Array.isArray(e));for(const d of e)Vy(n,s,i,d)}else Vy(n,s,i,e);break;case"map":pt(typeof e=="object"&&e!=null);for(const[d,h]of Object.entries(e))o2(n,s,i,d,h);break}}function o2(i,e,n,s,r){i.tag(n.no,St.LengthDelimited),i.fork();let l=s;switch(n.K){case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:l=Number.parseInt(s);break;case Z.BOOL:pt(s=="true"||s=="false"),l=s=="true";break}switch(wo(i,n.K,1,l),n.V.kind){case"scalar":wo(i,n.V.T,2,r);break;case"enum":wo(i,Z.INT32,2,r);break;case"message":pt(r!==void 0),i.tag(2,St.LengthDelimited).bytes(r.toBinary(e));break}i.join()}function Vy(i,e,n,s){const r=TS(n.T,s);n.delimited?i.tag(n.no,St.StartGroup).raw(r.toBinary(e)).tag(n.no,St.EndGroup):i.tag(n.no,St.LengthDelimited).bytes(r.toBinary(e))}function wo(i,e,n,s){pt(s!==void 0);let[r,l]=CS(e);i.tag(n,r)[l](s)}function l2(i,e,n,s){if(!s.length)return;i.tag(n,St.LengthDelimited).fork();let[,r]=CS(e);for(let l=0;l<s.length;l++)i[r](s[l]);i.join()}function CS(i){let e=St.Varint;switch(i){case Z.BYTES:case Z.STRING:e=St.LengthDelimited;break;case Z.DOUBLE:case Z.FIXED64:case Z.SFIXED64:e=St.Bit64;break;case Z.FIXED32:case Z.SFIXED32:case Z.FLOAT:e=St.Bit32;break}const n=Z[i].toLowerCase();return[e,n]}function c2(){return{setEnumType:dS,initPartial(i,e){if(i===void 0)return;const n=e.getType();for(const s of n.fields.byMember()){const r=s.localName,l=e,d=i;if(d[r]!=null)switch(s.kind){case"oneof":const h=d[r].case;if(h===void 0)continue;const f=s.findField(h);let m=d[r].value;f&&f.kind=="message"&&!_i(m,f.T)?m=new f.T(m):f&&f.kind==="scalar"&&f.T===Z.BYTES&&(m=vo(m)),l[r]={case:h,value:m};break;case"scalar":case"enum":let v=d[r];s.T===Z.BYTES&&(v=s.repeated?v.map(vo):vo(v)),l[r]=v;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===Z.BYTES)for(const[S,k]of Object.entries(d[r]))l[r][S]=vo(k);else Object.assign(l[r],d[r]);break;case"message":const x=s.V.T;for(const S of Object.keys(d[r])){let k=d[r][S];x.fieldWrapper||(k=new x(k)),l[r][S]=k}break}break;case"message":const y=s.T;if(s.repeated)l[r]=d[r].map(x=>_i(x,y)?x:new y(x));else{const x=d[r];y.fieldWrapper?y.typeName==="google.protobuf.BytesValue"?l[r]=vo(x):l[r]=x:l[r]=_i(x,y)?x:new y(x)}break}}},equals(i,e,n){return e===n?!0:!e||!n?!1:i.fields.byMember().every(s=>{const r=e[s.localName],l=n[s.localName];if(s.repeated){if(r.length!==l.length)return!1;switch(s.kind){case"message":return r.every((d,h)=>s.T.equals(d,l[h]));case"scalar":return r.every((d,h)=>ps(s.T,d,l[h]));case"enum":return r.every((d,h)=>ps(Z.INT32,d,l[h]))}throw new Error("repeated cannot contain ".concat(s.kind))}switch(s.kind){case"message":let d=r,h=l;return s.T.fieldWrapper&&(d!==void 0&&!_i(d)&&(d=s.T.fieldWrapper.wrapField(d)),h!==void 0&&!_i(h)&&(h=s.T.fieldWrapper.wrapField(h))),s.T.equals(d,h);case"enum":return ps(Z.INT32,r,l);case"scalar":return ps(s.T,r,l);case"oneof":if(r.case!==l.case)return!1;const f=s.findField(r.case);if(f===void 0)return!0;switch(f.kind){case"message":return f.T.equals(r.value,l.value);case"enum":return ps(Z.INT32,r.value,l.value);case"scalar":return ps(f.T,r.value,l.value)}throw new Error("oneof cannot contain ".concat(f.kind));case"map":const m=Object.keys(r).concat(Object.keys(l));switch(s.V.kind){case"message":const v=s.V.T;return m.every(x=>v.equals(r[x],l[x]));case"enum":return m.every(x=>ps(Z.INT32,r[x],l[x]));case"scalar":const y=s.V.T;return m.every(x=>ps(y,r[x],l[x]))}break}})},clone(i){const e=i.getType(),n=new e,s=n;for(const r of e.fields.byMember()){const l=i[r.localName];let d;if(r.repeated)d=l.map(uc);else if(r.kind=="map"){d=s[r.localName];for(const[h,f]of Object.entries(l))d[h]=uc(f)}else r.kind=="oneof"?d=r.findField(l.case)?{case:l.case,value:uc(l.value)}:{case:void 0}:d=uc(l);s[r.localName]=d}for(const r of e.runtime.bin.listUnknownFields(i))e.runtime.bin.onUnknownField(s,r.no,r.wireType,r.data);return n}}}function uc(i){if(i===void 0)return i;if(_i(i))return i.clone();if(i instanceof Uint8Array){const e=new Uint8Array(i.byteLength);return e.set(i),e}return i}function vo(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function u2(i,e,n){return{syntax:i,json:W_(),bin:s2(),util:Object.assign(Object.assign({},c2()),{newFieldList:e,initFields:n}),makeMessageType(s,r,l){return U_(this,s,r,l)},makeEnum:I_,makeEnumType:hS,getEnumType:L_,makeExtension(s,r,l){return K_(this,s,r,l)}}}class d2{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const s of this.list())n[s.jsonName]=n[s.name]=s;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const s of this.list())n[s.no]=s;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const s of this.list())s.oneof?s.oneof!==n&&(n=s.oneof,e.push(n)):e.push(s)}return this.members}}function kS(i,e){const n=ES(i);return e?n:v2(g2(n))}function h2(i){return kS(i,!1)}const f2=ES;function ES(i){let e=!1;const n=[];for(let s=0;s<i.length;s++){let r=i.charAt(s);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const m2=new Set(["constructor","toString","toJSON","valueOf"]),p2=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),NS=i=>"".concat(i,"$"),g2=i=>p2.has(i)?NS(i):i,v2=i=>m2.has(i)?NS(i):i;class y2{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=h2(e)}addField(e){pt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function b2(i,e){var n,s,r,l,d,h;const f=[];let m;for(const v of typeof i=="function"?i():i){const y=v;if(y.localName=kS(v.name,v.oneof!==void 0),y.jsonName=(n=v.jsonName)!==null&&n!==void 0?n:f2(v.name),y.repeated=(s=v.repeated)!==null&&s!==void 0?s:!1,v.kind=="scalar"&&(y.L=(r=v.L)!==null&&r!==void 0?r:ks.BIGINT),y.delimited=(l=v.delimited)!==null&&l!==void 0?l:!1,y.req=(d=v.req)!==null&&d!==void 0?d:!1,y.opt=(h=v.opt)!==null&&h!==void 0?h:!1,v.packed===void 0&&(y.packed=v.kind=="enum"||v.kind=="scalar"&&v.T!=Z.BYTES&&v.T!=Z.STRING),v.oneof!==void 0){const x=typeof v.oneof=="string"?v.oneof:v.oneof.name;(!m||m.name!=x)&&(m=new y2(x)),y.oneof=m,m.addField(y)}f.push(y)}return f}const B=u2("proto3",i=>new d2(i,e=>b2(e)),i=>{for(const e of i.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,s=i;if(e.repeated){s[n]=[];continue}switch(e.kind){case"oneof":s[n]={case:void 0};break;case"enum":s[n]=0;break;case"map":s[n]={};break;case"scalar":s[n]=hr(e.T,e.L);break}}});class on extends um{constructor(e){super(),this.seconds=ct.zero,this.nanos=0,B.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(B.json.debug(e)));const s=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!s)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(s[1]+"-"+s[2]+"-"+s[3]+"T"+s[4]+":"+s[5]+":"+s[6]+(s[8]?s[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ct.parse(r/1e3),this.nanos=0,s[7]&&(this.nanos=parseInt("1"+s[7]+"0".repeat(9-s[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let s="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?s="."+r.substring(0,3)+"Z":r.substring(6)==="000"?s="."+r.substring(0,6)+"Z":s="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",s)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return on.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new on({seconds:ct.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new on().fromBinary(e,n)}static fromJson(e,n){return new on().fromJson(e,n)}static fromJsonString(e,n){return new on().fromJsonString(e,n)}static equals(e,n){return B.util.equals(on,e,n)}}on.runtime=B;on.typeName="google.protobuf.Timestamp";on.fields=B.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const x2=B.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:on},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:S2,repeated:!0},{no:5,name:"events",kind:"message",T:C2,repeated:!0}]),S2=B.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:T2,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),T2=B.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:on},{no:3,name:"value",kind:"scalar",T:2}]),C2=B.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:on},{no:7,name:"normalized_end_timestamp",kind:"message",T:on,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),wS=B.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Fn=B.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Nt=B.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),hm=B.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Co=B.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Mo=B.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Hn=B.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),$s=B.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),k2=B.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Pt=B.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),tu=B.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Uc,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:BS}]),Uc=B.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),E2=B.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:B.getEnumType(Nt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ra=B.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:B.getEnumType(ar)},{no:4,name:"tracks",kind:"message",T:tr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:E2},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:B.getEnumType(Do)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:B.getEnumType(Hn)},{no:18,name:"kind_details",kind:"enum",T:B.getEnumType(N2),repeated:!0}]),ar=B.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Do=B.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),N2=B.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Ot=B.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),w2=B.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:xs,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:B.getEnumType(jS)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),tr=B.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:B.getEnumType(Fn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:B.getEnumType(Nt)},{no:10,name:"layers",kind:"message",T:xs,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:w2,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:B.getEnumType(Ot)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:BS},{no:19,name:"audio_features",kind:"enum",T:B.getEnumType(Pt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:B.getEnumType(wS)}]),xs=B.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:B.getEnumType(hm)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),jS=B.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),Qt=B.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:B.getEnumType(Oe)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:fm,oneof:"value"},{no:3,name:"speaker",kind:"message",T:j2,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:AS,oneof:"value"},{no:7,name:"transcription",kind:"message",T:R2,oneof:"value"},{no:8,name:"metrics",kind:"message",T:x2,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:zc,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:mm,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:pm,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:gm,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Bc,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:qc,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Fc,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:RS,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Oe=B.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),RS=B.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:B.getEnumType(Ot)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),_S=B.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:fm,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:zc,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:mm,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:pm,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:gm,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Bc,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:qc,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Fc,oneof:"value"}]),j2=B.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:OS,repeated:!0}]),OS=B.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),fm=B.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),AS=B.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),R2=B.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:_2,repeated:!0}]),_2=B.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),zc=B.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),mm=B.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),pm=B.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),gm=B.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:MS,oneof:"value"}]),MS=B.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),DS=B.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),PS=B.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:B.getEnumType(LS)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),LS=B.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),IS=B.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:B.getEnumType(US)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),US=B.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),zS=B.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Hy},{no:2,name:"screen",kind:"message",T:Hy},{no:3,name:"resume_connection",kind:"enum",T:B.getEnumType(Mo)},{no:4,name:"disabled_codecs",kind:"message",T:O2},{no:5,name:"force_relay",kind:"enum",T:B.getEnumType(Mo)}]),Hy=B.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:B.getEnumType(Mo)}]),O2=B.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Uc,repeated:!0},{no:2,name:"publish",kind:"message",T:Uc,repeated:!0}]),BS=B.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Tf=B.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),qS=B.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:B.getEnumType(Tf)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),FS=B.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Bc=B.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:B.getEnumType(Ot)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:qS,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:FS,oneof:"content_header"}],{localName:"DataStream_Header"}),qc=B.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Fc=B.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),A2=B.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),Vn=B.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Cf=B.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),M2=B.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),D2=B.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Es,oneof:"message"},{no:2,name:"answer",kind:"message",T:Es,oneof:"message"},{no:3,name:"trickle",kind:"message",T:nu,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Po,oneof:"message"},{no:5,name:"mute",kind:"message",T:iu,oneof:"message"},{no:6,name:"subscription",kind:"message",T:su,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:VS,oneof:"message"},{no:8,name:"leave",kind:"message",T:au,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:GS,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:JS,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Sm,oneof:"message"},{no:13,name:"simulate",kind:"message",T:$n,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:bm,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:$S,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:ym,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:HS,oneof:"message"}]),Gy=B.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:P2,oneof:"message"},{no:2,name:"answer",kind:"message",T:Es,oneof:"message"},{no:3,name:"offer",kind:"message",T:Es,oneof:"message"},{no:4,name:"trickle",kind:"message",T:nu,oneof:"message"},{no:5,name:"update",kind:"message",T:U2,oneof:"message"},{no:6,name:"track_published",kind:"message",T:vm,oneof:"message"},{no:8,name:"leave",kind:"message",T:au,oneof:"message"},{no:9,name:"mute",kind:"message",T:iu,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:z2,oneof:"message"},{no:11,name:"room_update",kind:"message",T:B2,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:F2,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:H2,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:K2,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:J2,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:I2,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:L2,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:X2,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:W2,oneof:"message"},{no:22,name:"request_response",kind:"message",T:eO,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:tO,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Q2,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:aO,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:Y2,oneof:"message"}]),kf=B.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:xs,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:B.getEnumType(jS)}]),Po=B.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:B.getEnumType(Fn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:B.getEnumType(Nt)},{no:9,name:"layers",kind:"message",T:xs,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:kf,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:B.getEnumType(Ot)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:B.getEnumType(wS)},{no:17,name:"audio_features",kind:"enum",T:B.getEnumType(Pt),repeated:!0}]),nu=B.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:B.getEnumType(Vn)},{no:3,name:"final",kind:"scalar",T:8}]),iu=B.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),P2=B.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:tu},{no:2,name:"participant",kind:"message",T:ra},{no:3,name:"other_participants",kind:"message",T:ra,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:KS,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:zS},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:PS},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Uc,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),L2=B.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:KS,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:zS},{no:3,name:"server_info",kind:"message",T:PS},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),vm=B.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:tr}]),I2=B.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Es=B.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),U2=B.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ra,repeated:!0}]),su=B.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:DS,repeated:!0}]),VS=B.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:B.getEnumType(hm)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),ym=B.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:B.getEnumType(Pt),repeated:!0}]),HS=B.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),au=B.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:B.getEnumType(Hn)},{no:3,name:"action",kind:"enum",T:B.getEnumType(rr)},{no:4,name:"regions",kind:"message",T:$2}]),rr=B.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),GS=B.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:xs,repeated:!0}]),bm=B.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),KS=B.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),z2=B.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:OS,repeated:!0}]),B2=B.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:tu}]),q2=B.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:B.getEnumType(Co)},{no:3,name:"score",kind:"scalar",T:2}]),F2=B.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:q2,repeated:!0}]),V2=B.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:B.getEnumType(Cf)}]),H2=B.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:V2,repeated:!0}]),xm=B.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:B.getEnumType(hm)},{no:2,name:"enabled",kind:"scalar",T:8}]),G2=B.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:xm,repeated:!0}]),K2=B.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:xm,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:G2,repeated:!0}]),Y2=B.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:A2,repeated:!0}]),YS=B.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),JS=B.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:YS,repeated:!0}]),J2=B.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Q2=B.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:tu},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:ra},{no:4,name:"other_participants",kind:"message",T:ra,repeated:!0}]),Sm=B.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Es},{no:2,name:"subscription",kind:"message",T:su},{no:3,name:"publish_tracks",kind:"message",T:vm,repeated:!0},{no:4,name:"data_channels",kind:"message",T:XS,repeated:!0},{no:5,name:"offer",kind:"message",T:Es},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:QS,repeated:!0}]),QS=B.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),XS=B.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:B.getEnumType(Vn)}]),$n=B.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:B.getEnumType(M2),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),$S=B.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),X2=B.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),$2=B.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Z2,repeated:!0}]),Z2=B.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),W2=B.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:B.getEnumType(k2)}]),eO=B.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:B.getEnumType(Tm)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:nu,oneof:"request"},{no:5,name:"add_track",kind:"message",T:Po,oneof:"request"},{no:6,name:"mute",kind:"message",T:iu,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:bm,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:ym,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:HS,oneof:"request"}]),Tm=B.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),tO=B.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ZS=B.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),nO=B.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:IS},{no:2,name:"connection_settings",kind:"message",T:ZS},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:Po,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:Es},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:B.getEnumType($s)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Sm}]),iO=B.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:B.getEnumType(sO)},{no:2,name:"join_request",kind:"scalar",T:12}]),sO=B.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),aO=B.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function rO(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bc={exports:{}},oO=bc.exports,Ky;function lO(){return Ky||(Ky=1,(function(i){(function(e,n){i.exports?i.exports=n():e.log=n()})(oO,function(){var e=function(){},n="undefined",s=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],l={},d=null;function h(C,w){var _=C[w];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function f(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function m(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&s?f:console[C]!==void 0?h(console,C):console.log!==void 0?h(console,"log"):e}function v(){for(var C=this.getLevel(),w=0;w<r.length;w++){var _=r[w];this[_]=w<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function y(C){return function(){typeof console!==n&&(v.call(this),this[C].apply(this,arguments))}}function x(C,w,_){return m(C)||y.apply(this,arguments)}function S(C,w){var _=this,L,F,j,M="loglevel";typeof C=="string"?M+=":"+C:typeof C=="symbol"&&(M=void 0);function P(he){var ve=(r[he]||"silent").toUpperCase();if(!(typeof window===n||!M)){try{window.localStorage[M]=ve;return}catch{}try{window.document.cookie=encodeURIComponent(M)+"="+ve+";"}catch{}}}function I(){var he;if(!(typeof window===n||!M)){try{he=window.localStorage[M]}catch{}if(typeof he===n)try{var ve=window.document.cookie,Re=encodeURIComponent(M),qe=ve.indexOf(Re+"=");qe!==-1&&(he=/^([^;]+)/.exec(ve.slice(qe+Re.length+1))[1])}catch{}return _.levels[he]===void 0&&(he=void 0),he}}function H(){if(!(typeof window===n||!M)){try{window.localStorage.removeItem(M)}catch{}try{window.document.cookie=encodeURIComponent(M)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function X(he){var ve=he;if(typeof ve=="string"&&_.levels[ve.toUpperCase()]!==void 0&&(ve=_.levels[ve.toUpperCase()]),typeof ve=="number"&&ve>=0&&ve<=_.levels.SILENT)return ve;throw new TypeError("log.setLevel() called with invalid level: "+he)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=w||x,_.getLevel=function(){return j??F??L},_.setLevel=function(he,ve){return j=X(he),ve!==!1&&P(j),v.call(_)},_.setDefaultLevel=function(he){F=X(he),I()||_.setLevel(he,!1)},_.resetLevel=function(){j=null,H(),v.call(_)},_.enableAll=function(he){_.setLevel(_.levels.TRACE,he)},_.disableAll=function(he){_.setLevel(_.levels.SILENT,he)},_.rebuild=function(){if(d!==_&&(L=X(d.getLevel())),v.call(_),d===_)for(var he in l)l[he].rebuild()},L=X(d?d.getLevel():"WARN");var te=I();te!=null&&(j=X(te)),v.call(_)}d=new S,d.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var _=l[w];return _||(_=l[w]=new S(w,d.methodFactory)),_};var k=typeof window!==n?window.log:void 0;return d.noConflict=function(){return typeof window!==n&&window.log===d&&(window.log=k),d},d.getLoggers=function(){return l},d.default=d,d})})(bc)),bc.exports}var ru=lO(),Ef;(function(i){i[i.trace=0]="trace",i[i.debug=1]="debug",i[i.info=2]="info",i[i.warn=3]="warn",i[i.error=4]="error",i[i.silent=5]="silent"})(Ef||(Ef={}));var Gn;(function(i){i.Default="livekit",i.Room="livekit-room",i.TokenSource="livekit-token-source",i.Participant="livekit-participant",i.Track="livekit-track",i.Publication="livekit-track-publication",i.Engine="livekit-engine",i.Signal="livekit-signal",i.PCManager="livekit-pc-manager",i.PCTransport="livekit-pc-transport",i.E2EE="lk-e2ee"})(Gn||(Gn={}));let Ae=ru.getLogger("livekit");Object.values(Gn).map(i=>ru.getLogger(i));Ae.setDefaultLevel(Ef.info);function Ui(i){const e=ru.getLogger(i);return e.setDefaultLevel(Ae.getLevel()),e}const cO=ru.getLogger("lk-e2ee"),yo=7e3,uO=[0,300,4*300,9*300,16*300,yo,yo,yo,yo,yo];class dO{constructor(e){this._retryDelays=e!==void 0?[...e]:uO}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function hO(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(n[s[r]]=i[s[r]]);return n}function N(i,e,n,s){function r(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function h(v){try{m(s.next(v))}catch(y){d(y)}}function f(v){try{m(s.throw(v))}catch(y){d(y)}}function m(v){v.done?l(v.value):r(v.value).then(h,f)}m((s=s.apply(i,e||[])).next())})}function Yy(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oi(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof Yy=="function"?Yy(i):i[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=i[l]&&function(d){return new Promise(function(h,f){d=i[l](d),r(h,f,d.done,d.value)})}}function r(l,d,h,f){Promise.resolve(f).then(function(m){l({value:m,done:h})},d)}}var dc={exports:{}},Jy;function fO(){if(Jy)return dc.exports;Jy=1;var i=typeof Reflect=="object"?Reflect:null,e=i&&typeof i.apply=="function"?i.apply:function(M,P,I){return Function.prototype.apply.call(M,P,I)},n;i&&typeof i.ownKeys=="function"?n=i.ownKeys:Object.getOwnPropertySymbols?n=function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:n=function(M){return Object.getOwnPropertyNames(M)};function s(j){console&&console.warn&&console.warn(j)}var r=Number.isNaN||function(M){return M!==M};function l(){l.init.call(this)}dc.exports=l,dc.exports.once=_,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var d=10;function h(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(j){if(typeof j!="number"||j<0||r(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");d=j}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||r(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this};function f(j){return j._maxListeners===void 0?l.defaultMaxListeners:j._maxListeners}l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(M){for(var P=[],I=1;I<arguments.length;I++)P.push(arguments[I]);var H=M==="error",X=this._events;if(X!==void 0)H=H&&X.error===void 0;else if(!H)return!1;if(H){var te;if(P.length>0&&(te=P[0]),te instanceof Error)throw te;var he=new Error("Unhandled error."+(te?" ("+te.message+")":""));throw he.context=te,he}var ve=X[M];if(ve===void 0)return!1;if(typeof ve=="function")e(ve,this,P);else for(var Re=ve.length,qe=k(ve,Re),I=0;I<Re;++I)e(qe[I],this,P);return!0};function m(j,M,P,I){var H,X,te;if(h(P),X=j._events,X===void 0?(X=j._events=Object.create(null),j._eventsCount=0):(X.newListener!==void 0&&(j.emit("newListener",M,P.listener?P.listener:P),X=j._events),te=X[M]),te===void 0)te=X[M]=P,++j._eventsCount;else if(typeof te=="function"?te=X[M]=I?[P,te]:[te,P]:I?te.unshift(P):te.push(P),H=f(j),H>0&&te.length>H&&!te.warned){te.warned=!0;var he=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");he.name="MaxListenersExceededWarning",he.emitter=j,he.type=M,he.count=te.length,s(he)}return j}l.prototype.addListener=function(M,P){return m(this,M,P,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(M,P){return m(this,M,P,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(j,M,P){var I={fired:!1,wrapFn:void 0,target:j,type:M,listener:P},H=v.bind(I);return H.listener=P,I.wrapFn=H,H}l.prototype.once=function(M,P){return h(P),this.on(M,y(this,M,P)),this},l.prototype.prependOnceListener=function(M,P){return h(P),this.prependListener(M,y(this,M,P)),this},l.prototype.removeListener=function(M,P){var I,H,X,te,he;if(h(P),H=this._events,H===void 0)return this;if(I=H[M],I===void 0)return this;if(I===P||I.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete H[M],H.removeListener&&this.emit("removeListener",M,I.listener||P));else if(typeof I!="function"){for(X=-1,te=I.length-1;te>=0;te--)if(I[te]===P||I[te].listener===P){he=I[te].listener,X=te;break}if(X<0)return this;X===0?I.shift():C(I,X),I.length===1&&(H[M]=I[0]),H.removeListener!==void 0&&this.emit("removeListener",M,he||P)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(M){var P,I,H;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[M]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[M]),this;if(arguments.length===0){var X=Object.keys(I),te;for(H=0;H<X.length;++H)te=X[H],te!=="removeListener"&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=I[M],typeof P=="function")this.removeListener(M,P);else if(P!==void 0)for(H=P.length-1;H>=0;H--)this.removeListener(M,P[H]);return this};function x(j,M,P){var I=j._events;if(I===void 0)return[];var H=I[M];return H===void 0?[]:typeof H=="function"?P?[H.listener||H]:[H]:P?w(H):k(H,H.length)}l.prototype.listeners=function(M){return x(this,M,!0)},l.prototype.rawListeners=function(M){return x(this,M,!1)},l.listenerCount=function(j,M){return typeof j.listenerCount=="function"?j.listenerCount(M):S.call(j,M)},l.prototype.listenerCount=S;function S(j){var M=this._events;if(M!==void 0){var P=M[j];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(j,M){for(var P=new Array(M),I=0;I<M;++I)P[I]=j[I];return P}function C(j,M){for(;M+1<j.length;M++)j[M]=j[M+1];j.pop()}function w(j){for(var M=new Array(j.length),P=0;P<M.length;++P)M[P]=j[P].listener||j[P];return M}function _(j,M){return new Promise(function(P,I){function H(te){j.removeListener(M,X),I(te)}function X(){typeof j.removeListener=="function"&&j.removeListener("error",H),P([].slice.call(arguments))}F(j,M,X,{once:!0}),M!=="error"&&L(j,H,{once:!0})})}function L(j,M,P){typeof j.on=="function"&&F(j,"error",M,P)}function F(j,M,P,I){if(typeof j.on=="function")I.once?j.once(M,P):j.on(M,P);else if(typeof j.addEventListener=="function")j.addEventListener(M,function H(X){I.once&&j.removeEventListener(M,H),P(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return dc.exports}var oi=fO();let WS=!0,eT=!0;function ko(i,e,n){const s=i.match(e);return s&&s.length>=n&&parseFloat(s[n],10)}function ua(i,e,n){if(!i.RTCPeerConnection)return;const s=i.RTCPeerConnection.prototype,r=s.addEventListener;s.addEventListener=function(d,h){if(d!==e)return r.apply(this,arguments);const f=m=>{const v=n(m);v&&(h.handleEvent?h.handleEvent(v):h(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,f),r.apply(this,[d,f])};const l=s.removeEventListener;s.removeEventListener=function(d,h){if(d!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const f=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[d,f])},Object.defineProperty(s,"on"+e,{get(){return this["_on"+e]},set(d){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),d&&this.addEventListener(e,this["_on"+e]=d)},enumerable:!0,configurable:!0})}function mO(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(WS=i,i?"adapter.js logging disabled":"adapter.js logging enabled")}function pO(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(eT=!i,"adapter.js deprecation warnings "+(i?"disabled":"enabled"))}function tT(){if(typeof window=="object"){if(WS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Cm(i,e){eT&&console.warn(i+" is deprecated, please use "+e+" instead.")}function gO(i){const e={browser:null,version:null};if(typeof i>"u"||!i.navigator||!i.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=i;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ko(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||i.isSecureContext===!1&&i.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ko(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(i.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ko(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=i.RTCRtpTransceiver&&"currentDirection"in i.RTCRtpTransceiver.prototype,e._safariVersion=ko(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Qy(i){return Object.prototype.toString.call(i)==="[object Object]"}function nT(i){return Qy(i)?Object.keys(i).reduce(function(e,n){const s=Qy(i[n]),r=s?nT(i[n]):i[n],l=s&&!Object.keys(r).length;return r===void 0||l?e:Object.assign(e,{[n]:r})},{}):i}function Nf(i,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(s=>{s.endsWith("Id")?Nf(i,i.get(e[s]),n):s.endsWith("Ids")&&e[s].forEach(r=>{Nf(i,i.get(r),n)})}))}function Xy(i,e,n){const s=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const l=[];return i.forEach(d=>{d.type==="track"&&d.trackIdentifier===e.id&&l.push(d)}),l.forEach(d=>{i.forEach(h=>{h.type===s&&h.trackId===d.id&&Nf(i,h,r)})}),r}const $y=tT;function iT(i,e){const n=i&&i.navigator;if(!n.mediaDevices)return;const s=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const f={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const v=typeof h[m]=="object"?h[m]:{ideal:h[m]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const y=function(x,S){return x?x+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(v.ideal!==void 0){f.optional=f.optional||[];let x={};typeof v.ideal=="number"?(x[y("min",m)]=v.ideal,f.optional.push(x),x={},x[y("max",m)]=v.ideal,f.optional.push(x)):(x[y("",m)]=v.ideal,f.optional.push(x))}v.exact!==void 0&&typeof v.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[y("",m)]=v.exact):["min","max"].forEach(x=>{v[x]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[y(x,m)]=v[x])})}),h.advanced&&(f.optional=(f.optional||[]).concat(h.advanced)),f},r=function(h,f){if(e.version>=61)return f(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const m=function(v,y,x){y in v&&!(x in v)&&(v[x]=v[y],delete v[y])};h=JSON.parse(JSON.stringify(h)),m(h.audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=s(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const v=e.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete h.video.facingMode;let y;if(m.exact==="environment"||m.ideal==="environment"?y=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter(k=>k.kind==="videoinput");let S=x.find(k=>y.some(C=>k.label.toLowerCase().includes(C)));return!S&&x.length&&y.includes("back")&&(S=x[x.length-1]),S&&(h.video.deviceId=m.exact?{exact:S.deviceId}:{ideal:S.deviceId}),h.video=s(h.video),$y("chrome: "+JSON.stringify(h)),f(h)})}h.video=s(h.video)}return $y("chrome: "+JSON.stringify(h)),f(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(h,f,m){r(h,v=>{n.webkitGetUserMedia(v,f,y=>{m&&m(l(y))})})};if(n.getUserMedia=d.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return r(f,m=>h(m).then(v=>{if(m.audio&&!v.getAudioTracks().length||m.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(l(v))))}}}function sT(i){i.MediaStream=i.MediaStream||i.webkitMediaStream}function aT(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("ontrack"in i.RTCPeerConnection.prototype)){Object.defineProperty(i.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",r=>{let l;i.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===r.track.id):l={track:r.track};const d=new Event("track");d.track=r.track,d.receiver=l,d.transceiver={receiver:l},d.streams=[s.stream],this.dispatchEvent(d)}),s.stream.getTracks().forEach(r=>{let l;i.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===r.id):l={track:r};const d=new Event("track");d.track=r,d.receiver=l,d.transceiver={receiver:l},d.streams=[s.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ua(i,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function rT(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("getSenders"in i.RTCPeerConnection.prototype)&&"createDTMFSender"in i.RTCPeerConnection.prototype){const e=function(r,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=r.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:r}};if(!i.RTCPeerConnection.prototype.getSenders){i.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(h,f){let m=r.apply(this,arguments);return m||(m=e(this,h),this._senders.push(m)),m};const l=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const f=this._senders.indexOf(h);f!==-1&&this._senders.splice(f,1)}}const n=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(d=>{this._senders.push(e(this,d))})};const s=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(d=>{const h=this._senders.find(f=>f.track===d);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof i=="object"&&i.RTCPeerConnection&&"getSenders"in i.RTCPeerConnection.prototype&&"createDTMFSender"in i.RTCPeerConnection.prototype&&i.RTCRtpSender&&!("dtmf"in i.RTCRtpSender.prototype)){const e=i.RTCPeerConnection.prototype.getSenders;i.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(r=>r._pc=this),s},Object.defineProperty(i.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function oT(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&i.RTCRtpReceiver))return;if(!("getStats"in i.RTCRtpSender.prototype)){const n=i.RTCPeerConnection.prototype.getSenders;n&&(i.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(d=>d._pc=this),l});const s=i.RTCPeerConnection.prototype.addTrack;s&&(i.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),i.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>Xy(d,l.track,!0))}}if(!("getStats"in i.RTCRtpReceiver.prototype)){const n=i.RTCPeerConnection.prototype.getReceivers;n&&(i.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(l=>l._pc=this),r}),ua(i,"track",s=>(s.receiver._pc=s.srcElement,s)),i.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(l=>Xy(l,r.track,!1))}}if(!("getStats"in i.RTCRtpSender.prototype&&"getStats"in i.RTCRtpReceiver.prototype))return;const e=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof i.MediaStreamTrack){const s=arguments[0];let r,l,d;return this.getSenders().forEach(h=>{h.track===s&&(r?d=!0:r=h)}),this.getReceivers().forEach(h=>(h.track===s&&(l?d=!0:l=h),h.track===s)),d||r&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function lT(i){i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(d,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(f)===-1&&this._shimmedLocalStreams[h.id].push(f):this._shimmedLocalStreams[h.id]=[h,f],f};const n=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[d.id]=[d].concat(f)};const s=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],s.apply(this,arguments)};const r=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const f=this._shimmedLocalStreams[h].indexOf(d);f!==-1&&this._shimmedLocalStreams[h].splice(f,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),r.apply(this,arguments)}}function cT(i,e){if(!i.RTCPeerConnection)return;if(i.RTCPeerConnection.prototype.addTrack&&e.version>=65)return lT(i);const n=i.RTCPeerConnection.prototype.getLocalStreams;i.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(y=>this._reverseStreams[y.id])};const s=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(y=>{if(this.getSenders().find(S=>S.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const y=new i.MediaStream(v.getTracks());this._streams[v.id]=y,this._reverseStreams[y.id]=v,v=y}s.apply(this,[v])};const r=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},i.RTCPeerConnection.prototype.addTrack=function(v,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(C=>C===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[y.id];if(k)k.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new i.MediaStream([v]);this._streams[y.id]=C,this._reverseStreams[C.id]=y,this.addStream(C)}return this.getSenders().find(C=>C.track===v)};function l(m,v){let y=v.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const S=m._reverseStreams[x],k=m._streams[S.id];y=y.replace(new RegExp(k.id,"g"),S.id)}),new RTCSessionDescription({type:v.type,sdp:y})}function d(m,v){let y=v.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const S=m._reverseStreams[x],k=m._streams[S.id];y=y.replace(new RegExp(S.id,"g"),k.id)}),new RTCSessionDescription({type:v.type,sdp:y})}["createOffer","createAnswer"].forEach(function(m){const v=i.RTCPeerConnection.prototype[m],y={[m](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[k=>{const C=l(this,k);x[0].apply(null,[C])},k=>{x[1]&&x[1].apply(null,k)},arguments[2]]):v.apply(this,arguments).then(k=>l(this,k))}};i.RTCPeerConnection.prototype[m]=y[m]});const h=i.RTCPeerConnection.prototype.setLocalDescription;i.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=d(this,arguments[0]),h.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(i.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(i.RTCPeerConnection.prototype,"localDescription",{get(){const m=f.get.apply(this);return m.type===""?m:l(this,m)}}),i.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(C=>v.track===C)&&(x=this._streams[S])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function wf(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=i.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};i.RTCPeerConnection.prototype[n]=r[n]})}function uT(i,e){ua(i,"negotiationneeded",n=>{const s=n.target;if(!((e.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}var Zy=Object.freeze({__proto__:null,fixNegotiationNeeded:uT,shimAddTrackRemoveTrack:cT,shimAddTrackRemoveTrackWithNative:lT,shimGetSendersWithDtmf:rT,shimGetUserMedia:iT,shimMediaStream:sT,shimOnTrack:aT,shimPeerConnection:wf,shimSenderReceiverGetStats:oT});function dT(i,e){const n=i&&i.navigator,s=i&&i.MediaStreamTrack;if(n.getUserMedia=function(r,l,d){Cm("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(l,d)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(d,h,f){h in d&&!(f in d)&&(d[f]=d[h],delete d[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),r(d.audio,"autoGainControl","mozAutoGainControl"),r(d.audio,"noiseSuppression","mozNoiseSuppression")),l(d)},s&&s.prototype.getSettings){const d=s.prototype.getSettings;s.prototype.getSettings=function(){const h=d.apply(this,arguments);return r(h,"mozAutoGainControl","autoGainControl"),r(h,"mozNoiseSuppression","noiseSuppression"),h}}if(s&&s.prototype.applyConstraints){const d=s.prototype.applyConstraints;s.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),r(h,"autoGainControl","mozAutoGainControl"),r(h,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[h])}}}}function vO(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(i.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return s.video===!0?s.video={mediaSource:e}:s.video.mediaSource=e,i.navigator.mediaDevices.getUserMedia(s)})}function hT(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function jf(i,e){if(typeof i!="object"||!(i.RTCPeerConnection||i.mozRTCPeerConnection))return;!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const l=i.RTCPeerConnection.prototype[r],d={[r](){return arguments[0]=new(r==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};i.RTCPeerConnection.prototype[r]=d[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[l,d,h]=arguments;return s.apply(this,[l||null]).then(f=>{if(e.version<53&&!d)try{f.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;f.forEach((v,y)=>{f.set(y,Object.assign({},v,{type:n[v.type]||v.type}))})}return f}).then(d,h)}}function fT(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpSender.prototype)return;const e=i.RTCPeerConnection.prototype.getSenders;e&&(i.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(l=>l._pc=this),r});const n=i.RTCPeerConnection.prototype.addTrack;n&&(i.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),i.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function mT(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpReceiver.prototype)return;const e=i.RTCPeerConnection.prototype.getReceivers;e&&(i.RTCPeerConnection.prototype.getReceivers=function(){const s=e.apply(this,[]);return s.forEach(r=>r._pc=this),s}),ua(i,"track",n=>(n.receiver._pc=n.srcElement,n)),i.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function pT(i){!i.RTCPeerConnection||"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(n){Cm("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function gT(i){i.DataChannel&&!i.RTCDataChannel&&(i.RTCDataChannel=i.DataChannel)}function vT(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.addTransceiver;e&&(i.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const r=s.length>0;r&&s.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(r){const{sender:d}=l,h=d.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=s,d.sendEncodings=s,this.setParametersPromises.push(d.setParameters(h).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return l})}function yT(i){if(!(typeof i=="object"&&i.RTCRtpSender))return;const e=i.RTCRtpSender.prototype.getParameters;e&&(i.RTCRtpSender.prototype.getParameters=function(){const s=e.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function bT(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function xT(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createAnswer;i.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Wy=Object.freeze({__proto__:null,shimAddTransceiver:vT,shimCreateAnswer:xT,shimCreateOffer:bT,shimGetDisplayMedia:vO,shimGetParameters:yT,shimGetUserMedia:dT,shimOnTrack:hT,shimPeerConnection:jf,shimRTCDataChannel:gT,shimReceiverGetStats:mT,shimRemoveStream:pT,shimSenderGetStats:fT});function ST(i){if(!(typeof i!="object"||!i.RTCPeerConnection)){if("getLocalStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in i.RTCPeerConnection.prototype)){const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(r=>e.call(this,r,s)),s.getVideoTracks().forEach(r=>e.call(this,r,s))},i.RTCPeerConnection.prototype.addTrack=function(s){for(var r=arguments.length,l=new Array(r>1?r-1:0),d=1;d<r;d++)l[d-1]=arguments[d];return l&&l.forEach(h=>{this._localStreams?this._localStreams.includes(h)||this._localStreams.push(h):this._localStreams=[h]}),e.apply(this,arguments)}}"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const r=n.getTracks();this.getSenders().forEach(l=>{r.includes(l.track)&&this.removeTrack(l)})})}}function TT(i){if(!(typeof i!="object"||!i.RTCPeerConnection)&&("getRemoteStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in i.RTCPeerConnection.prototype))){Object.defineProperty(i.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const l=new Event("addstream");l.stream=r,this.dispatchEvent(l)})})}});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,s.dispatchEvent(d)})}),e.apply(s,arguments)}}}function CT(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype,n=e.createOffer,s=e.createAnswer,r=e.setLocalDescription,l=e.setRemoteDescription,d=e.addIceCandidate;e.createOffer=function(m,v){const y=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[y]);return v?(x.then(m,v),Promise.resolve()):x},e.createAnswer=function(m,v){const y=arguments.length>=2?arguments[2]:arguments[0],x=s.apply(this,[y]);return v?(x.then(m,v),Promise.resolve()):x};let h=function(f,m,v){const y=r.apply(this,[f]);return v?(y.then(m,v),Promise.resolve()):y};e.setLocalDescription=h,h=function(f,m,v){const y=l.apply(this,[f]);return v?(y.then(m,v),Promise.resolve()):y},e.setRemoteDescription=h,h=function(f,m,v){const y=d.apply(this,[f]);return v?(y.then(m,v),Promise.resolve()):y},e.addIceCandidate=h}function kT(i){const e=i&&i.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,s=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>s(ET(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(s,r,l){e.mediaDevices.getUserMedia(s).then(r,l)}).bind(e))}function ET(i){return i&&i.video!==void 0?Object.assign({},i,{video:nT(i.video)}):i}function NT(i){if(!i.RTCPeerConnection)return;const e=i.RTCPeerConnection;i.RTCPeerConnection=function(s,r){if(s&&s.iceServers){const l=[];for(let d=0;d<s.iceServers.length;d++){let h=s.iceServers[d];h.urls===void 0&&h.url?(Cm("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(s.iceServers[d])}s.iceServers=l}return new e(s,r)},i.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(i.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function wT(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function jT(i){const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const r=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):s.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(d=>d.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function RT(i){typeof i!="object"||i.AudioContext||(i.AudioContext=i.webkitAudioContext)}var eb=Object.freeze({__proto__:null,shimAudioContext:RT,shimCallbacksAPI:CT,shimConstraints:ET,shimCreateOfferLegacy:jT,shimGetUserMedia:kT,shimLocalStreamsAPI:ST,shimRTCIceServerUrls:NT,shimRemoteStreamsAPI:TT,shimTrackEventTransceiver:wT}),Hh={exports:{}},tb;function yO(){return tb||(tb=1,(function(i){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,l)=>(l>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const s=e.splitSections(n);return s&&s[0]},e.getMediaSections=function(n){const s=e.splitSections(n);return s.shift(),s},e.matchPrefix=function(n,s){return e.splitLines(n).filter(r=>r.indexOf(s)===0)},e.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const r={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":r.relatedAddress=s[l+1];break;case"rport":r.relatedPort=parseInt(s[l+1],10);break;case"tcptype":r.tcpType=s[l+1];break;case"ufrag":r.ufrag=s[l+1],r.usernameFragment=s[l+1];break;default:r[s[l]]===void 0&&(r[s[l]]=s[l+1]);break}return r},e.writeCandidate=function(n){const s=[];s.push(n.foundation);const r=n.component;r==="rtp"?s.push(1):r==="rtcp"?s.push(2):s.push(r),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const l=n.type;return s.push("typ"),s.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let s=n.substring(9).split(" ");const r={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),r.name=s[0],r.clockRate=parseInt(s[1],10),r.channels=s.length===3?parseInt(s[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const s={};let r;const l=n.substring(n.indexOf(" ")+1).split(";");for(let d=0;d<l.length;d++)r=l[d].trim().split("="),s[r[0].trim()]=r[1];return s},e.writeFmtp=function(n){let s="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(d=>{n.parameters[d]!==void 0?l.push(d+"="+n.parameters[d]):l.push(d)}),s+="a=fmtp:"+r+" "+l.join(";")+`\r
`}return s},e.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},e.writeRtcpFb=function(n){let s="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+r+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},e.parseSsrcMedia=function(n){const s=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,s),10)},l=n.indexOf(":",s);return l>-1?(r.attribute=n.substring(s+1,l),r.value=n.substring(l+1)):r.attribute=n.substring(s+1),r},e.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(r=>parseInt(r,10))}},e.getMid=function(n){const s=e.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},e.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},e.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:e.matchPrefix(n+s,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,s){let r="a=setup:"+s+`\r
`;return n.fingerprints.forEach(l=>{r+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),r},e.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,s){return e.matchPrefix(n+s,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,s){const r=e.matchPrefix(n+s,"a=ice-ufrag:")[0],l=e.matchPrefix(n+s,"a=ice-pwd:")[0];return r&&l?{usernameFragment:r.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},e.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(n)[0].split(" ");s.profile=l[2];for(let h=3;h<l.length;h++){const f=l[h],m=e.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(m){const v=e.parseRtpMap(m),y=e.matchPrefix(n,"a=fmtp:"+f+" ");switch(v.parameters=y.length?e.parseFmtp(y[0]):{},v.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(e.parseRtcpFb),s.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{s.headerExtensions.push(e.parseExtmap(h))});const d=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return s.codecs.forEach(h=>{d.forEach(f=>{h.rtcpFeedback.find(v=>v.type===f.type&&v.parameter===f.parameter)||h.rtcpFeedback.push(f)})}),s},e.writeRtpDescription=function(n,s){let r="";r+="m="+n+" ",r+=s.codecs.length>0?"9":"0",r+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=s.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(d=>{r+=e.writeRtpMap(d),r+=e.writeFmtp(d),r+=e.writeRtcpFb(d)});let l=0;return s.codecs.forEach(d=>{d.maxptime>l&&(l=d.maxptime)}),l>0&&(r+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(d=>{r+=e.writeExtmap(d)}),r},e.parseRtpEncodingParameters=function(n){const s=[],r=e.parseRtpParameters(n),l=r.fecMechanisms.indexOf("RED")!==-1,d=r.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(x=>e.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),f=h.length>0&&h[0].ssrc;let m;const v=e.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(k=>parseInt(k,10)));v.length>0&&v[0].length>1&&v[0][0]===f&&(m=v[0][1]),r.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let S={ssrc:f,codecPayloadType:parseInt(x.parameters.apt,10)};f&&m&&(S.rtx={ssrc:m}),s.push(S),l&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:f,mechanism:d?"red+ulpfec":"red"},s.push(S))}}),s.length===0&&f&&s.push({ssrc:f});let y=e.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,s.forEach(x=>{x.maxBitrate=y})),s},e.parseRtcpParameters=function(n){const s={},r=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];r&&(s.cname=r.value,s.ssrc=r.ssrc);const l=e.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const d=e.matchPrefix(n,"a=rtcp-mux");return s.mux=d.length>0,s},e.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},e.parseMsid=function(n){let s;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return s=r[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=e.matchPrefix(n,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},e.parseSctpDescription=function(n){const s=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let l;r.length>0&&(l=parseInt(r[0].substring(19),10)),isNaN(l)&&(l=65536);const d=e.matchPrefix(n,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const f=h[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:l}}},e.writeSctpDescription=function(n,s){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&r.push("a=max-message-size:"+s.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,s,r){let l;const d=s!==void 0?s:2;return n?l=n:l=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+l+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,s){const r=e.splitLines(n);for(let l=0;l<r.length;l++)switch(r[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[l].substring(2)}return s?e.getDirection(s):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=e.splitLines(n);for(let r=0;r<s.length;r++)if(s[r].length<2||s[r].charAt(1)!=="=")return!1;return!0},i.exports=e})(Hh)),Hh.exports}var _T=yO(),or=rO(_T),bO=j_({__proto__:null,default:or},[_T]);function xc(i){if(!i.RTCIceCandidate||i.RTCIceCandidate&&"foundation"in i.RTCIceCandidate.prototype)return;const e=i.RTCIceCandidate;i.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const r=new e(s),l=or.parseCandidate(s.candidate);for(const d in l)d in r||Object.defineProperty(r,d,{value:l[d]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(s)},i.RTCIceCandidate.prototype=e.prototype,ua(i,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new i.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Rf(i){!i.RTCIceCandidate||i.RTCIceCandidate&&"relayProtocol"in i.RTCIceCandidate.prototype||ua(i,"icecandidate",e=>{if(e.candidate){const n=or.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Sc(i,e){if(!i.RTCPeerConnection)return;"sctp"in i.RTCPeerConnection.prototype||Object.defineProperty(i.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const f=or.splitSections(h.sdp);return f.shift(),f.some(m=>{const v=or.parseMLine(m);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},s=function(h){const f=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const m=parseInt(f[1],10);return m!==m?-1:m},r=function(h){let f=65536;return e.browser==="firefox"&&(e.version<57?h===-1?f=16384:f=2147483637:e.version<60?f=e.version===57?65535:65536:f=2147483637),f},l=function(h,f){let m=65536;e.browser==="firefox"&&e.version===57&&(m=65535);const v=or.matchPrefix(h.sdp,"a=max-message-size:");return v.length>0?m=parseInt(v[0].substring(19),10):e.browser==="firefox"&&f!==-1&&(m=2147483637),m},d=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=s(arguments[0]),m=r(f),v=l(arguments[0],f);let y;m===0&&v===0?y=Number.POSITIVE_INFINITY:m===0||v===0?y=Math.max(m,v):y=Math.min(m,v);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return y}}),this._sctp=x}return d.apply(this,arguments)}}function Tc(i){if(!(i.RTCPeerConnection&&"createDataChannel"in i.RTCPeerConnection.prototype))return;function e(s,r){const l=s.send;s.send=function(){const h=arguments[0],f=h.length||h.size||h.byteLength;if(s.readyState==="open"&&r.sctp&&f>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const n=i.RTCPeerConnection.prototype.createDataChannel;i.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},ua(i,"datachannel",s=>(e(s.channel,s.target),s))}function _f(i){if(!i.RTCPeerConnection||"connectionState"in i.RTCPeerConnection.prototype)return;const e=i.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const l=r.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const d=new Event("connectionstatechange",r);l.dispatchEvent(d)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Of(i,e){if(!i.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=r.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);i.RTCSessionDescription&&r instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:r.type,sdp:l}):r.sdp=l}return n.apply(this,arguments)}}function Cc(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const n=i.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(i.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function kc(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const n=i.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(i.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>n.apply(this,[d]))})}var xO=Object.freeze({__proto__:null,removeExtmapAllowMixed:Of,shimAddIceCandidateNullOrEmpty:Cc,shimConnectionState:_f,shimMaxMessageSize:Sc,shimParameterlessSetLocalDescription:kc,shimRTCIceCandidate:xc,shimRTCIceCandidateRelayProtocol:Rf,shimSendThrowTypeError:Tc});function SO(){let{window:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=tT,s=gO(i),r={browserDetails:s,commonShim:xO,extractVersion:ko,disableLog:mO,disableWarnings:pO,sdp:bO};switch(s.browser){case"chrome":if(!Zy||!wf||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Zy,Cc(i,s),kc(i),iT(i,s),sT(i),wf(i,s),aT(i),cT(i,s),rT(i),oT(i),uT(i,s),xc(i),Rf(i),_f(i),Sc(i,s),Tc(i),Of(i,s);break;case"firefox":if(!Wy||!jf||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Wy,Cc(i,s),kc(i),dT(i,s),jf(i,s),hT(i),pT(i),fT(i),mT(i),gT(i),vT(i),yT(i),bT(i),xT(i),xc(i),_f(i),Sc(i,s),Tc(i);break;case"safari":if(!eb||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=eb,Cc(i,s),kc(i),NT(i),jT(i),CT(i),ST(i),TT(i),wT(i),kT(i),RT(i),xc(i),Rf(i),Sc(i,s),Tc(i),Of(i,s);break;default:n("Unsupported browser!");break}return r}SO({window:typeof window>"u"?void 0:window});const TO=10,bo="lk_e2ee",CO="LKFrameEncryptionKey",kO={sharedKey:!1,ratchetSalt:CO,ratchetWindowSize:8,failureTolerance:TO,keyringSize:16};var Ss;(function(i){i.SetKey="setKey",i.RatchetRequest="ratchetRequest",i.KeyRatcheted="keyRatcheted"})(Ss||(Ss={}));var nb;(function(i){i.KeyRatcheted="keyRatcheted"})(nb||(nb={}));var bs;(function(i){i.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",i.EncryptionError="encryptionError"})(bs||(bs={}));var ib;(function(i){i.Error="cryptorError"})(ib||(ib={}));function EO(){return NO()||Af()}function Af(){return typeof window.RTCRtpScriptTransform<"u"}function NO(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function wO(i){var e,n,s,r,l;if(((e=i.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=i.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((s=i.value)===null||s===void 0?void 0:s.case)!=="speaker"&&((r=i.value)===null||r===void 0?void 0:r.case)!=="transcription"&&((l=i.value)===null||l===void 0?void 0:l.case)!=="encryptedPacket")return new _S({value:i.value})}class KM extends oi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,s,r)=>{Ae.debug("key ratcheted event received",{ratchetResult:n,participantId:s,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},kO),e),this.on(Ss.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,s){const r={key:e,participantIdentity:n,keyIndex:s};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(s??0),r),this.emit(Ss.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ss.RatchetRequest,e,n)}}class Bi extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Be;(function(i){i[i.NotAllowed=0]="NotAllowed",i[i.ServerUnreachable=1]="ServerUnreachable",i[i.InternalError=2]="InternalError",i[i.Cancelled=3]="Cancelled",i[i.LeaveRequest=4]="LeaveRequest",i[i.Timeout=5]="Timeout"})(Be||(Be={}));class Qe extends Bi{constructor(e,n,s,r){super(1,e),this.name="ConnectionError",this.status=s,this.reason=n,this.context=r,this.reasonName=Be[n]}}class km extends Bi{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ai extends Bi{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class jO extends Bi{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Rt extends Bi{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Mf extends Bi{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class sb extends Bi{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class ab extends Bi{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:Tm[n]}}var Jt;(function(i){i[i.AlreadyOpened=0]="AlreadyOpened",i[i.AbnormalEnd=1]="AbnormalEnd",i[i.DecodeFailed=2]="DecodeFailed",i[i.LengthExceeded=3]="LengthExceeded",i[i.Incomplete=4]="Incomplete",i[i.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",i[i.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(Jt||(Jt={}));class Mn extends Bi{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=Jt[n]}}var Vc;(function(i){i.PermissionDenied="PermissionDenied",i.NotFound="NotFound",i.DeviceInUse="DeviceInUse",i.Other="Other"})(Vc||(Vc={}));(function(i){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?i.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?i.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?i.DeviceInUse:i.Other}i.getFailure=e})(Vc||(Vc={}));var rb;(function(i){i[i.InvalidKey=0]="InvalidKey",i[i.MissingKey=1]="MissingKey",i[i.InternalError=2]="InternalError"})(rb||(rb={}));var ie;(function(i){i.Connected="connected",i.Reconnecting="reconnecting",i.SignalReconnecting="signalReconnecting",i.Reconnected="reconnected",i.Disconnected="disconnected",i.ConnectionStateChanged="connectionStateChanged",i.Moved="moved",i.MediaDevicesChanged="mediaDevicesChanged",i.ParticipantConnected="participantConnected",i.ParticipantDisconnected="participantDisconnected",i.TrackPublished="trackPublished",i.TrackSubscribed="trackSubscribed",i.TrackSubscriptionFailed="trackSubscriptionFailed",i.TrackUnpublished="trackUnpublished",i.TrackUnsubscribed="trackUnsubscribed",i.TrackMuted="trackMuted",i.TrackUnmuted="trackUnmuted",i.LocalTrackPublished="localTrackPublished",i.LocalTrackUnpublished="localTrackUnpublished",i.LocalAudioSilenceDetected="localAudioSilenceDetected",i.ActiveSpeakersChanged="activeSpeakersChanged",i.ParticipantMetadataChanged="participantMetadataChanged",i.ParticipantNameChanged="participantNameChanged",i.ParticipantAttributesChanged="participantAttributesChanged",i.ParticipantActive="participantActive",i.RoomMetadataChanged="roomMetadataChanged",i.DataReceived="dataReceived",i.SipDTMFReceived="sipDTMFReceived",i.TranscriptionReceived="transcriptionReceived",i.ConnectionQualityChanged="connectionQualityChanged",i.TrackStreamStateChanged="trackStreamStateChanged",i.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",i.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",i.AudioPlaybackStatusChanged="audioPlaybackChanged",i.VideoPlaybackStatusChanged="videoPlaybackChanged",i.MediaDevicesError="mediaDevicesError",i.ParticipantPermissionsChanged="participantPermissionsChanged",i.SignalConnected="signalConnected",i.RecordingStatusChanged="recordingStatusChanged",i.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",i.EncryptionError="encryptionError",i.DCBufferStatusChanged="dcBufferStatusChanged",i.ActiveDeviceChanged="activeDeviceChanged",i.ChatMessage="chatMessage",i.LocalTrackSubscribed="localTrackSubscribed",i.MetricsReceived="metricsReceived"})(ie||(ie={}));var ce;(function(i){i.TrackPublished="trackPublished",i.TrackSubscribed="trackSubscribed",i.TrackSubscriptionFailed="trackSubscriptionFailed",i.TrackUnpublished="trackUnpublished",i.TrackUnsubscribed="trackUnsubscribed",i.TrackMuted="trackMuted",i.TrackUnmuted="trackUnmuted",i.LocalTrackPublished="localTrackPublished",i.LocalTrackUnpublished="localTrackUnpublished",i.LocalTrackCpuConstrained="localTrackCpuConstrained",i.LocalSenderCreated="localSenderCreated",i.ParticipantMetadataChanged="participantMetadataChanged",i.ParticipantNameChanged="participantNameChanged",i.DataReceived="dataReceived",i.SipDTMFReceived="sipDTMFReceived",i.TranscriptionReceived="transcriptionReceived",i.IsSpeakingChanged="isSpeakingChanged",i.ConnectionQualityChanged="connectionQualityChanged",i.TrackStreamStateChanged="trackStreamStateChanged",i.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",i.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",i.TrackCpuConstrained="trackCpuConstrained",i.MediaDevicesError="mediaDevicesError",i.AudioStreamAcquired="audioStreamAcquired",i.ParticipantPermissionsChanged="participantPermissionsChanged",i.PCTrackAdded="pcTrackAdded",i.AttributesChanged="attributesChanged",i.LocalTrackSubscribed="localTrackSubscribed",i.ChatMessage="chatMessage",i.Active="active"})(ce||(ce={}));var le;(function(i){i.TransportsCreated="transportsCreated",i.Connected="connected",i.Disconnected="disconnected",i.Resuming="resuming",i.Resumed="resumed",i.Restarting="restarting",i.Restarted="restarted",i.SignalResumed="signalResumed",i.SignalRestarted="signalRestarted",i.Closing="closing",i.MediaTrackAdded="mediaTrackAdded",i.ActiveSpeakersUpdate="activeSpeakersUpdate",i.DataPacketReceived="dataPacketReceived",i.RTPVideoMapUpdate="rtpVideoMapUpdate",i.DCBufferStatusChanged="dcBufferStatusChanged",i.ParticipantUpdate="participantUpdate",i.RoomUpdate="roomUpdate",i.SpeakersChanged="speakersChanged",i.StreamStateChanged="streamStateChanged",i.ConnectionQualityUpdate="connectionQualityUpdate",i.SubscriptionError="subscriptionError",i.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",i.RemoteMute="remoteMute",i.SubscribedQualityUpdate="subscribedQualityUpdate",i.LocalTrackUnpublished="localTrackUnpublished",i.LocalTrackSubscribed="localTrackSubscribed",i.Offline="offline",i.SignalRequestResponse="signalRequestResponse",i.SignalConnected="signalConnected",i.RoomMoved="roomMoved"})(le||(le={}));var se;(function(i){i.Message="message",i.Muted="muted",i.Unmuted="unmuted",i.Restarted="restarted",i.Ended="ended",i.Subscribed="subscribed",i.Unsubscribed="unsubscribed",i.CpuConstrained="cpuConstrained",i.UpdateSettings="updateSettings",i.UpdateSubscription="updateSubscription",i.AudioPlaybackStarted="audioPlaybackStarted",i.AudioPlaybackFailed="audioPlaybackFailed",i.AudioSilenceDetected="audioSilenceDetected",i.VisibilityChanged="visibilityChanged",i.VideoDimensionsChanged="videoDimensionsChanged",i.VideoPlaybackStarted="videoPlaybackStarted",i.VideoPlaybackFailed="videoPlaybackFailed",i.ElementAttached="elementAttached",i.ElementDetached="elementDetached",i.UpstreamPaused="upstreamPaused",i.UpstreamResumed="upstreamResumed",i.SubscriptionPermissionChanged="subscriptionPermissionChanged",i.SubscriptionStatusChanged="subscriptionStatusChanged",i.SubscriptionFailed="subscriptionFailed",i.TrackProcessorUpdate="trackProcessorUpdate",i.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",i.TranscriptionReceived="transcriptionReceived",i.TimeSyncUpdate="timeSyncUpdate",i.PreConnectBufferFlushed="preConnectBufferFlushed"})(se||(se={}));function RO(i){return typeof i>"u"?i:typeof structuredClone=="function"?typeof i=="object"&&i!==null?structuredClone(Object.assign({},i)):structuredClone(i):JSON.parse(JSON.stringify(i))}const _O=/version\/(\d+(\.?_?\d+)+)/i;let Gh;function cn(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Gh===void 0||e){const s=OO.find(r=>{let{test:l}=r;return l.test(n)});Gh=s?.describe(n)}return Gh}const OO=[{test:/firefox|iceweasel|fxios/i,describe(i){return{name:"Firefox",version:Ec(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,i),os:i.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Kh(i)}}},{test:/chrom|crios|crmo/i,describe(i){return{name:"Chrome",version:Ec(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,i),os:i.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Kh(i)}}},{test:/safari|applewebkit/i,describe(i){return{name:"Safari",version:Ec(_O,i),os:i.includes("mobile/")?"iOS":"macOS",osVersion:Kh(i)}}}];function Ec(i,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const s=e.match(i);return s&&s.length>=n&&s[n]||""}function Kh(i){return i.includes("mac os")?Ec(/\(.+?(\d+_\d+(:?_\d+)?)/,i,1).replace(/_/g,"."):void 0}var AO="2.15.14";const MO=AO,DO=16;class Vt{}Vt.setTimeout=function(){return setTimeout(...arguments)};Vt.setInterval=function(){return setInterval(...arguments)};Vt.clearTimeout=function(){return clearTimeout(...arguments)};Vt.clearInterval=function(){return clearInterval(...arguments)};const PO=5e3,xo=[];var Sn;(function(i){i[i.LOW=0]="LOW",i[i.MEDIUM=1]="MEDIUM",i[i.HIGH=2]="HIGH"})(Sn||(Sn={}));class $ extends oi.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=$.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ae,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),PO):this.handleAppVisibilityChanged()},this.log=Ui((r=s.loggerName)!==null&&r!==void 0?r:Gn.Track),this.loggerContextCb=s.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=$.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Le(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===$.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===$.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(xo.forEach(l=>{l.parentElement===null&&!e&&(e=l)}),e&&xo.splice(xo.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),nr(this.mediaStreamTrack,e);const s=e.srcObject.getTracks(),r=s.some(l=>l.kind==="audio");return e.play().then(()=>{this.emit(r?se.AudioPlaybackStarted:se.VideoPlaybackStarted)}).catch(l=>{l.name==="NotAllowedError"?this.emit(r?se.AudioPlaybackFailed:se.VideoPlaybackFailed,l):l.name==="AbortError"?Ae.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):Ae.warn("could not playback ".concat(r?"audio":"video"),l),r&&e&&s.some(d=>d.kind==="video")&&l.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(se.ElementAttached,e),e}detach(e){try{if(e){lr(this.mediaStreamTrack,e);const s=this.attachedElements.indexOf(e);return s>=0&&(this.attachedElements.splice(s,1),this.recycleElement(e),this.emit(se.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(s=>{lr(this.mediaStreamTrack,s),n.push(s),this.recycleElement(s),this.emit(se.ElementDetached,s)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ui(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),xo.forEach(s=>{s.parentElement||(n=!1)}),n&&xo.push(e)}}handleAppVisibilityChanged(){return N(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===$.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){ln()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){ln()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function nr(i,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let s;i.kind==="audio"?s=n.getAudioTracks():s=n.getVideoTracks(),s.includes(i)||(s.forEach(r=>{n.removeTrack(r)}),n.addTrack(i)),(!la()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(la()||oa())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function lr(i,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(i),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(i){let e;(function(m){m.Audio="audio",m.Video="video",m.Unknown="unknown"})(e=i.Kind||(i.Kind={}));let n;(function(m){m.Camera="camera",m.Microphone="microphone",m.ScreenShare="screen_share",m.ScreenShareAudio="screen_share_audio",m.Unknown="unknown"})(n=i.Source||(i.Source={}));let s;(function(m){m.Active="active",m.Paused="paused",m.Unknown="unknown"})(s=i.StreamState||(i.StreamState={}));function r(m){switch(m){case e.Audio:return Fn.AUDIO;case e.Video:return Fn.VIDEO;default:return Fn.DATA}}i.kindToProto=r;function l(m){switch(m){case Fn.AUDIO:return e.Audio;case Fn.VIDEO:return e.Video;default:return e.Unknown}}i.kindFromProto=l;function d(m){switch(m){case n.Camera:return Nt.CAMERA;case n.Microphone:return Nt.MICROPHONE;case n.ScreenShare:return Nt.SCREEN_SHARE;case n.ScreenShareAudio:return Nt.SCREEN_SHARE_AUDIO;default:return Nt.UNKNOWN}}i.sourceToProto=d;function h(m){switch(m){case Nt.CAMERA:return n.Camera;case Nt.MICROPHONE:return n.Microphone;case Nt.SCREEN_SHARE:return n.ScreenShare;case Nt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}i.sourceFromProto=h;function f(m){switch(m){case Cf.ACTIVE:return s.Active;case Cf.PAUSED:return s.Paused;default:return s.Unknown}}i.streamStateFromProto=f})($||($={}));class it{constructor(e,n,s,r,l){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&s!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:s,maxFramerate:r,priority:l};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const LO=["vp8","h264"],IO=["vp8","h264","vp9","av1","h265"];function UO(i){return!!LO.find(e=>e===i)}const zO=UO;var ob;(function(i){i[i.PREFER_REGRESSION=0]="PREFER_REGRESSION",i[i.SIMULCAST=1]="SIMULCAST",i[i.REGRESSION=2]="REGRESSION"})(ob||(ob={}));var Df;(function(i){i.telephone={maxBitrate:12e3},i.speech={maxBitrate:24e3},i.music={maxBitrate:48e3},i.musicStereo={maxBitrate:64e3},i.musicHighQuality={maxBitrate:96e3},i.musicHighQualityStereo={maxBitrate:128e3}})(Df||(Df={}));const Lo={h90:new it(160,90,9e4,20),h180:new it(320,180,16e4,20),h216:new it(384,216,18e4,20),h360:new it(640,360,45e4,20),h540:new it(960,540,8e5,25),h720:new it(1280,720,17e5,30),h1080:new it(1920,1080,3e6,30),h1440:new it(2560,1440,5e6,30),h2160:new it(3840,2160,8e6,30)},Pf={h120:new it(160,120,7e4,20),h180:new it(240,180,125e3,20),h240:new it(320,240,14e4,20),h360:new it(480,360,33e4,20),h480:new it(640,480,5e5,20),h540:new it(720,540,6e5,25),h720:new it(960,720,13e5,30),h1080:new it(1440,1080,23e5,30),h1440:new it(1920,1440,38e5,30)},Em={h360fps3:new it(640,360,2e5,3,"medium"),h360fps15:new it(640,360,4e5,15,"medium"),h720fps5:new it(1280,720,8e5,5,"medium"),h720fps15:new it(1280,720,15e5,15,"medium"),h720fps30:new it(1280,720,2e6,30,"medium"),h1080fps15:new it(1920,1080,25e5,15,"medium"),h1080fps30:new it(1920,1080,5e6,30,"medium"),original:new it(0,0,7e6,30,"medium")},BO="|",lb="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function qO(i){const e=i.split(BO);return e.length>1?[e[0],i.substr(e[0].length+1)]:[i,""]}function $t(i){return N(this,void 0,void 0,function*(){return new Promise(e=>Vt.setTimeout(e,i))})}function Lf(){return"addTransceiver"in RTCPeerConnection.prototype}function If(){return"addTrack"in RTCPeerConnection.prototype}function FO(){if(!("getCapabilities"in RTCRtpSender)||la()||oa())return!1;const i=RTCRtpSender.getCapabilities("video");let e=!1;if(i){for(const n of i.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function VO(){if(!("getCapabilities"in RTCRtpSender)||oa())return!1;if(la()){const n=cn();if(n?.version&&ai(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&ai(n.osVersion,"16")<0)return!1}const i=RTCRtpSender.getCapabilities("video");let e=!1;if(i){for(const n of i.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function ei(i){return i==="av1"||i==="vp9"}function Uf(i){return!document||Io()?!1:(i||(i=document.createElement("audio")),"setSinkId"in i)}function HO(){return typeof RTCPeerConnection>"u"?!1:Lf()||If()}function oa(){var i;return((i=cn())===null||i===void 0?void 0:i.name)==="Firefox"}function cb(){const i=cn();return!!i&&i.name==="Chrome"&&i.os!=="iOS"}function la(){var i;return((i=cn())===null||i===void 0?void 0:i.name)==="Safari"}function Io(){const i=cn();return i?.name==="Safari"||i?.os==="iOS"}function GO(){const i=cn();return i?.name==="Safari"&&i.version.startsWith("17.")||i?.os==="iOS"&&!!i?.osVersion&&ai(i.osVersion,"17")>=0}function KO(i){return i||(i=cn()),i?.name==="Safari"&&ai(i.version,"18.3")>0||i?.os==="iOS"&&!!i?.osVersion&&ai(i.osVersion,"18.3")>0}function OT(){var i,e;return ln()?(e=(i=navigator.userAgentData)===null||i===void 0?void 0:i.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function YO(){const i=cn(),e="17.2";if(i)return i.name!=="Safari"&&i.os!=="iOS"||i.os==="iOS"&&i.osVersion&&ai(i.osVersion,e)>=0?!0:i.name==="Safari"&&ai(i.version,e)>=0}function ln(){return typeof document<"u"}function si(){return navigator.product=="ReactNative"}function zf(i){return i.hostname.endsWith(".livekit.cloud")||i.hostname.endsWith(".livekit.run")}function AT(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function MT(){if(!si())return;let i=AT();if(i)return i.platform}function ub(){if(ln())return window.devicePixelRatio;if(si()){let i=AT();if(i)return i.devicePixelRatio}return 1}function ai(i,e){const n=i.split("."),s=e.split("."),r=Math.min(n.length,s.length);for(let l=0;l<r;++l){const d=parseInt(n[l],10),h=parseInt(s[l],10);if(d>h)return 1;if(d<h)return-1;if(l===r-1&&d===h)return 0}return i===""&&e!==""?-1:e===""?1:n.length==s.length?0:n.length<s.length?-1:1}function JO(i){for(const e of i)e.target.handleResize(e)}function QO(i){for(const e of i)e.target.handleVisibilityChanged(e)}let Yh=null;const db=()=>(Yh||(Yh=new ResizeObserver(JO)),Yh);let Jh=null;const hb=()=>(Jh||(Jh=new IntersectionObserver(QO,{root:null,rootMargin:"0px"})),Jh);function XO(){var i;const e=new IS({sdk:US.JS,protocol:DO,version:MO});return si()&&(e.os=(i=MT())!==null&&i!==void 0?i:""),e}function fb(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=i,r.height=e;const l=r.getContext("2d");l?.fillRect(0,0,r.width,r.height),s&&l&&(l.beginPath(),l.arc(i/2,e/2,50,0,Math.PI*2,!0),l.closePath(),l.fillStyle="grey",l.fill());const d=r.captureStream(),[h]=d.getTracks();if(!h)throw Error("Could not get empty media stream video track");return h.enabled=n,h}let So;function Qh(){if(!So){const i=new AudioContext,e=i.createOscillator(),n=i.createGain();n.gain.setValueAtTime(0,0);const s=i.createMediaStreamDestination();if(e.connect(n),n.connect(s),e.start(),[So]=s.stream.getAudioTracks(),!So)throw Error("Could not get empty media stream audio track");So.enabled=!1}return So.clone()}class Pn{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((s,r)=>N(this,void 0,void 0,function*(){this.resolve=s,this.reject=r,e&&(yield e(s,r))})).finally(()=>{var s;this._isResolved=!0,(s=this.onFinally)===null||s===void 0||s.call(this)})}}function $O(i){return IO.includes(i)}function Ts(i){if(typeof i=="string"||typeof i=="number")return i;if(Array.isArray(i))return i[0];if(i.exact!==void 0)return Array.isArray(i.exact)?i.exact[0]:i.exact;if(i.ideal!==void 0)return Array.isArray(i.ideal)?i.ideal[0]:i.ideal;throw Error("could not unwrap constraint")}function ZO(i){return i.startsWith("http")?i.replace(/^(http)/,"ws"):i}function Bf(i){return i.startsWith("ws")?i.replace(/^(ws)/,"http"):i}function WO(i,e){return i.segments.map(n=>{let{id:s,text:r,language:l,startTime:d,endTime:h,final:f}=n;var m;const v=(m=e.get(s))!==null&&m!==void 0?m:Date.now(),y=Date.now();return f?e.delete(s):e.set(s,v),{id:s,text:r,startTime:Number.parseInt(d.toString()),endTime:Number.parseInt(h.toString()),final:f,language:l,firstReceivedTime:v,lastReceivedTime:y}})}function eA(i){const{id:e,timestamp:n,message:s,editTimestamp:r}=i;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:s}}function mb(i){switch(i.reason){case Be.LeaveRequest:return i.context;case Be.Cancelled:return Hn.CLIENT_INITIATED;case Be.NotAllowed:return Hn.USER_REJECTED;case Be.ServerUnreachable:return Hn.JOIN_FAILURE;default:return Hn.UNKNOWN_REASON}}function Nc(i){return i!==void 0?Number(i):void 0}function Zs(i){return i!==void 0?BigInt(i):void 0}function cr(i){return!!i&&!(i instanceof MediaStreamTrack)&&i.isLocal}function ni(i){return!!i&&i.kind==$.Kind.Audio}function ws(i){return!!i&&i.kind==$.Kind.Video}function gs(i){return cr(i)&&ws(i)}function wi(i){return cr(i)&&ni(i)}function qf(i){return!!i&&!i.isLocal}function tA(i){return!!i&&!i.isLocal}function Xh(i){return qf(i)&&ws(i)}function nA(i){return i.isLocal}function iA(i,e){const n=[];let s=new TextEncoder().encode(i);for(;s.length>e;){let r=e;for(;r>0;){const l=s[r];if(l!==void 0&&(l&192)!==128)break;r--}n.push(s.slice(0,r)),s=s.slice(r)}return s.length>0&&n.push(s),n}function sA(i){var e;const n=i.get("Cache-Control");if(n){const s=(e=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||e===void 0?void 0:e[1];if(s)return parseInt(s,10)}}function DT(i,e,n){var s,r,l,d;const{optionsWithoutProcessor:h,audioProcessor:f,videoProcessor:m}=IT(i??{}),v=e?.processor,y=n?.processor,x=h??{};return x.audio===!0&&(x.audio={}),x.video===!0&&(x.video={}),x.audio&&(Ff(x.audio,e),(s=(l=x.audio).deviceId)!==null&&s!==void 0||(l.deviceId={ideal:"default"}),(f||v)&&(x.audio.processor=f??v)),x.video&&(Ff(x.video,n),(r=(d=x.video).deviceId)!==null&&r!==void 0||(d.deviceId={ideal:"default"}),(m||y)&&(x.video.processor=m??y)),x}function Ff(i,e){return Object.keys(e).forEach(n=>{i[n]===void 0&&(i[n]=e[n])}),i}function Nm(i){var e,n,s,r;const l={};if(i.video)if(typeof i.video=="object"){const d={},h=d,f=i.video;Object.keys(f).forEach(m=>{switch(m){case"resolution":Ff(h,f.resolution);break;default:h[m]=f[m]}}),l.video=d,(e=(s=l.video).deviceId)!==null&&e!==void 0||(s.deviceId={ideal:"default"})}else l.video=i.video?{deviceId:{ideal:"default"}}:!1;else l.video=!1;return i.audio?typeof i.audio=="object"?(l.audio=i.audio,(n=(r=l.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):l.audio={deviceId:{ideal:"default"}}:l.audio=!1,l}function PT(i){return N(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const s=LT();if(s){const r=s.createAnalyser();r.fftSize=2048;const l=r.frequencyBinCount,d=new Uint8Array(l);s.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield $t(n),r.getByteTimeDomainData(d);const f=d.some(m=>m!==128&&m!==0);return s.close(),!f}return!1})()})}function LT(){var i;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((i=window.document)===null||i===void 0)&&i.body)){const s=()=>N(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(l){console.warn("Error trying to auto-resume audio context",l)}finally{(r=window.document.body)===null||r===void 0||r.removeEventListener("click",s)}});n.addEventListener("statechange",()=>{var r;n.state==="closed"&&((r=window.document.body)===null||r===void 0||r.removeEventListener("click",s))}),window.document.body.addEventListener("click",s)}return n}}function aA(i){return i==="audioinput"?$.Source.Microphone:i==="videoinput"?$.Source.Camera:$.Source.Unknown}function Vf(i){return i===$.Source.Microphone?"audioinput":i===$.Source.Camera?"videoinput":void 0}function rA(i){var e,n;let s=(e=i.video)!==null&&e!==void 0?e:!0;return i.resolution&&i.resolution.width>0&&i.resolution.height>0&&(s=typeof s=="boolean"?{}:s,la()?s=Object.assign(Object.assign({},s),{width:{max:i.resolution.width},height:{max:i.resolution.height},frameRate:i.resolution.frameRate}):s=Object.assign(Object.assign({},s),{width:{ideal:i.resolution.width},height:{ideal:i.resolution.height},frameRate:i.resolution.frameRate})),{audio:(n=i.audio)!==null&&n!==void 0?n:!1,video:s,controller:i.controller,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio,preferCurrentTab:i.preferCurrentTab}}function jo(i){return i.split("/")[1].toLowerCase()}function oA(i){const e=[];return i.forEach(n=>{n.track!==void 0&&e.push(new vm({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Le(i){return"mediaStreamTrack"in i?{trackID:i.sid,source:i.source,muted:i.isMuted,enabled:i.mediaStreamTrack.enabled,kind:i.kind,streamID:i.mediaStreamID,streamTrackID:i.mediaStreamTrack.id}:{trackID:i.trackSid,enabled:i.isEnabled,muted:i.isMuted,trackInfo:Object.assign({mimeType:i.mimeType,name:i.trackName,encrypted:i.isEncrypted,kind:i.kind,source:i.source},i.track?Le(i.track):{})}}function lA(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function cA(i,e){var n;i===void 0&&(i={}),e===void 0&&(e={});const s=[...Object.keys(e),...Object.keys(i)],r={};for(const l of s)i[l]!==e[l]&&(r[l]=(n=e[l])!==null&&n!==void 0?n:"");return r}function IT(i){const e=Object.assign({},i);let n,s;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(s=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:s,optionsWithoutProcessor:RO(e)}}function uA(i){switch(i){case Nt.CAMERA:return $.Source.Camera;case Nt.MICROPHONE:return $.Source.Microphone;case Nt.SCREEN_SHARE:return $.Source.ScreenShare;case Nt.SCREEN_SHARE_AUDIO:return $.Source.ScreenShareAudio;default:return $.Source.Unknown}}function pb(i,e){return i.width*i.height<e.width*e.height}function dA(i,e){var n;return(n=i.layers)===null||n===void 0?void 0:n.find(s=>s.quality===e)}class hA extends oi.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=s=>{var r,l;const{kind:d,data:h}=s.data;switch(d){case"error":Ae.error(h.error.message),this.emit(bs.EncryptionError,h.error);break;case"initAck":h.enabled&&this.keyProvider.getKeys().forEach(v=>{this.postKey(v)});break;case"enable":if(h.enabled&&this.keyProvider.getKeys().forEach(v=>{this.postKey(v)}),this.encryptionEnabled!==h.enabled&&h.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(bs.ParticipantEncryptionStatusChanged,h.enabled,this.room.localParticipant),this.encryptionEnabled=h.enabled;else if(h.participantIdentity){const v=(l=this.room)===null||l===void 0?void 0:l.getParticipantByIdentity(h.participantIdentity);if(!v)throw TypeError("couldn't set encryption status, participant not found".concat(h.participantIdentity));this.emit(bs.ParticipantEncryptionStatusChanged,h.enabled,v)}break;case"ratchetKey":this.keyProvider.emit(Ss.KeyRatcheted,h.ratchetResult,h.participantIdentity,h.keyIndex);break;case"decryptDataResponse":const f=this.decryptDataRequests.get(h.uuid);f?.resolve&&f.resolve(h);break;case"encryptDataResponse":const m=this.encryptDataRequests.get(h.uuid);m?.resolve&&m.resolve(h);break}},this.onWorkerError=s=>{Ae.error("e2ee worker encountered an error:",{error:s.error}),this.emit(bs.EncryptionError,s.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!EO())throw new km("tried to setup end-to-end encryption on an unsupported browser");if(Ae.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:cO.getLevel()}};this.worker&&(Ae.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Ae.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Ae.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(le.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ie.TrackPublished,(s,r)=>this.setParticipantCryptorEnabled(s.trackInfo.encryption!==Ot.NONE,r.identity)),e.on(ie.ConnectionStateChanged,s=>{s===Je.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(l=>{this.setParticipantCryptorEnabled(l.trackInfo.encryption!==Ot.NONE,r.identity)})})}).on(ie.TrackUnsubscribed,(s,r,l)=>{var d;const h={kind:"removeTransform",data:{participantIdentity:l.identity,trackId:s.mediaStreamID}};(d=this.worker)===null||d===void 0||d.postMessage(h)}).on(ie.TrackSubscribed,(s,r,l)=>{this.setupE2EEReceiver(s,l.identity,r.trackInfo)}).on(ie.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(s=>{this.postKey(s)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ce.LocalSenderCreated,(s,r)=>N(this,void 0,void 0,function*(){this.setupE2EESender(r,s)})),e.localParticipant.on(ce.LocalTrackPublished,s=>{if(!ws(s.track)||!Io())return;const r={kind:"updateCodec",data:{trackId:s.track.mediaStreamID,codec:jo(s.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}),n.on(Ss.SetKey,s=>this.postKey(s)).on(Ss.RatchetRequest,(s,r)=>this.postRatchetRequest(s,r))}encryptData(e){return N(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),s={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},r=new Pn;return r.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,r),this.worker.postMessage(s),r.promise})}handleEncryptedData(e,n,s,r){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const l=crypto.randomUUID(),d={kind:"decryptDataRequest",data:{uuid:l,payload:e,iv:n,participantIdentity:s,keyIndex:r}},h=new Pn;return h.onFinally=()=>{this.decryptDataRequests.delete(l)},this.decryptDataRequests.set(l,h),this.worker.postMessage(d),h.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const s={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(s)}postKey(e){let{key:n,participantIdentity:s,keyIndex:r}=e;var l;if(!this.worker)throw Error("could not set key, worker is missing");const d={kind:"setKey",data:{participantIdentity:s,isPublisher:s===((l=this.room)===null||l===void 0?void 0:l.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(d)}postEnable(e,n){if(this.worker){const s={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(s)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const s={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,s){if(e.receiver){if(!s?.mimeType||s.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?jo(s.mimeType):void 0)}}setupE2EESender(e,n){if(!cr(e)||!n){n||Ae.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,s,r){return N(this,void 0,void 0,function*(){if(this.worker){if(Af()&&!cb()){const l={kind:"decode",participantIdentity:s,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,l)}else{if(bo in e&&r){const f={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:s}};this.worker.postMessage(f);return}let l=e.writableStream,d=e.readableStream;if(!l||!d){const f=e.createEncodedStreams();e.writableStream=f.writable,l=f.writable,e.readableStream=f.readable,d=f.readable}const h={kind:"decode",data:{readableStream:d,writableStream:l,trackId:n,codec:r,participantIdentity:s,isReuse:bo in e}};this.worker.postMessage(h,[d,l])}e[bo]=!0}})}handleSender(e,n,s){var r;if(!(bo in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Af()&&!cb()){Ae.info("initialize script transform");const l={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:s};e.transform=new RTCRtpScriptTransform(this.worker,l)}else{Ae.info("initialize encoded streams");const l=e.createEncodedStreams(),d={kind:"encode",data:{readableStream:l.readable,writableStream:l.writable,codec:s,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(d,[l.readable,l.writable])}e[bo]=!0}}}const $h="default";class It{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new It),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var l;if(((l=It.userMediaPromiseMap)===null||l===void 0?void 0:l.size)>0){Ae.debug("awaiting getUserMedia promise");try{n?yield It.userMediaPromiseMap.get(n):yield Promise.all(It.userMediaPromiseMap.values())}catch{Ae.warn("error waiting for media permissons")}}let d=yield navigator.mediaDevices.enumerateDevices();if(r&&!(la()&&s.hasDeviceInUse(n))&&(d.filter(f=>f.kind===n).length===0||d.some(f=>{const m=f.label==="",v=n?f.kind===n:!0;return m&&v}))){const f={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},m=yield navigator.mediaDevices.getUserMedia(f);d=yield navigator.mediaDevices.enumerateDevices(),m.getTracks().forEach(v=>{v.stop()})}return s._previousDevices=d,n&&(d=d.filter(h=>h.kind===n)),d})()})}normalizeDeviceId(e,n,s){return N(this,void 0,void 0,function*(){if(n!==$h)return n;const r=yield this.getDevices(e),l=r.find(h=>h.deviceId===$h);if(!l){Ae.warn("could not reliably determine default device");return}const d=r.find(h=>h.deviceId!==$h&&h.groupId===(s??l.groupId));if(!d){Ae.warn("could not reliably determine default device");return}return d?.deviceId})}hasDeviceInUse(e){return e?It.userMediaPromiseMap.has(e):It.userMediaPromiseMap.size>0}}It.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];It.userMediaPromiseMap=new Map;var Ro;(function(i){i[i.WAITING=0]="WAITING",i[i.RUNNING=1]="RUNNING",i[i.COMPLETED=2]="COMPLETED"})(Ro||(Ro={}));class fA{constructor(){this.pendingTasks=new Map,this.taskMutex=new Xt,this.nextTaskIndex=0}run(e){return N(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ro.WAITING};this.pendingTasks.set(n.id,n);const s=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ro.RUNNING,yield e()}finally{n.status=Ro.COMPLETED,this.pendingTasks.delete(n.id),s()}})}flush(){return N(this,void 0,void 0,function*(){return this.run(()=>N(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class mA{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var s,r;if(!((s=n.signal)===null||s===void 0)&&s.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const l=new WebSocket(e,(r=n.protocols)!==null&&r!==void 0?r:[]);l.binaryType="arraybuffer",this.ws=l;const d=function(){let{closeCode:h,reason:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return l.close(h,f)};this.opened=new Promise((h,f)=>{l.onopen=()=>{h({readable:new ReadableStream({start(m){l.onmessage=v=>{let{data:y}=v;return m.enqueue(y)},l.onerror=v=>m.error(v)},cancel:d}),writable:new WritableStream({write(m){l.send(m)},abort(){l.close()},close:d}),protocol:l.protocol,extensions:l.extensions}),l.removeEventListener("error",f)},l.addEventListener("error",f)}),this.closed=new Promise((h,f)=>{const m=()=>N(this,void 0,void 0,function*(){const v=new Promise(x=>{l.readyState!==WebSocket.CLOSED&&l.addEventListener("close",S=>{x(S)},{once:!0})}),y=yield Promise.race([$t(250),v]);y?h(y):f(new Error("Encountered unspecified websocket error without a timely close event"))});l.onclose=v=>{let{code:y,reason:x}=v;h({closeCode:y,reason:x}),l.removeEventListener("error",m)},l.addEventListener("error",m)}),n.signal&&(n.signal.onabort=()=>l.close()),this.close=d}}function pA(i,e){const n=new URL(ZO(i));return e.forEach((s,r)=>{n.searchParams.set(r,s)}),UT(n,"rtc")}function gA(i){const e=new URL(Bf(i));return UT(e,"validate")}function vA(i){return i.endsWith("/")?i:"".concat(i,"/")}function UT(i,e){return i.pathname="".concat(vA(i.pathname)).concat(e),i.toString()}function gb(i){if(typeof i=="string")return Gy.fromJson(JSON.parse(i),{ignoreUnknownFields:!0});if(i instanceof ArrayBuffer)return Gy.fromBinary(new Uint8Array(i));throw new Error("could not decode websocket message: ".concat(typeof i))}function yA(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(i instanceof AbortSignal))return e;const n=i.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const bA=["syncState","trickle","offer","answer","simulate","leave"];function xA(i){const e=bA.indexOf(i.case)>=0;return Ae.trace("request allowed to bypass queue:",{canPass:e,req:i}),e}var ut;(function(i){i[i.CONNECTING=0]="CONNECTING",i[i.CONNECTED=1]="CONNECTED",i[i.RECONNECTING=2]="RECONNECTING",i[i.DISCONNECTING=3]="DISCONNECTING",i[i.DISCONNECTED=4]="DISCONNECTED"})(ut||(ut={}));const SA=250;class wm{get currentState(){return this.state}get isDisconnected(){return this.state===ut.DISCONNECTING||this.state===ut.DISCONNECTED}get isEstablishingConnection(){return this.state===ut.CONNECTING||this.state===ut.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var s;this.rtt=0,this.state=ut.DISCONNECTED,this.log=Ae,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ui((s=n.loggerName)!==null&&s!==void 0?s:Gn.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new fA,this.queuedRequests=[],this.closingLock=new Xt,this.connectionLock=new Xt,this.state=ut.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,s,r){return N(this,void 0,void 0,function*(){return this.state=ut.CONNECTING,this.options=s,yield this.connect(e,n,s,r)})}reconnect(e,n,s,r){return N(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=ut.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:s,reconnectReason:r}))})}connect(e,n,s,r){return N(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();this.connectOptions=s;const d=XO(),h=s.singlePeerConnection?CA(n,d,s):TA(n,d,s),f=pA(e,h),m=gA(f);return new Promise((v,y)=>N(this,void 0,void 0,function*(){var x,S;try{let k=!1;const C=j=>N(this,void 0,void 0,function*(){if(k)return;k=!0;const M=j instanceof Event?j.currentTarget:j,P=yA(M,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(P)).catch(I=>{this.log.error(I),this.close()}):this.close(),w(),y(M instanceof AbortSignal?M.reason:M)});r?.addEventListener("abort",C);const w=()=>{clearTimeout(_),r?.removeEventListener("abort",C)},_=setTimeout(()=>{C(new Qe("room connection has timed out (signal)",Be.ServerUnreachable))},s.websocketTimeout),L=(j,M)=>{this.handleSignalConnected(j,_,M)},F=new URL(f);F.searchParams.has("access_token")&&F.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(F),Object.assign({reconnect:s.reconnect,reconnectReason:s.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new mA(f);try{this.ws.closed.then(te=>{this.isEstablishingConnection&&y(new Qe("Websocket got closed during a (re)connection attempt: ".concat(te.reason),Be.InternalError)),te.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:te.reason,code:te.closeCode,wasClean:te.closeCode===1e3,state:this.state}))}).catch(te=>{this.isEstablishingConnection&&y(new Qe("Websocket error during a (re)connection attempt: ".concat(te),Be.InternalError))});const j=yield this.ws.opened.catch(te=>N(this,void 0,void 0,function*(){if(this.state!==ut.CONNECTED){this.state=ut.DISCONNECTED,clearTimeout(_);const he=yield this.handleConnectionError(te,m);y(he);return}this.handleWSError(te),y(te)}));if(clearTimeout(_),!j)return;const M=j.readable.getReader();this.streamWriter=j.writable.getWriter();const P=yield M.read();if(M.releaseLock(),!P.value)throw new Qe("no message received as first message",Be.InternalError);const I=gb(P.value),H=this.validateFirstMessage(I,(x=s.reconnect)!==null&&x!==void 0?x:!1);if(!H.isValid){y(H.error);return}((S=I.message)===null||S===void 0?void 0:S.case)==="join"&&(this.pingTimeoutDuration=I.message.value.pingTimeout,this.pingIntervalDuration=I.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const X=H.shouldProcessFirstMessage?I:void 0;L(j,X),v(H.response)}catch(j){y(j)}finally{w()}}finally{l()}}))})}startReadingLoop(e,n){return N(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield $t(this.signalLatency));const{done:s,value:r}=yield e.read();if(s)break;const l=gb(r);this.handleSignalResponse(l)}})}close(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=ut.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:s});const l=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([l,$t(SA)])}}catch(l){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:l}))}finally{n&&(e.state=ut.DISCONNECTED),r()}})()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:ir(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:ir(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new nu({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new iu({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return N(this,arguments,void 0,function(s,r){var l=this;let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const h=l.getNextRequestId();return yield l.sendRequest({case:"updateMetadata",value:new bm({requestId:h,metadata:s,name:r,attributes:d})}),h})()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new GS({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new JS({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ct.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new $S({timestamp:ct.parse(Date.now()),rtt:ct.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new ym({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new au({reason:Hn.CLIENT_INITIATED,action:rr.DISCONNECT})})}sendRequest(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!r&&!xA(n)&&s.state===ut.RECONNECTING){s.queuedRequests.push(()=>N(s,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield s.requestQueue.flush()),s.signalLatency&&(yield $t(s.signalLatency)),s.isDisconnected){s.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!s.streamWriter){s.log.error("cannot send signal request before connected, type: ".concat(n?.case),s.logContext);return}const d=new D2({message:n});try{s.useJSON?yield s.streamWriter.write(d.toJsonString()):yield s.streamWriter.write(d.toBinary())}catch(h){s.log.error("error sending signal message",Object.assign(Object.assign({},s.logContext),{error:h}))}})()})}handleSignalResponse(e){var n,s;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let l=!1;if(r.case==="answer"){const d=vb(r.value);this.onAnswer&&this.onAnswer(d,r.value.id,r.value.midToTrackId)}else if(r.case==="offer"){const d=vb(r.value);this.onOffer&&this.onOffer(d,r.value.id,r.value.midToTrackId)}else if(r.case==="trickle"){const d=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(d,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((s=r.value.speakers)!==null&&s!==void 0?s:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),l=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):r.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(r.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));l||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return N(this,void 0,void 0,function*(){if(this.state===ut.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Vt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Vt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Vt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Vt.clearInterval(this.pingInterval)}handleSignalConnected(e,n,s){this.state=ut.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),s)}validateFirstMessage(e,n){var s,r,l,d,h;return((s=e.message)===null||s===void 0?void 0:s.case)==="join"?{isValid:!0,response:e.message.value}:this.state===ut.RECONNECTING&&((r=e.message)===null||r===void 0?void 0:r.case)!=="leave"?((l=e.message)===null||l===void 0?void 0:l.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((d=e.message)===null||d===void 0?void 0:d.case)==="leave"?{isValid:!1,error:new Qe("Received leave request while trying to (re)connect",Be.LeaveRequest,void 0,e.message.value.reason)}:n?{isValid:!1,error:new Qe("Unexpected first message",Be.InternalError)}:{isValid:!1,error:new Qe("did not receive join response, got ".concat((h=e.message)===null||h===void 0?void 0:h.case," instead"),Be.InternalError)}}handleConnectionError(e,n){return N(this,void 0,void 0,function*(){try{const s=yield fetch(n);if(s.status.toFixed(0).startsWith("4")){const r=yield s.text();return new Qe(r,Be.NotAllowed,s.status)}else return e instanceof Qe?e:new Qe("Encountered unknown websocket error during connection: ".concat(e),Be.InternalError,s.status)}catch(s){return s instanceof Qe?s:new Qe(s instanceof Error?s.message:"server was not reachable",Be.ServerUnreachable)}})}}function vb(i){const e={type:"offer",sdp:i.sdp};switch(i.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=i.type;break}return e}function ir(i,e){return new Es({sdp:i.sdp,type:i.type,id:e})}function TA(i,e,n){var s;const r=new URLSearchParams;return r.set("access_token",i),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",si()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((s=navigator.connection)===null||s===void 0)&&s.type&&r.set("network",navigator.connection.type),r}function CA(i,e,n){const s=new URLSearchParams;s.set("access_token",i);const r=new nO({clientInfo:e,connectionSettings:new ZS({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(r.reconnectReason=n.reconnectReason);const l=new iO({joinRequest:r.toBinary()});return s.set("join_request",btoa(new TextDecoder("utf-8").decode(l.toBinary()))),s}class yb{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class kA{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const s=Date.now();s-this._lastCleanup>this.ttl/2&&this.cleanup();const r=s+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,s]of this._map.entries())s.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,s]of this._map.entries())s.expiresAt>=Date.now()&&e(s.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],s=this.asValueMap();for(const[r,l]of s.entries())n.push(e(l,r,s));return n}asValueMap(){const e=new Map;for(const[n,s]of this._map.entries())s.expiresAt>=Date.now()&&e.set(n,s.value);return e}}var Bn={},Zh={},Wh={exports:{}},bb;function jm(){if(bb)return Wh.exports;bb=1;var i=Wh.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(i).forEach(function(e){var n=i[e];n.forEach(function(s){s.reg||(s.reg=/(.*)/),s.format||(s.format="%s")})}),Wh.exports}var xb;function EA(){return xb||(xb=1,(function(i){var e=function(h){return String(Number(h))===h?Number(h):h},n=function(h,f,m,v){if(v&&!m)f[v]=e(h[1]);else for(var y=0;y<m.length;y+=1)h[y+1]!=null&&(f[m[y]]=e(h[y+1]))},s=function(h,f,m){var v=h.name&&h.names;h.push&&!f[h.push]?f[h.push]=[]:v&&!f[h.name]&&(f[h.name]={});var y=h.push?{}:v?f[h.name]:f;n(m.match(h.reg),y,h.names,h.name),h.push&&f[h.push].push(y)},r=jm(),l=RegExp.prototype.test.bind(/^([a-z])=(.*)/);i.parse=function(h){var f={},m=[],v=f;return h.split(/(\r\n|\r|\n)/).filter(l).forEach(function(y){var x=y[0],S=y.slice(2);x==="m"&&(m.push({rtp:[],fmtp:[]}),v=m[m.length-1]);for(var k=0;k<(r[x]||[]).length;k+=1){var C=r[x][k];if(C.reg.test(S))return s(C,v,S)}}),f.media=m,f};var d=function(h,f){var m=f.split(/=(.+)/,2);return m.length===2?h[m[0]]=e(m[1]):m.length===1&&f.length>1&&(h[m[0]]=void 0),h};i.parseParams=function(h){return h.split(/;\s?/).reduce(d,{})},i.parseFmtpConfig=i.parseParams,i.parsePayloads=function(h){return h.toString().split(" ").map(Number)},i.parseRemoteCandidates=function(h){for(var f=[],m=h.split(" ").map(e),v=0;v<m.length;v+=3)f.push({component:m[v],ip:m[v+1],port:m[v+2]});return f},i.parseImageAttributes=function(h){return h.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(d,{})})},i.parseSimulcastStreamList=function(h){return h.split(";").map(function(f){return f.split(",").map(function(m){var v,y=!1;return m[0]!=="~"?v=e(m):(v=e(m.substring(1,m.length)),y=!0),{scid:v,paused:y}})})}})(Zh)),Zh}var ef,Sb;function NA(){if(Sb)return ef;Sb=1;var i=jm(),e=/%[sdv%]/g,n=function(d){var h=1,f=arguments,m=f.length;return d.replace(e,function(v){if(h>=m)return v;var y=f[h];switch(h+=1,v){case"%%":return"%";case"%s":return String(y);case"%d":return Number(y);case"%v":return""}})},s=function(d,h,f){var m=h.format instanceof Function?h.format(h.push?f:f[h.name]):h.format,v=[d+"="+m];if(h.names)for(var y=0;y<h.names.length;y+=1){var x=h.names[y];h.name?v.push(f[h.name][x]):v.push(f[h.names[y]])}else v.push(f[h.name]);return n.apply(null,v)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];return ef=function(d,h){h=h||{},d.version==null&&(d.version=0),d.name==null&&(d.name=" "),d.media.forEach(function(y){y.payloads==null&&(y.payloads="")});var f=h.outerOrder||r,m=h.innerOrder||l,v=[];return f.forEach(function(y){i[y].forEach(function(x){x.name in d&&d[x.name]!=null?v.push(s(y,x,d)):x.push in d&&d[x.push]!=null&&d[x.push].forEach(function(S){v.push(s(y,x,S))})})}),d.media.forEach(function(y){v.push(s("m",i.m[0],y)),m.forEach(function(x){i[x].forEach(function(S){S.name in y&&y[S.name]!=null?v.push(s(x,S,y)):S.push in y&&y[S.push]!=null&&y[S.push].forEach(function(k){v.push(s(x,S,k))})})})}),v.join(`\r
`)+`\r
`},ef}var Tb;function wA(){if(Tb)return Bn;Tb=1;var i=EA(),e=NA(),n=jm();return Bn.grammar=n,Bn.write=e,Bn.parse=i.parse,Bn.parseParams=i.parseParams,Bn.parseFmtpConfig=i.parseFmtpConfig,Bn.parsePayloads=i.parsePayloads,Bn.parseRemoteCandidates=i.parseRemoteCandidates,Bn.parseImageAttributes=i.parseImageAttributes,Bn.parseSimulcastStreamList=i.parseSimulcastStreamList,Bn}var vs=wA();function Rm(i,e,n){var s,r,l;e===void 0&&(e=50),n===void 0&&(n={});var d=(s=n.isImmediate)!=null&&s,h=(r=n.callback)!=null&&r,f=n.maxWait,m=Date.now(),v=[];function y(){if(f!==void 0){var S=Date.now()-m;if(S+e>=f)return f-S}return e}var x=function(){var S=[].slice.call(arguments),k=this;return new Promise(function(C,w){var _=d&&l===void 0;if(l!==void 0&&clearTimeout(l),l=setTimeout(function(){if(l=void 0,m=Date.now(),!d){var F=i.apply(k,S);h&&h(F),v.forEach(function(j){return(0,j.resolve)(F)}),v=[]}},y()),_){var L=i.apply(k,S);return h&&h(L),C(L)}v.push({resolve:C,reject:w})})};return x.cancel=function(S){l!==void 0&&clearTimeout(l),v.forEach(function(k){return(0,k.reject)(S)}),v=[]},x}const jA=.7,RA=20,ur={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Cb extends oi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var s;super(),this.log=Ae,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Rm(r=>N(this,void 0,void 0,function*(){this.emit(ur.NegotiationStarted);try{yield this.createAndSendOffer()}catch(l){if(r)r(l);else throw l}}),RA),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ui((s=n.loggerName)!==null&&s!==void 0?s:Gn.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Xt}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var s;n.candidate&&((s=this.onIceCandidate)===null||s===void 0||s.call(this,n.candidate))},e.onicecandidateerror=n=>{var s;(s=this.onIceCandidateError)===null||s===void 0||s.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,n)},e.ontrack=n=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return N(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return N(this,void 0,void 0,function*(){var s;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:l,nackMids:d}=_A(e);this.remoteStereoMids=l,this.remoteNackMids=d}else if(e.type==="answer"){const l=vs.parse((s=e.sdp)!==null&&s!==void 0?s:"");l.media.forEach(d=>{const h=_m(d.mid);d.type==="audio"&&this.trackBitrates.some(f=>{if(!f.transceiver||h!=f.transceiver.mid)return!1;let m=0;if(d.rtp.some(y=>y.codec.toUpperCase()===f.codec.toUpperCase()?(m=y.payload,!0):!1),m===0)return!0;let v=!1;for(const y of d.fmtp)if(y.payload===m){y.config=y.config.split(";").filter(x=>!x.includes("maxaveragebitrate")).join(";"),f.maxbr>0&&(y.config+=";maxaveragebitrate=".concat(f.maxbr*1e3)),v=!0;break}return v||f.maxbr>0&&d.fmtp.push({payload:m,config:"maxaveragebitrate=".concat(f.maxbr*1e3)}),!0})}),r=vs.write(l)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(l=>{this.pc.addIceCandidate(l)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(ur.NegotiationComplete),e.sdp&&vs.parse(e.sdp).media.forEach(d=>{d.type==="video"&&this.emit(ur.RTPVideoPayloadTypes,d.rtp)})),!0})}createAndSendOffer(e){return N(this,void 0,void 0,function*(){var n;const s=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const h=this._pc.remoteDescription;if(e?.iceRestart&&h)yield this._pc.setRemoteDescription(h);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const l=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:l.sdp},this.logContext));const d=vs.parse((n=l.sdp)!==null&&n!==void 0?n:"");if(d.media.forEach(h=>{Eb(h),h.type==="audio"?kb(h,["all"],[]):h.type==="video"&&this.trackBitrates.some(f=>{if(!h.msid||!f.cid||!h.msid.includes(f.cid))return!1;let m=0;if(h.rtp.some(y=>y.codec.toUpperCase()===f.codec.toUpperCase()?(m=y.payload,!0):!1),m===0||(ei(f.codec)&&!la()&&this.ensureVideoDDExtensionForSVC(h,d),f.codec!=="av1"))return!0;const v=Math.round(f.maxbr*jA);for(const y of h.fmtp)if(y.payload===m){y.config.includes("x-google-start-bitrate")||(y.config+=";x-google-start-bitrate=".concat(v));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(l,vs.write(d)),this.onOffer(l,this.latestOfferId)}finally{s()}})}createAndSetAnswer(){return N(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),s=vs.parse((e=n.sdp)!==null&&e!==void 0?e:"");return s.media.forEach(r=>{Eb(r),r.type==="audio"&&kb(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,vs.write(s)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Rt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Rt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return N(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const s=new Map,r=new Map;if((yield this._pc.getStats()).forEach(h=>{switch(h.type){case"transport":n=h.selectedCandidatePairId;break;case"candidate-pair":n===""&&h.selected&&(n=h.id),s.set(h.id,h);break;case"remote-candidate":r.set(h.id,"".concat(h.address,":").concat(h.port));break}}),n==="")return;const d=(e=s.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(d!==void 0)return r.get(d)})}setMungedSDP(e,n,s){return N(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(s?"remote":"local"," description"),this.logContext),s?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(l){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:l,sdp:n})),e.sdp=r}}try{s?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let l="unknown error";r instanceof Error?l=r.message:typeof r=="string"&&(l=r);const d={error:l,sdp:e.sdp};throw!s&&this.pc.remoteDescription&&(d.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:d})),new Mf(l)}})}ensureVideoDDExtensionForSVC(e,n){var s,r;if(!((s=e.ext)===null||s===void 0?void 0:s.some(d=>d.uri===lb))){if(this.ddExtID===0){let d=0;n.media.forEach(h=>{var f;h.type==="video"&&((f=h.ext)===null||f===void 0||f.forEach(m=>{m.value>d&&(d=m.value)}))}),this.ddExtID=d+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:lb})}}}function kb(i,e,n){const s=_m(i.mid);let r=0;i.rtp.some(l=>l.codec==="opus"?(r=l.payload,!0):!1),r>0&&(i.rtcpFb||(i.rtcpFb=[]),n.includes(s)&&!i.rtcpFb.some(l=>l.payload===r&&l.type==="nack")&&i.rtcpFb.push({payload:r,type:"nack"}),(e.includes(s)||e.length===1&&e[0]==="all")&&i.fmtp.some(l=>l.payload===r?(l.config.includes("stereo=1")||(l.config+=";stereo=1"),!0):!1))}function _A(i){var e;const n=[],s=[],r=vs.parse((e=i.sdp)!==null&&e!==void 0?e:"");let l=0;return r.media.forEach(d=>{var h;const f=_m(d.mid);d.type==="audio"&&(d.rtp.some(m=>m.codec==="opus"?(l=m.payload,!0):!1),!((h=d.rtcpFb)===null||h===void 0)&&h.some(m=>m.payload===l&&m.type==="nack")&&s.push(f),d.fmtp.some(m=>m.payload===l?(m.config.includes("sprop-stereo=1")&&n.push(f),!0):!1))}),{stereoMids:n,nackMids:s}}function Eb(i){if(i.connection){const e=i.connection.ip.indexOf(":")>=0;(i.connection.version===4&&e||i.connection.version===6&&!e)&&(i.connection.ip="0.0.0.0",i.connection.version=4)}}function _m(i){return typeof i=="number"?i.toFixed(0):i}const Hf="vp8",OA={audioPreset:Df.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Em.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Hf,backupCodec:!0,preConnectBuffer:!1},zT={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},BT={deviceId:{ideal:"default"},resolution:Lo.h720.resolution},AA={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new dO,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Om={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var mt;(function(i){i[i.NEW=0]="NEW",i[i.CONNECTING=1]="CONNECTING",i[i.CONNECTED=2]="CONNECTED",i[i.FAILED=3]="FAILED",i[i.CLOSING=4]="CLOSING",i[i.CLOSED=5]="CLOSED"})(mt||(mt={}));class MA{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,s){var r;this.peerConnectionTimeout=Om.peerConnectionTimeout,this.log=Ae,this.updateState=()=>{var l,d;const h=this.state,f=this.requiredTransports.map(m=>m.getConnectionState());f.every(m=>m==="connected")?this.state=mt.CONNECTED:f.some(m=>m==="failed")?this.state=mt.FAILED:f.some(m=>m==="connecting")?this.state=mt.CONNECTING:f.every(m=>m==="closed")?this.state=mt.CLOSED:f.some(m=>m==="closed")?this.state=mt.CLOSING:f.every(m=>m==="new")&&(this.state=mt.NEW),h!==this.state&&(this.log.debug("pc state change: from ".concat(mt[h]," to ").concat(mt[this.state]),this.logContext),(l=this.onStateChange)===null||l===void 0||l.call(this,this.state,this.publisher.getConnectionState(),(d=this.subscriber)===null||d===void 0?void 0:d.getConnectionState()))},this.log=Ui((r=s.loggerName)!==null&&r!==void 0?r:Gn.PCManager),this.loggerOptions=s,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new Cb(e,s),n!=="publisher-only"&&(this.subscriber=new Cb(e,s),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=l=>{var d;(d=this.onIceCandidate)===null||d===void 0||d.call(this,l,Vn.SUBSCRIBER)},this.subscriber.onDataChannel=l=>{var d;(d=this.onDataChannel)===null||d===void 0||d.call(this,l)},this.subscriber.onTrack=l=>{var d;(d=this.onTrack)===null||d===void 0||d.call(this,l)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=l=>{var d;(d=this.onIceCandidate)===null||d===void 0||d.call(this,l,Vn.PUBLISHER)},this.publisher.onTrack=l=>{var d;(d=this.onTrack)===null||d===void 0||d.call(this,l)},this.publisher.onOffer=(l,d)=>{var h;(h=this.onPublisherOffer)===null||h===void 0||h.call(this,l,d)},this.state=mt.NEW,this.connectionLock=new Xt,this.remoteOfferLock=new Xt}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return N(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const s of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(s)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return N(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return N(this,void 0,void 0,function*(){var s;n===Vn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(s=this.subscriber)===null||s===void 0?void 0:s.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return N(this,void 0,void 0,function*(){var s,r,l;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(s=this.subscriber)===null||s===void 0?void 0:s.getSignallingState().toString()}));const d=yield this.remoteOfferLock.lock();try{return(yield(r=this.subscriber)===null||r===void 0?void 0:r.setRemoteDescription(e,n))?yield(l=this.subscriber)===null||l===void 0?void 0:l.createAndSetAnswer():void 0}finally{d()}})}updateConfiguration(e,n){var s;this.publisher.setConfiguration(e),(s=this.subscriber)===null||s===void 0||s.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return N(this,void 0,void 0,function*(){var s;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((s=this.requiredTransports)===null||s===void 0?void 0:s.map(l=>this.ensureTransportConnected(l,e,n)))}finally{r()}})}negotiate(e){return N(this,void 0,void 0,function*(){return new Promise((n,s)=>N(this,void 0,void 0,function*(){const r=setTimeout(()=>{s("negotiation timed out")},this.peerConnectionTimeout),l=()=>{clearTimeout(r),s("negotiation aborted")};e.signal.addEventListener("abort",l),this.publisher.once(ur.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(ur.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(d=>{clearTimeout(r),s(d)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const s=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(r=>r.receiver===e);return s?.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Vn.PUBLISHER?this.publisher.getConnectedAddress():e===Vn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return N(this,arguments,void 0,function(s,r){var l=this;let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(s.getConnectionState()!=="connected")return new Promise((f,m)=>N(l,void 0,void 0,function*(){const v=()=>{this.log.warn("abort transport connection",this.logContext),Vt.clearTimeout(y),m(new Qe("room connection has been cancelled",Be.Cancelled))};r?.signal.aborted&&v(),r?.signal.addEventListener("abort",v);const y=Vt.setTimeout(()=>{r?.signal.removeEventListener("abort",v),m(new Qe("could not establish pc connection",Be.InternalError))},d);for(;this.state!==mt.CONNECTED;)if(yield $t(50),r?.signal.aborted){m(new Qe("room connection has been cancelled",Be.Cancelled));return}Vt.clearTimeout(y),r?.signal.removeEventListener("abort",v),f()}))})()})}}const qT=5e3;class _t{static fetchRegionSettings(e,n,s){return N(this,void 0,void 0,function*(){const r=yield _t.fetchLock.lock();try{const l=yield fetch("".concat(DA(e),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:s});if(l.ok){const d=sA(l.headers),h=d?d*1e3:qT;return{regionSettings:yield l.json(),updatedAtInMs:Date.now(),maxAgeInMs:h}}else throw new Qe("Could not fetch region settings: ".concat(l.statusText),l.status===401?Be.NotAllowed:Be.InternalError,l.status)}finally{r()}})}static scheduleRefetch(e,n,s){return N(this,void 0,void 0,function*(){const r=_t.settingsTimeouts.get(e.hostname);clearTimeout(r),_t.settingsTimeouts.set(e.hostname,setTimeout(()=>N(this,void 0,void 0,function*(){try{const l=yield _t.fetchRegionSettings(e,n);_t.updateCachedRegionSettings(e,n,l)}catch(l){Ae.debug("auto refetching of region settings failed",{error:l}),_t.scheduleRefetch(e,n,s)}}),s))})}static updateCachedRegionSettings(e,n,s){_t.cache.set(e.hostname,s),_t.scheduleRefetch(e,n,s.maxAgeInMs)}constructor(e,n){this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return zf(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(e){return N(this,void 0,void 0,function*(){return _t.fetchRegionSettings(this.serverUrl,this.token,e)})}getNextBestRegionUrl(e){return N(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=_t.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(e),_t.updateCachedRegionSettings(this.serverUrl,this.token,n));const s=n.regionSettings.regions.filter(r=>!this.attemptedRegions.find(l=>l.url===r.url));if(s.length>0){const r=s[0];return this.attemptedRegions.push(r),Ae.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(e){_t.updateCachedRegionSettings(this.serverUrl,this.token,e)}}_t.cache=new Map;_t.settingsTimeouts=new Map;_t.fetchLock=new Xt;function DA(i){return"".concat(i.protocol.replace("ws","http"),"//").concat(i.host,"/settings")}class gt extends Error{constructor(e,n,s){super(n),this.code=e,this.message=Nb(n,gt.MAX_MESSAGE_BYTES),this.data=s?Nb(s,gt.MAX_DATA_BYTES):void 0}static fromProto(e){return new gt(e.code,e.message,e.data)}toProto(){return new MS({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new gt(gt.ErrorCode[e],gt.ErrorMessage[e],n)}}gt.MAX_MESSAGE_BYTES=256;gt.MAX_DATA_BYTES=15360;gt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};gt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const FT=15360;function Am(i){return new TextEncoder().encode(i).length}function Nb(i,e){if(Am(i)<=e)return i;let n=0,s=i.length;const r=new TextEncoder;for(;n<s;){const l=Math.floor((n+s+1)/2);r.encode(i.slice(0,l)).length<=e?n=l:s=l-1}return i.slice(0,n)}const Mm=2e3;function ou(i,e){if(!e)return 0;let n,s;return"bytesReceived"in i?(n=i.bytesReceived,s=e.bytesReceived):"bytesSent"in i&&(n=i.bytesSent,s=e.bytesSent),n===void 0||s===void 0||i.timestamp===void 0||e.timestamp===void 0?0:(n-s)*8*1e3/(i.timestamp-e.timestamp)}const Dm=typeof MediaRecorder<"u";class PA{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const LA=Dm?MediaRecorder:PA;class IA extends LA{constructor(e,n){if(!Dm)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let s,r;const l=()=>r===void 0,d=()=>{this.removeEventListener("dataavailable",s),this.removeEventListener("stop",d),this.removeEventListener("error",h),r?.close(),r=void 0},h=f=>{r?.error(f),this.removeEventListener("dataavailable",s),this.removeEventListener("stop",d),this.removeEventListener("error",h),r=void 0};this.byteStream=new ReadableStream({start:f=>{r=f,s=m=>N(this,void 0,void 0,function*(){let v;if(m.data.arrayBuffer){const y=yield m.data.arrayBuffer();v=new Uint8Array(y)}else if(m.data.byteArray)v=m.data.byteArray;else throw new Error("no data available!");l()||f.enqueue(v)}),this.addEventListener("dataavailable",s)},cancel:()=>{d()}}),this.addEventListener("stop",d),this.addEventListener("error",h)}}function UA(){return Dm}const zA=1e3,BA=1e4;class VT extends ${get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=arguments.length>4?arguments[4]:void 0;super(e,n,l),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Rm(()=>N(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>N(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(se.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new Xt,this.pauseUpstreamLock=new Xt,this.trackChangeLock=new Xt,this.trackChangeLock.lock().then(d=>N(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{d()}})),this._constraints=e.getConstraints(),s&&(this._constraints=s)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==$.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return N(this,void 0,void 0,function*(){var s;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(l=>{lr(this._mediaStreamTrack,l)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(nr(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&((s=this.sender.transport)===null||s===void 0?void 0:s.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(l=>{nr(r??e,l)}))})}waitForDimensions(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zA;return(function*(){var s;if(e.kind===$.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((s=cn())===null||s===void 0?void 0:s.os)==="iOS"&&(yield $t(10));const r=Date.now();for(;Date.now()-r<n;){const l=e.dimensions;if(l)return l;yield $t(50)}throw new Ai("unable to get track dimensions after timeout")})()})}setDeviceId(e){return N(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ts(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ts(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(e.source===$.Source.ScreenShare)return;const{deviceId:s,groupId:r}=e._mediaStreamTrack.getSettings(),l=e.kind===$.Kind.Audio?"audioinput":"videoinput";return n?It.getInstance().normalizeDeviceId(l,s,r):s})()})}mute(){return N(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return N(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return N(this,void 0,void 0,function*(){const s=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ai("unable to replace an unpublished track");let r,l;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,l=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),l&&this.processor&&(yield this.internalStopProcessor()),this}finally{s()}})}restart(e){return N(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:s,facingMode:r}=e,l=hO(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const d={audio:!1,video:!1};this.kind===$.Kind.Video?d.video=s||r?{deviceId:s,facingMode:r}:!0:d.audio=s?Object.assign({deviceId:s},l):!0,this.attachedElements.forEach(m=>{lr(this.mediaStreamTrack,m)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const f=(yield navigator.mediaDevices.getUserMedia(d)).getTracks()[0];return this.kind===$.Kind.Video&&(yield f.applyConstraints(l)),f.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(f),this._constraints=e,this.emit(se.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?se.Muted:se.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return N(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),OT()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return N(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(se.UpstreamPaused,this);const s=cn();if(s?.name==="Safari"&&ai(s.version,"12.0")<0)throw new km("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return N(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(se.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return N(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var l;const d=yield s.trackChangeLock.lock();try{s.log.debug("setting up processor",s.logContext);const h=document.createElement(s.kind),f={kind:s.kind,track:s._mediaStreamTrack,element:h,audioContext:s.audioContext};if(yield n.init(f),s.log.debug("processor initialized",s.logContext),s.processor&&(yield s.internalStopProcessor()),s.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(nr(s._mediaStreamTrack,h),h.muted=!0,h.play().catch(m=>{m instanceof DOMException&&m.name==="AbortError"?(s.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},s.logContext),{error:m})),setTimeout(()=>{h.play().catch(v=>{s.log.error("failed to play processor element",Object.assign(Object.assign({},s.logContext),{err:v}))})},100)):s.log.error("failed to play processor element",Object.assign(Object.assign({},s.logContext),{error:m}))}),s.processor=n,s.processorElement=h,s.processor.processedTrack){for(const m of s.attachedElements)m!==s.processorElement&&r&&(lr(s._mediaStreamTrack,m),nr(s.processor.processedTrack,m));yield(l=s.sender)===null||l===void 0?void 0:l.replaceTrack(s.processor.processedTrack)}s.emit(se.TrackProcessorUpdate,s.processor)}finally{d()}})()})}getProcessor(){return this.processor}stopProcessor(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const s=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{s()}})()})}internalStopProcessor(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var s,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(s=e.processor.processedTrack)===null||s===void 0||s.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(se.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!UA()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new IA(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},BA)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Hc extends VT{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;super(e,$.Kind.Audio,n,s,l),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>N(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let d;try{d=yield this.getSenderStats()}catch(h){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:h}));return}d&&this.prevStats&&(this._currentBitrate=ou(d,this.prevStats)),this.prevStats=d}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(se.AudioTrackFeatureUpdate,this,Pt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(se.AudioTrackFeatureUpdate,this,Pt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return N(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===$.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return N(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const s=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ts(this._constraints.deviceId);return this.source===$.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||s)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return N(this,void 0,void 0,function*(){let n;if(e){const s=Nm({audio:e});typeof s.audio!="boolean"&&(n=s.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return N(this,void 0,void 0,function*(){const s=yield n.restart.call(this,e);return this.checkForSilence(),s})}startMonitor(){ln()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Mm)))}setProcessor(e){return N(this,void 0,void 0,function*(){var n;const s=yield this.trackChangeLock.lock();try{if(!si()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(se.TrackProcessorUpdate,this.processor)}finally{s()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return N(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let s;return n.forEach(r=>{r.type==="outbound-rtp"&&(s={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),s})}checkForSilence(){return N(this,void 0,void 0,function*(){const e=yield PT(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(se.AudioSilenceDetected)),e})}}function qA(i,e,n){switch(i.kind){case"audio":return new Hc(i,e,!1,void 0,n);case"video":return new Gc(i,e,!1,n);default:throw new Ai("unsupported track type: ".concat(i.kind))}}const FA=Object.values(Lo),VA=Object.values(Pf),HA=Object.values(Em),GA=[Lo.h180,Lo.h360],KA=[Pf.h180,Pf.h360],YA=i=>[{scaleResolutionDownBy:2,fps:i.encoding.maxFramerate}].map(n=>{var s,r;return new it(Math.floor(i.width/n.scaleResolutionDownBy),Math.floor(i.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(i.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((s=i.encoding.maxFramerate)!==null&&s!==void 0?s:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,i.encoding.priority)}),Gf=["q","h","f"];function Kf(i,e,n,s){var r,l;let d=s?.videoEncoding;i&&(d=s?.screenShareEncoding);const h=s?.simulcast,f=s?.scalabilityMode,m=s?.videoCodec;if(!d&&!h&&!f||!e||!n)return[{}];d||(d=QA(i,e,n,m),Ae.debug("using video encoding",d));const v=d.maxFramerate,y=new it(e,n,d.maxBitrate,d.maxFramerate,d.priority);if(f&&ei(m)){const k=new HT(f),C=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(f));const w=cn();if(Io()||si()||w?.name==="Chrome"&&ai(w?.version,"113")<0){const _=k.suffix=="h"?2:3,L=KO(w);for(let F=0;F<k.spatial;F+=1)C.push({rid:Gf[2-F],maxBitrate:d.maxBitrate/Math.pow(_,F),maxFramerate:y.encoding.maxFramerate,scaleResolutionDownBy:L?Math.pow(2,F):void 0});C[0].scalabilityMode=f}else C.push({maxBitrate:d.maxBitrate,maxFramerate:y.encoding.maxFramerate,scalabilityMode:f});return y.encoding.priority&&(C[0].priority=y.encoding.priority,C[0].networkPriority=y.encoding.priority),Ae.debug("using svc encoding",{encodings:C}),C}if(!h)return[d];let x=[];i?x=(r=jb(s?.screenShareSimulcastLayers))!==null&&r!==void 0?r:wb(i,y):x=(l=jb(s?.videoSimulcastLayers))!==null&&l!==void 0?l:wb(i,y);let S;if(x.length>0){const k=x[0];x.length>1&&([,S]=x);const C=Math.max(e,n);if(C>=960&&S)return tf(e,n,[k,S,y],v);if(C>=480)return tf(e,n,[k,y],v)}return tf(e,n,[y])}function JA(i,e,n){var s,r,l,d;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Ae.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const h=i.mediaStreamTrack.getSettings(),f=(s=h.width)!==null&&s!==void 0?s:(r=i.dimensions)===null||r===void 0?void 0:r.width,m=(l=h.height)!==null&&l!==void 0?l:(d=i.dimensions)===null||d===void 0?void 0:d.height;return i.source===$.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Kf(i.source===$.Source.ScreenShare,f,m,n)}function QA(i,e,n,s){const r=XA(i,e,n);let{encoding:l}=r[0];const d=Math.max(e,n);for(let h=0;h<r.length;h+=1){const f=r[h];if(l=f.encoding,f.width>=d)break}if(s)switch(s){case"av1":case"h265":l=Object.assign({},l),l.maxBitrate=l.maxBitrate*.7;break;case"vp9":l=Object.assign({},l),l.maxBitrate=l.maxBitrate*.85;break}return l}function XA(i,e,n){if(i)return HA;const s=e>n?e/n:n/e;return Math.abs(s-16/9)<Math.abs(s-4/3)?FA:VA}function wb(i,e){if(i)return YA(e);const{width:n,height:s}=e,r=n>s?n/s:s/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?GA:KA}function tf(i,e,n,s){const r=[];if(n.forEach((l,d)=>{if(d>=Gf.length)return;const h=Math.min(i,e),m={rid:Gf[d],scaleResolutionDownBy:Math.max(1,h/Math.min(l.width,l.height)),maxBitrate:l.encoding.maxBitrate},v=s&&l.encoding.maxFramerate?Math.min(s,l.encoding.maxFramerate):l.encoding.maxFramerate;v&&(m.maxFramerate=v);const y=oa()||d===0;l.encoding.priority&&y&&(m.priority=l.encoding.priority,m.networkPriority=l.encoding.priority),r.push(m)}),si()&&MT()==="ios"){let l;r.forEach(h=>{l?h.maxFramerate&&h.maxFramerate>l&&(l=h.maxFramerate):l=h.maxFramerate});let d=!0;r.forEach(h=>{var f;h.maxFramerate!=l&&(d&&(d=!1,Ae.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ae.info('Setting framerate of encoding "'.concat((f=h.rid)!==null&&f!==void 0?f:"",'" to ').concat(l)),h.maxFramerate=l)})}return r}function jb(i){if(i)return i.sort((e,n)=>{const{encoding:s}=e,{encoding:r}=n;return s.maxBitrate>r.maxBitrate?1:s.maxBitrate<r.maxBitrate?-1:s.maxBitrate===r.maxBitrate&&s.maxFramerate&&r.maxFramerate?s.maxFramerate>r.maxFramerate?1:-1:0})}class HT{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function $A(i){return i.source===$.Source.ScreenShare||i.constraints.height&&Ts(i.constraints.height)>=1080?"maintain-resolution":"balanced"}const ZA=5e3;class Gc extends VT{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,$.Kind.Video,n,s,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>N(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let l;try{l=yield this.getSenderStats()}catch(f){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:f}));return}const d=new Map(l.map(f=>[f.rid,f])),h=l.some(f=>f.qualityLimitationReason==="cpu");if(h!==this.isCpuConstrained&&(this.isCpuConstrained=h,this.isCpuConstrained&&this.emit(se.CpuConstrained)),this.prevStats){let f=0;d.forEach((m,v)=>{var y;const x=(y=this.prevStats)===null||y===void 0?void 0:y.get(v);f+=ou(m,x)}),this._currentBitrate=f}this.prevStats=d}),this.senderLock=new Xt}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!ln())return;const s=(n=this.sender)===null||n===void 0?void 0:n.getParameters();s&&(this.encodings=s.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Mm))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return N(this,void 0,void 0,function*(){var n,s,r,l,d;yield e.pauseUpstream.call(this);try{for(var h=!0,f=Oi(this.simulcastCodecs.values()),m;m=yield f.next(),n=m.done,!n;h=!0)l=m.value,h=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(null)}catch(v){s={error:v}}finally{try{!h&&!n&&(r=f.return)&&(yield r.call(f))}finally{if(s)throw s.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return N(this,void 0,void 0,function*(){var n,s,r,l,d;yield e.resumeUpstream.call(this);try{for(var h=!0,f=Oi(this.simulcastCodecs.values()),m;m=yield f.next(),n=m.done,!n;h=!0){l=m.value,h=!1;const v=l;yield(d=v.sender)===null||d===void 0?void 0:d.replaceTrack(v.mediaStreamTrack)}}catch(v){s={error:v}}finally{try{!h&&!n&&(r=f.return)&&(yield r.call(f))}finally{if(s)throw s.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return N(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===$.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return N(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===$.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return N(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],s=yield this.sender.getStats();return s.forEach(r=>{var l;if(r.type==="outbound-rtp"){const d={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(l=r.rid)!==null&&l!==void 0?l:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},h=s.get(r.remoteId);h&&(d.jitter=h.jitter,d.packetsLost=h.packetsLost,d.roundTripTime=h.roundTripTime),n.push(d)}}),n.sort((r,l)=>{var d,h;return((d=l.frameWidth)!==null&&d!==void 0?d:0)-((h=r.frameWidth)!==null&&h!==void 0?h:0)}),n})}setPublishingQuality(e){const n=[];for(let s=Sn.LOW;s<=Sn.HIGH;s+=1)n.push(new xm({quality:s,enabled:s<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ei(this.codec),n)}restartTrack(e){return N(this,void 0,void 0,function*(){var n,s,r,l,d;let h;if(e){const y=Nm({video:e});typeof y.video!="boolean"&&(h=y.video)}yield this.restart(h),this.isCpuConstrained=!1;try{for(var f=!0,m=Oi(this.simulcastCodecs.values()),v;v=yield m.next(),n=v.done,!n;f=!0){l=v.value,f=!1;const y=l;y.sender&&((d=y.sender.transport)===null||d===void 0?void 0:d.state)!=="closed"&&(y.mediaStreamTrack=this.mediaStreamTrack.clone(),yield y.sender.replaceTrack(y.mediaStreamTrack))}}catch(y){s={error:y}}finally{try{!f&&!n&&(r=m.return)&&(yield r.call(m))}finally{if(s)throw s.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return N(this,arguments,void 0,function(s){var r=this;let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var d,h,f,m,v,y;if(yield n.setProcessor.call(r,s,l),!((v=r.processor)===null||v===void 0)&&v.processedTrack)try{for(var x=!0,S=Oi(r.simulcastCodecs.values()),k;k=yield S.next(),d=k.done,!d;x=!0)m=k.value,x=!1,yield(y=m.sender)===null||y===void 0?void 0:y.replaceTrack(r.processor.processedTrack)}catch(C){h={error:C}}finally{try{!x&&!d&&(f=S.return)&&(yield f.call(S))}finally{if(h)throw h.error}}})()})}setDegradationPreference(e){return N(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const s={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,s),s}setSimulcastTrackSender(e,n){const s=this.simulcastCodecs.get(e);s&&(s.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},ZA))}setPublishingCodecs(e){return N(this,void 0,void 0,function*(){var n,s,r,l,d,h,f;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ei(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const m=[];try{for(n=!0,s=Oi(e);r=yield s.next(),l=r.done,!l;n=!0){f=r.value,n=!1;const v=f;if(!this.codec||this.codec===v.codec)yield this.setPublishingLayers(ei(v.codec),v.qualities);else{const y=this.simulcastCodecs.get(v.codec);if(this.log.debug("try setPublishingCodec for ".concat(v.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:y})),!y||!y.sender){for(const x of v.qualities)if(x.enabled){m.push(v.codec);break}}else y.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(v.codec),this.logContext),yield Rb(y.sender,y.encodings,v.qualities,this.senderLock,ei(v.codec),this.log,this.logContext))}}}catch(v){d={error:v}}finally{try{!n&&!l&&(h=s.return)&&(yield h.call(s))}finally{if(d)throw d.error}}return m})}setPublishingLayers(e,n){return N(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Rb(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return N(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((s,r)=>{var l;return Object.assign(Object.assign({},s),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((l=this.mediaStreamTrack.getSettings().height)!==null&&l!==void 0?l:360)/360)),scalabilityMode:r===0&&ei(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?s.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return N(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),OT()&&this.isInBackground&&this.source===$.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Rb(i,e,n,s,r,l,d){return N(this,void 0,void 0,function*(){const h=yield s.lock();l.debug("setPublishingLayersForSender",Object.assign(Object.assign({},d),{sender:i,qualities:n,senderEncodings:e}));try{const f=i.getParameters(),{encodings:m}=f;if(!m)return;if(m.length!==e.length){l.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},d),{encodings:m,senderEncodings:e}));return}let v=!1;!1&&m[0].scalabilityMode||(r&&n.some(S=>S.enabled)&&n.forEach(S=>S.enabled=!0),m.forEach((x,S)=>{var k;let C=(k=x.rid)!==null&&k!==void 0?k:"";C===""&&(C="q");const w=GT(C),_=n.find(L=>L.quality===w);_&&x.active!==_.enabled&&(v=!0,x.active=_.enabled,l.debug("setting layer ".concat(_.quality," to ").concat(x.active?"enabled":"disabled"),d),oa()&&(_.enabled?(x.scaleResolutionDownBy=e[S].scaleResolutionDownBy,x.maxBitrate=e[S].maxBitrate,x.maxFrameRate=e[S].maxFrameRate):(x.scaleResolutionDownBy=4,x.maxBitrate=10,x.maxFrameRate=2)))})),v&&(f.encodings=m,l.debug("setting encodings",Object.assign(Object.assign({},d),{encodings:f.encodings})),yield i.setParameters(f))}finally{h()}})}function GT(i){switch(i){case"f":return Sn.HIGH;case"h":return Sn.MEDIUM;case"q":return Sn.LOW;default:return Sn.HIGH}}function _b(i,e,n,s){if(!n)return[new xs({quality:Sn.HIGH,width:i,height:e,bitrate:0,ssrc:0})];if(s){const r=n[0].scalabilityMode,l=new HT(r),d=[],h=l.suffix=="h"?1.5:2,f=l.suffix=="h"?2:3;for(let m=0;m<l.spatial;m+=1)d.push(new xs({quality:Math.min(Sn.HIGH,l.spatial-1)-m,width:Math.ceil(i/Math.pow(h,m)),height:Math.ceil(e/Math.pow(h,m)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(f,m)):0,ssrc:0}));return d}return n.map(r=>{var l,d,h;const f=(l=r.scaleResolutionDownBy)!==null&&l!==void 0?l:1;let m=GT((d=r.rid)!==null&&d!==void 0?d:"");return new xs({quality:m,width:Math.ceil(i/f),height:Math.ceil(e/f),bitrate:(h=r.maxBitrate)!==null&&h!==void 0?h:0,ssrc:0})})}const Ob="_lossy",Ab="_reliable",WA=2*1e3,nf="leave-reconnect",eM=3e4;var An;(function(i){i[i.New=0]="New",i[i.Connected=1]="Connected",i[i.Disconnected=2]="Disconnected",i[i.Reconnecting=3]="Reconnecting",i[i.Closed=4]="Closed"})(An||(An={}));class tM extends oi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Om.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=An.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ae,this.reliableDataSequence=1,this.reliableMessageBuffer=new yb,this.reliableReceivedState=new kA(eM),this.midToTrackId={},this.handleDataChannel=s=>N(this,[s],void 0,function(r){var l=this;let{channel:d}=r;return(function*(){if(d){if(d.label===Ab)l.reliableDCSub=d;else if(d.label===Ob)l.lossyDCSub=d;else return;l.log.debug("on data channel ".concat(d.id,", ").concat(d.label),l.logContext),d.onmessage=l.handleDataMessage}})()}),this.handleDataMessage=s=>N(this,void 0,void 0,function*(){var r,l,d,h,f;const m=yield this.dataProcessLock.lock();try{let v;if(s.data instanceof ArrayBuffer)v=s.data;else if(s.data instanceof Blob)v=yield s.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:s.data}));return}const y=Qt.fromBinary(new Uint8Array(v));if(y.sequence>0&&y.participantSid!==""){const x=this.reliableReceivedState.get(y.participantSid);if(x&&y.sequence<=x)return;this.reliableReceivedState.set(y.participantSid,y.sequence)}if(((r=y.value)===null||r===void 0?void 0:r.case)==="speaker")this.emit(le.ActiveSpeakersUpdate,y.value.value.speakers);else if(((l=y.value)===null||l===void 0?void 0:l.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const x=yield(d=this.e2eeManager)===null||d===void 0?void 0:d.handleEncryptedData(y.value.value.encryptedValue,y.value.value.iv,y.participantIdentity,y.value.value.keyIndex),S=_S.fromBinary(x.payload),k=new Qt({value:S.value,participantIdentity:y.participantIdentity,participantSid:y.participantSid});((h=k.value)===null||h===void 0?void 0:h.case)==="user"&&Mb(k,k.value.value),this.emit(le.DataPacketReceived,k,y.value.value.encryptionType)}else((f=y.value)===null||f===void 0?void 0:f.case)==="user"&&Mb(y,y.value.value),this.emit(le.DataPacketReceived,y,Ot.NONE)}finally{m()}}),this.handleDataError=s=>{const l=s.currentTarget.maxRetransmits===0?"lossy":"reliable";if(s instanceof ErrorEvent&&s.error){const{error:d}=s.error;this.log.error("DataChannel error on ".concat(l,": ").concat(s.message),Object.assign(Object.assign({},this.logContext),{error:d}))}else this.log.error("Unknown DataChannel error on ".concat(l),Object.assign(Object.assign({},this.logContext),{event:s}))},this.handleBufferedAmountLow=s=>{const l=s.currentTarget.maxRetransmits===0?Oe.LOSSY:Oe.RELIABLE;this.updateAndEmitDCBufferStatus(l)},this.handleDisconnect=(s,r)=>{if(this._isClosed)return;this.log.warn("".concat(s," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const l=f=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(f,"ms. giving up"),this.logContext),this.emit(le.Disconnected),this.close()},d=Date.now()-this.reconnectStart;let h=this.getNextRetryDelay({elapsedMs:d,retryCount:this.reconnectAttempts});if(h===null){l(d);return}s===nf&&(h=0),this.log.debug("reconnecting in ".concat(h,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Vt.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),h)},this.waitForRestarted=()=>new Promise((s,r)=>{this.pcState===An.Connected&&s();const l=()=>{this.off(le.Disconnected,d),s()},d=()=>{this.off(le.Restarted,l),r()};this.once(le.Restarted,l),this.once(le.Disconnected,d)}),this.updateAndEmitDCBufferStatus=s=>{const r=this.isBufferStatusLow(s);typeof r<"u"&&r!==this.dcBufferStatus.get(s)&&(this.dcBufferStatus.set(s,r),this.emit(le.DCBufferStatusChanged,r,s))},this.isBufferStatusLow=s=>{const r=this.dataChannelForKind(s);if(r)return s===Oe.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===ut.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect($s.RR_SIGNAL_DISCONNECTED))},this.log=Ui((n=e.loggerName)!==null&&n!==void 0?n:Gn.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new wm(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new Xt,this.dataProcessLock=new Xt,this.dcBufferStatus=new Map([[Oe.LOSSY,!0],[Oe.RELIABLE,!0]]),this.client.onParticipantUpdate=s=>this.emit(le.ParticipantUpdate,s),this.client.onConnectionQuality=s=>this.emit(le.ConnectionQualityUpdate,s),this.client.onRoomUpdate=s=>this.emit(le.RoomUpdate,s),this.client.onSubscriptionError=s=>this.emit(le.SubscriptionError,s),this.client.onSubscriptionPermissionUpdate=s=>this.emit(le.SubscriptionPermissionUpdate,s),this.client.onSpeakersChanged=s=>this.emit(le.SpeakersChanged,s),this.client.onStreamStateUpdate=s=>this.emit(le.StreamStateChanged,s),this.client.onRequestResponse=s=>this.emit(le.SignalRequestResponse,s)}get logContext(){var e,n,s,r,l,d;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.room)===null||r===void 0?void 0:r.sid,participant:(d=(l=this.latestJoinResponse)===null||l===void 0?void 0:l.participant)===null||d===void 0?void 0:d.identity,pID:this.participantSid}}join(e,n,s,r){return N(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=s,this.maxJoinAttempts=s.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const l=yield this.client.join(e,n,s,r);return this._isClosed=!1,this.latestJoinResponse=l,this.subscriberPrimary=l.subscriberPrimary,this.pcManager||(yield this.configure(l)),(!this.subscriberPrimary||l.fastPublish)&&this.negotiate().catch(d=>{Ae.error(d,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=l.clientConfiguration,this.emit(le.SignalConnected,l),l}catch(l){if(l instanceof Qe&&l.reason===Be.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,s,r);throw l}})}close(){return N(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(le.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return N(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=s=>{s&&(s.close(),s.onbufferedamountlow=null,s.onclose=null,s.onclosing=null,s.onerror=null,s.onmessage=null,s.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new yb,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return N(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ai("a track with the same ID has already been published");return new Promise((n,s)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],s(new Qe("publication of local track timed out, no response from server",Be.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:l=>{clearTimeout(r),n(l)},reject:()=>{clearTimeout(r),s(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return N(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return N(this,void 0,void 0,function*(){var n,s;if(this.pcManager&&this.pcManager.currentState!==mt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new MA(r,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(le.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(l,d)=>{this.client.sendIceCandidate(l,d)},this.pcManager.onPublisherOffer=(l,d)=>{this.client.sendOffer(l,d)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(l,d,h)=>N(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(l),this.logContext),["closed","disconnected","failed"].includes(d)&&(this.publisherConnectionPromise=void 0),l===mt.CONNECTED){const v=this.pcState===An.New;this.pcState=An.Connected,v&&this.emit(le.Connected,e)}else l===mt.FAILED&&(this.pcState===An.Connected||this.pcState===An.Reconnecting)&&(this.pcState=An.Disconnected,this.handleDisconnect("peerconnection failed",h==="failed"?$s.RR_SUBSCRIBER_FAILED:$s.RR_PUBLISHER_FAILED));const f=this.client.isDisconnected||this.client.currentState===ut.RECONNECTING,m=[mt.FAILED,mt.CLOSING,mt.CLOSED].includes(l);f&&m&&!this._isClosed&&this.emit(le.Offline)}),this.pcManager.onTrack=l=>{l.streams.length!==0&&this.emit(le.MediaTrackAdded,l.track,l.streams[0],l.receiver)},nM((s=e.serverInfo)===null||s===void 0?void 0:s.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,s)=>N(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:s})),this.midToTrackId=s,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,s)=>N(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=s;const r=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:s}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],s(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(le.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(le.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(le.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(le.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(le.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,s;const r={direction:"recvonly"};for(let l=0;l<e.numAudios;l++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",r);for(let l=0;l<e.numVideos;l++)(s=this.pcManager)===null||s===void 0||s.addPublisherTransceiverOfKind("video",r);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",$s.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:qT,regionSettings:e.regions})),e.action){case rr.DISCONNECT:this.emit(le.Disconnected,e?.reason),this.close();break;case rr.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(nf);break;case rr.RESUME:this.handleDisconnect(nf)}}}makeRTCConfiguration(e){var n;const s=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),s.encodedInsertableStreams=!0),e.iceServers&&!s.iceServers){const r=[];e.iceServers.forEach(l=>{const d={urls:l.urls};l.username&&(d.username=l.username),l.credential&&(d.credential=l.credential),r.push(d)}),s.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Mo.ENABLED&&(s.iceTransportPolicy="relay"),s.sdpSemantics="unified-plan",s.continualGatheringPolicy="gather_continually",s}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Ob,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Ab,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,s){return N(this,void 0,void 0,function*(){if(Lf())return yield this.createTransceiverRTCRtpSender(e,n,s);if(If())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Rt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,s,r){return N(this,void 0,void 0,function*(){if(Lf())return this.createSimulcastTransceiverSender(e,n,s,r);if(If())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Rt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,s){return N(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),ws(e)&&(e.codec=n.videoCodec);const l={direction:"sendonly",streams:r};return s&&(l.sendEncodings=s),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,l)).sender})}createSimulcastTransceiverSender(e,n,s,r){return N(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");const l={direction:"sendonly"};r&&(l.sendEncodings=r);const d=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,l);if(s.videoCodec)return e.setSimulcastTrackSender(s.videoCodec,d.sender),d.sender})}createRTCRtpSender(e){return N(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return N(this,void 0,void 0,function*(){var n,s,r;if(!this._isClosed){if(this.attemptingReconnect){Ae.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Mo.DISABLED||((r=(s=this.pcManager)===null||s===void 0?void 0:s.currentState)!==null&&r!==void 0?r:mt.NEW)===mt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(l){this.reconnectAttempts+=1;let d=!0;l instanceof Rt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:l})),d=!1):l instanceof er||(this.fullReconnectOnNext=!0),d?this.handleDisconnect("reconnect",$s.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(le.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return N(this,void 0,void 0,function*(){var n,s,r;try{if(!this.url||!this.token)throw new Rt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(le.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let l;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new er;l=yield this.join(e??this.url,this.token,this.signalOpts)}catch(d){throw d instanceof Qe&&d.reason===Be.NotAllowed?new Rt("could not reconnect, token might be expired"):new er}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(le.SignalRestarted,l),yield this.waitForPCReconnected(),this.client.currentState!==ut.CONNECTED)throw new er("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(le.Restarted)}catch(l){const d=yield(s=this.regionUrlProvider)===null||s===void 0?void 0:s.getNextBestRegionUrl();if(d){yield this.restartConnection(d);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),l}})}resumeConnection(e){return N(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Rt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Rt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(le.Resuming);let s;try{this.setupSignalClientCallbacks(),s=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let l="";throw r instanceof Error&&(l=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Qe&&r.reason===Be.NotAllowed?new Rt("could not reconnect, token might be expired"):r instanceof Qe&&r.reason===Be.LeaveRequest?r:new er(l)}if(this.emit(le.SignalResumed),s){const r=this.makeRTCConfiguration(s);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=s.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==ut.CONNECTED)throw new er("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),s?.lastMessageSeq&&this.resendReliableMessagesForResume(s.lastMessageSeq),this.emit(le.Resumed)})}waitForPCInitialConnection(e,n){return N(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return N(this,void 0,void 0,function*(){this.pcState=An.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield $t(WA),!this.pcManager)throw new Rt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=An.Connected}catch(e){throw this.pcState=An.Disconnected,new Qe("could not establish PC connection, ".concat(e.message),Be.InternalError)}})}publishRpcResponse(e,n,s,r){return N(this,void 0,void 0,function*(){const l=new Qt({destinationIdentities:[e],kind:Oe.RELIABLE,value:{case:"rpcResponse",value:new gm({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:s??""}})}});yield this.sendDataPacket(l,Oe.RELIABLE)})}publishRpcAck(e,n){return N(this,void 0,void 0,function*(){const s=new Qt({destinationIdentities:[e],kind:Oe.RELIABLE,value:{case:"rpcAck",value:new pm({requestId:n})}});yield this.sendDataPacket(s,Oe.RELIABLE)})}sendDataPacket(e,n){return N(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const l=wO(e);if(l){const d=yield this.e2eeManager.encryptData(l.toBinary());e.value={case:"encryptedPacket",value:new RS({encryptedValue:d.payload,iv:d.iv,keyIndex:d.keyIndex})}}}n===Oe.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const s=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===Oe.RELIABLE&&this.reliableMessageBuffer.push({data:s,sequence:e.sequence}),this.attemptingReconnect)return;r.send(s)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return N(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Oe.RELIABLE);const n=this.dataChannelForKind(Oe.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(s=>{n.send(s.data)})),this.updateAndEmitDCBufferStatus(Oe.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,s)=>N(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>s("Engine closed");for(this.once(le.Closing,r);!this.dcBufferStatus.get(e);)yield $t(10);this.off(le.Closing,r),n()}}))}ensureDataTransportConnected(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var l;if(!s.pcManager)throw new Rt("PC manager is closed");const d=r?s.pcManager.subscriber:s.pcManager.publisher,h=r?"Subscriber":"Publisher";if(!d)throw new Qe("".concat(h," connection not set"),Be.InternalError);let f=!1;!r&&!s.dataChannelForKind(n,r)&&(s.createDataChannels(),f=!0),!f&&!r&&!s.pcManager.publisher.isICEConnected&&s.pcManager.publisher.getICEConnectionState()!=="checking"&&(f=!0),f&&s.negotiate().catch(y=>{Ae.error(y,s.logContext)});const m=s.dataChannelForKind(n,r);if(m?.readyState==="open")return;const v=new Date().getTime()+s.peerConnectionTimeout;for(;new Date().getTime()<v;){if(d.isICEConnected&&((l=s.dataChannelForKind(n,r))===null||l===void 0?void 0:l.readyState)==="open")return;yield $t(50)}throw new Qe("could not establish ".concat(h," connection, state: ").concat(d.getICEConnectionState()),Be.InternalError)})()})}ensurePublisherConnected(e){return N(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==mt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return N(this,void 0,void 0,function*(){return new Promise((e,n)=>N(this,void 0,void 0,function*(){if(!this.pcManager){n(new Mf("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const s=new AbortController,r=()=>{s.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(le.Closing,r),this.pcManager.publisher.once(ur.RTPVideoPayloadTypes,l=>{const d=new Map;l.forEach(h=>{const f=h.codec.toLowerCase();$O(f)&&d.set(h.payload,f)}),this.emit(le.RTPVideoMapUpdate,d)});try{yield this.pcManager.negotiate(s),e()}catch(l){l instanceof Mf&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",$s.RR_UNKNOWN),n(l)}finally{this.off(le.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===Oe.LOSSY)return this.lossyDCSub;if(e===Oe.RELIABLE)return this.reliableDCSub}else{if(e===Oe.LOSSY)return this.lossyDC;if(e===Oe.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var s,r,l,d;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const h=this.pcManager.publisher.getLocalDescription(),f=this.pcManager.publisher.getRemoteDescription(),m=(s=this.pcManager.subscriber)===null||s===void 0?void 0:s.getRemoteDescription(),v=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getLocalDescription(),y=(d=(l=this.signalOpts)===null||l===void 0?void 0:l.autoSubscribe)!==null&&d!==void 0?d:!0,x=new Array,S=new Array;e.forEach(k=>{k.isDesired!==y&&x.push(k.trackSid),k.isEnabled||S.push(k.trackSid)}),this.client.sendSyncState(new Sm({answer:this.options.singlePeerConnection?f?ir({sdp:f.sdp,type:f.type}):void 0:v?ir({sdp:v.sdp,type:v.type}):void 0,offer:this.options.singlePeerConnection?h?ir({sdp:h.sdp,type:h.type}):void 0:m?ir({sdp:m.sdp,type:m.type}):void 0,subscription:new su({trackSids:x,subscribe:!y,participantTracks:[]}),publishTracks:oA(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:S,datachannelReceiveStates:this.reliableReceivedState.map((k,C)=>new QS({publisherSid:C,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(s,r)=>{s?.id!==void 0&&s.id!==null&&e.push(new XS({label:s.label,id:s.id,target:r}))};return n(this.dataChannelForKind(Oe.LOSSY),Vn.PUBLISHER),n(this.dataChannelForKind(Oe.RELIABLE),Vn.PUBLISHER),n(this.dataChannelForKind(Oe.LOSSY,!0),Vn.SUBSCRIBER),n(this.dataChannelForKind(Oe.RELIABLE,!0),Vn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Vt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){ln()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){ln()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(e){var n;const s=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(s){const r=Object.entries(this.midToTrackId).find(l=>{let[d]=l;return d===s});if(r)return r[1]}}}class er extends Error{}function nM(i){return i!==void 0&&i>13}function Mb(i,e){const n=i.participantIdentity?i.participantIdentity:e.participantIdentity;i.participantIdentity=n,e.participantIdentity=n;const s=i.destinationIdentities.length!==0?i.destinationIdentities:e.destinationIdentities;i.destinationIdentities=s,e.destinationIdentities=s}class KT{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Mn("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),Jt.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Mn("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),Jt.LengthExceeded)}}constructor(e,n,s,r){this.reader=n,this.totalByteSize=s,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=r}}class iM extends KT{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new Pn,s=null,r=null;if(this.signal){const d=this.signal;r=()=>{var h;(h=n.reject)===null||h===void 0||h.call(n,d.reason)},d.addEventListener("abort",r),s=d}const l=()=>{e.releaseLock(),s&&r&&s.removeEventListener("abort",r),this.signal=void 0};return{next:()=>N(this,void 0,void 0,function*(){var d,h;try{const{done:f,value:m}=yield Promise.race([e.read(),n.promise,(h=(d=this.outOfBandFailureRejectingFuture)===null||d===void 0?void 0:d.promise)!==null&&h!==void 0?h:new Promise(()=>{})]);return f?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(m),{done:!1,value:m.content})}catch(f){throw l(),f}}),return(){return N(this,void 0,void 0,function*(){return l(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var s,r,l,d;let h=new Set;const f=n.signal?e.withAbortSignal(n.signal):e;try{for(var m=!0,v=Oi(f),y;y=yield v.next(),s=y.done,!s;m=!0){d=y.value,m=!1;const x=d;h.add(x)}}catch(x){r={error:x}}finally{try{!m&&!s&&(l=v.return)&&(yield l.call(v))}finally{if(r)throw r.error}}return Array.from(h)})()})}}class sM extends KT{constructor(e,n,s,r){super(e,n,s,r),this.receivedChunks=new Map}handleChunkReceived(e){var n;const s=Nc(e.chunkIndex),r=this.receivedChunks.get(s);if(r&&r.version>e.version)return;this.receivedChunks.set(s,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const l=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,l)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let s=new Pn,r=null,l=null;if(this.signal){const h=this.signal;l=()=>{var f;(f=s.reject)===null||f===void 0||f.call(s,h.reason)},h.addEventListener("abort",l),r=h}const d=()=>{e.releaseLock(),r&&l&&r.removeEventListener("abort",l),this.signal=void 0};return{next:()=>N(this,void 0,void 0,function*(){var h,f;try{const{done:m,value:v}=yield Promise.race([e.read(),s.promise,(f=(h=this.outOfBandFailureRejectingFuture)===null||h===void 0?void 0:h.promise)!==null&&f!==void 0?f:new Promise(()=>{})]);if(m)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(v);let y;try{y=n.decode(v.content)}catch(x){throw new Mn("Cannot decode datastream chunk ".concat(v.chunkIndex," as text: ").concat(x),Jt.DecodeFailed)}return{done:!1,value:y}}}catch(m){throw d(),m}}),return(){return N(this,void 0,void 0,function*(){return d(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return N(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var s,r,l,d;let h="";const f=n.signal?e.withAbortSignal(n.signal):e;try{for(var m=!0,v=Oi(f),y;y=yield v.next(),s=y.done,!s;m=!0)d=y.value,m=!1,h+=d}catch(x){r={error:x}}finally{try{!m&&!s&&(l=v.return)&&(yield l.call(v))}finally{if(r)throw r.error}}return h})()})}}class aM{constructor(){this.log=Ae,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Mn('A text stream handler for topic "'.concat(e,'" has already been set.'),Jt.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Mn('A byte stream handler for topic "'.concat(e,'" has already been set.'),Jt.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,s,r,l;const d=Array.from(this.textStreamControllers.entries()).filter(f=>f[1].sendingParticipantIdentity===e),h=Array.from(this.byteStreamControllers.entries()).filter(f=>f[1].sendingParticipantIdentity===e);if(d.length>0||h.length>0){const f=new Mn("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),Jt.AbnormalEnd);for(const[m,v]of h)(s=(n=v.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(n,f),this.byteStreamControllers.delete(m);for(const[m,v]of d)(l=(r=v.outOfBandFailureRejectingFuture).reject)===null||l===void 0||l.call(r,f),this.textStreamControllers.delete(m)}}handleDataStreamPacket(e,n){return N(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,s){return N(this,void 0,void 0,function*(){var r;if(e.contentHeader.case==="byteHeader"){const l=this.byteStreamHandlers.get(e.topic);if(!l){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let d;const h=new Pn;h.promise.catch(v=>{this.log.error(v)});const f={id:e.streamId,name:(r=e.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Nc(e.timestamp),attributes:e.attributes,encryptionType:s},m=new ReadableStream({start:v=>{if(d=v,this.textStreamControllers.has(e.streamId))throw new Mn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Jt.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:f,controller:d,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:h})}});l(new iM(f,m,Nc(e.totalLength),h),{identity:n})}else if(e.contentHeader.case==="textHeader"){const l=this.textStreamHandlers.get(e.topic);if(!l){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let d;const h=new Pn;h.promise.catch(v=>{this.log.error(v)});const f={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:s},m=new ReadableStream({start:v=>{if(d=v,this.textStreamControllers.has(e.streamId))throw new Mn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Jt.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:f,controller:d,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:h})}});l(new sM(f,m,Nc(e.totalLength),h),{identity:n})}})}handleStreamChunk(e,n){const s=this.byteStreamControllers.get(e.streamId);s&&(s.info.encryptionType!==n?(s.controller.error(new Mn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),Jt.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&s.controller.enqueue(e));const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Mn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Jt.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e))}handleStreamTrailer(e,n){const s=this.textStreamControllers.get(e.streamId);s&&(s.info.encryptionType!==n?s.controller.error(new Mn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),Jt.EncryptionTypeMismatch)):(s.info.attributes=Object.assign(Object.assign({},s.info.attributes),e.attributes),s.controller.close(),this.textStreamControllers.delete(e.streamId)));const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Mn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Jt.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class YT{constructor(e,n,s){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=s,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return N(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class rM extends YT{}class oM extends YT{}const Db=15e3;class lM{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return N(this,void 0,void 0,function*(){var s;const r=crypto.randomUUID(),d=new TextEncoder().encode(e).byteLength,h=(s=n?.attachments)===null||s===void 0?void 0:s.map(()=>crypto.randomUUID()),f=new Array(h?h.length+1:1).fill(0),m=(y,x)=>{var S;f[x]=y;const k=f.reduce((C,w)=>C+w,0);(S=n?.onProgress)===null||S===void 0||S.call(n,k)},v=yield this.streamText({streamId:r,totalSize:d,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:h,attributes:n?.attributes});return yield v.write(e),m(1,0),yield v.close(),n?.attachments&&h&&(yield Promise.all(n.attachments.map((y,x)=>N(this,void 0,void 0,function*(){return this._sendFile(h[x],y,{topic:n.topic,mimeType:y.type,onProgress:S=>{m(S,x+1)}})})))),v.info})}streamText(e){return N(this,void 0,void 0,function*(){var n,s,r;const l=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d={id:l,mimeType:"text/plain",timestamp:Date.now(),topic:(s=e?.topic)!==null&&s!==void 0?s:"",size:e?.totalSize,attributes:e?.attributes,encryptionType:!((r=this.engine.e2eeManager)===null||r===void 0)&&r.isDataChannelEncryptionEnabled?Ot.GCM:Ot.NONE},h=new Bc({streamId:l,mimeType:d.mimeType,topic:d.topic,timestamp:Zs(d.timestamp),totalLength:Zs(e?.totalSize),attributes:d.attributes,contentHeader:{case:"textHeader",value:new qS({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?Tf.UPDATE:Tf.CREATE})}}),f=e?.destinationIdentities,m=new Qt({destinationIdentities:f,value:{case:"streamHeader",value:h}});yield this.engine.sendDataPacket(m,Oe.RELIABLE);let v=0;const y=this.engine,x=new WritableStream({write(C){return N(this,void 0,void 0,function*(){for(const w of iA(C,Db)){yield y.waitForBufferStatusLow(Oe.RELIABLE);const _=new qc({content:w,streamId:l,chunkIndex:Zs(v)}),L=new Qt({destinationIdentities:f,value:{case:"streamChunk",value:_}});yield y.sendDataPacket(L,Oe.RELIABLE),v+=1}})},close(){return N(this,void 0,void 0,function*(){const C=new Fc({streamId:l}),w=new Qt({destinationIdentities:f,value:{case:"streamTrailer",value:C}});yield y.sendDataPacket(w,Oe.RELIABLE)})},abort(C){console.log("Sink error:",C)}});let S=()=>N(this,void 0,void 0,function*(){yield k.close()});y.once(le.Closing,S);const k=new rM(x,d,()=>this.engine.off(le.Closing,S));return k})}sendFile(e,n){return N(this,void 0,void 0,function*(){const s=crypto.randomUUID();return yield this._sendFile(s,e,n),{id:s}})}_sendFile(e,n,s){return N(this,void 0,void 0,function*(){var r;const l=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=s?.mimeType)!==null&&r!==void 0?r:n.type,topic:s?.topic,destinationIdentities:s?.destinationIdentities}),d=n.stream().getReader();for(;;){const{done:h,value:f}=yield d.read();if(h)break;yield l.write(f)}return yield l.close(),l.info})}streamBytes(e){return N(this,void 0,void 0,function*(){var n,s,r,l,d,h;const f=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),m=e?.destinationIdentities,v={id:f,mimeType:(s=e?.mimeType)!==null&&s!==void 0?s:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(l=e?.name)!==null&&l!==void 0?l:"unknown",encryptionType:!((d=this.engine.e2eeManager)===null||d===void 0)&&d.isDataChannelEncryptionEnabled?Ot.GCM:Ot.NONE},y=new Bc({totalLength:Zs((h=v.size)!==null&&h!==void 0?h:0),mimeType:v.mimeType,streamId:f,topic:v.topic,timestamp:Zs(Date.now()),attributes:v.attributes,contentHeader:{case:"byteHeader",value:new FS({name:v.name})}}),x=new Qt({destinationIdentities:m,value:{case:"streamHeader",value:y}});yield this.engine.sendDataPacket(x,Oe.RELIABLE);let S=0;const k=new Xt,C=this.engine,w=this.log,_=new WritableStream({write(F){return N(this,void 0,void 0,function*(){const j=yield k.lock();let M=0;try{for(;M<F.byteLength;){const P=F.slice(M,M+Db);yield C.waitForBufferStatusLow(Oe.RELIABLE);const I=new Qt({destinationIdentities:m,value:{case:"streamChunk",value:new qc({content:P,streamId:f,chunkIndex:Zs(S)})}});yield C.sendDataPacket(I,Oe.RELIABLE),S+=1,M+=P.byteLength}}finally{j()}})},close(){return N(this,void 0,void 0,function*(){const F=new Fc({streamId:f}),j=new Qt({destinationIdentities:m,value:{case:"streamTrailer",value:F}});yield C.sendDataPacket(j,Oe.RELIABLE)})},abort(F){w.error("Sink error:",F)}});return new oM(_,v)})}}class JT extends ${constructor(e,n,s,r,l){super(e,s,l),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?se.Muted:se.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=s=>{s.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(se.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return N(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Mm)),lA()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const s=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(s){const{timestamp:r,rtpTimestamp:l}=s;l&&this.rtpTimestamp!==l&&(this.emit(se.TimeSyncUpdate,{timestamp:r,rtpTimestamp:l}),this.rtpTimestamp=l)}};e()}}class cM extends JT{constructor(e,n,s,r,l,d){super(e,n,$.Kind.Audio,s,d),this.monitorReceiver=()=>N(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const h=yield this.getReceiverStats();h&&this.prevStats&&this.receiver&&(this._currentBitrate=ou(h,this.prevStats)),this.prevStats=h}),this.audioContext=r,this.webAudioPluginNodes=[],l&&(this.sinkId=l.deviceId)}setVolume(e){var n;for(const s of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):s.volume=e;si()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(si())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return N(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Uf(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Uf(e)&&e.setSinkId(this.sinkId).catch(s=>{this.log.error("Failed to set sink id on remote audio track",s,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let s=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{s.connect(r),s=r}),this.gainNode=e.createGain(),s.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(se.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(se.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return N(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(s=>{s.type==="inbound-rtp"&&(n={type:"audio",streamId:s.id,timestamp:s.timestamp,jitter:s.jitter,bytesReceived:s.bytesReceived,concealedSamples:s.concealedSamples,concealmentEvents:s.concealmentEvents,silentConcealedSamples:s.silentConcealedSamples,silentConcealmentEvents:s.silentConcealmentEvents,totalAudioEnergy:s.totalAudioEnergy,totalSamplesDuration:s.totalSamplesDuration})}),n})}}const sf=100;class uM extends JT{constructor(e,n,s,r,l){super(e,n,$.Kind.Video,s,l),this.elementInfos=[],this.monitorReceiver=()=>N(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const d=yield this.getReceiverStats();d&&this.prevStats&&this.receiver&&(this._currentBitrate=ou(d,this.prevStats)),this.prevStats=d}),this.debouncedHandleResize=Rm(()=>{this.updateDimensions()},sf),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),this.log.debug("setStreamState",e),this.isAdaptiveStream&&e===$.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?lr(this._mediaStreamTrack,n):nr(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new dM(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(s=>s===e);for(const s of n)s.stopObserving();this.elementInfos=this.elementInfos.filter(s=>s!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const s of n)this.stopObservingElement(s);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return N(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,s="",r=new Map;return e.forEach(l=>{l.type==="inbound-rtp"?(s=l.codecId,n={type:"video",streamId:l.id,framesDecoded:l.framesDecoded,framesDropped:l.framesDropped,framesReceived:l.framesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,frameWidth:l.frameWidth,frameHeight:l.frameHeight,pliCount:l.pliCount,firCount:l.firCount,nackCount:l.nackCount,jitter:l.jitter,timestamp:l.timestamp,bytesReceived:l.bytesReceived,decoderImplementation:l.decoderImplementation}):l.type==="codec"&&r.set(l.id,l)}),n&&s!==""&&r.get(s)&&(n.mimeType=r.get(s).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(s=>s.element===e);for(const s of n)this.stopObservingElementInfo(s)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return N(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,s;const r=this.elementInfos.reduce((f,m)=>Math.max(f,m.visibilityChangedAt||0),0),l=!((s=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&s!==void 0)||s?this.isInBackground:!1,d=this.elementInfos.some(f=>f.pictureInPicture),h=this.elementInfos.some(f=>f.visible)&&!l||d;if(!(this.lastVisible===h&&!e)){if(!h&&Date.now()-r<sf){Vt.setTimeout(()=>{this.updateVisibility()},sf);return}this.lastVisible=h,this.emit(se.VisibilityChanged,h,this)}}updateDimensions(){var e,n;let s=0,r=0;const l=this.getPixelDensity();for(const d of this.elementInfos){const h=d.width()*l,f=d.height()*l;h+f>s+r&&(s=h,r=f)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===s&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:s,height:r},this.emit(se.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?ub():n||(ub()>2?2:1)}}class dM{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=s=>{var r;const{target:l,isIntersecting:d}=s;l===this.element&&(this.isIntersecting=d,this.isPiP=To(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var s,r,l;(r=(s=window.documentPictureInPicture)===null||s===void 0?void 0:s.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=To(this.element),(l=this.handleVisibilityChanged)===null||l===void 0||l.call(this)},this.onLeavePiP=()=>{var s;this.isPiP=To(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.element=e,this.isIntersecting=n??Yf(e),this.isPiP=ln()&&To(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,s;this.isIntersecting=Yf(this.element),this.isPiP=To(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,hb().observe(this.element),db().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(s=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||s===void 0||s.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,s,r,l;(e=hb())===null||e===void 0||e.unobserve(this.element),(n=db())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(s=window.documentPictureInPicture)===null||s===void 0||s.removeEventListener("enter",this.onEnterPiP),(l=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||l===void 0||l.removeEventListener("pagehide",this.onLeavePiP)}}function To(i){var e,n;return document.pictureInPictureElement===i?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Yf(i,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Yf(i,e){const n=e||window;let s=i.offsetTop,r=i.offsetLeft;const l=i.offsetWidth,d=i.offsetHeight,{hidden:h}=i,{display:f}=getComputedStyle(i);for(;i.offsetParent;)i=i.offsetParent,s+=i.offsetTop,r+=i.offsetLeft;return s<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&s+d>n.pageYOffset&&r+l>n.pageXOffset&&!h&&f!=="none"}class ji extends oi.EventEmitter{constructor(e,n,s,r){var l;super(),this.metadataMuted=!1,this.encryption=Ot.NONE,this.log=Ae,this.handleMuted=()=>{this.emit(se.Muted)},this.handleUnmuted=()=>{this.emit(se.Unmuted)},this.log=Ui((l=r?.loggerName)!==null&&l!==void 0?l:Gn.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=s,this.source=$.Source.Unknown}setTrack(e){this.track&&(this.track.off(se.Muted,this.handleMuted),this.track.off(se.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(se.Muted,this.handleMuted),e.on(se.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Le(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Ot.NONE}get audioTrack(){if(ni(this.track))return this.track}get videoTrack(){if(ws(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=$.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===$.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(i){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(i.SubscriptionStatus||(i.SubscriptionStatus={})),(function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"})(i.PermissionStatus||(i.PermissionStatus={}))})(ji||(ji={}));class Jf extends ji{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,s,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(se.Ended)},this.handleCpuConstrained=()=>{this.track&&ws(this.track)&&this.emit(se.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(s)}setTrack(e){this.track&&(this.track.off(se.Ended,this.handleTrackEnded),this.track.off(se.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(se.Ended,this.handleTrackEnded),e.on(se.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return N(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return N(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return N(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return N(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(ni(this.track)){const n=this.track.getSourceTrackSettings(),s=new Set;return n.autoGainControl&&s.add(Pt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&s.add(Pt.TF_ECHO_CANCELLATION),n.noiseSuppression&&s.add(Pt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&s.add(Pt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||s.add(Pt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&s.add(Pt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(s.values())}else return[]}}function lu(i,e){return N(this,void 0,void 0,function*(){i??(i={});let n=!1;const{audioProcessor:s,videoProcessor:r,optionsWithoutProcessor:l}=IT(i);let d=l.audio,h=l.video;if(s&&typeof l.audio=="object"&&(l.audio.processor=s),r&&typeof l.video=="object"&&(l.video.processor=r),i.audio&&typeof l.audio=="object"&&typeof l.audio.deviceId=="string"){const y=l.audio.deviceId;l.audio.deviceId={exact:y},n=!0,d=Object.assign(Object.assign({},l.audio),{deviceId:{ideal:y}})}if(l.video&&typeof l.video=="object"&&typeof l.video.deviceId=="string"){const y=l.video.deviceId;l.video.deviceId={exact:y},n=!0,h=Object.assign(Object.assign({},l.video),{deviceId:{ideal:y}})}(l.audio===!0||typeof l.audio=="object"&&!l.audio.deviceId)&&(l.audio={deviceId:"default"}),l.video===!0?l.video={deviceId:"default"}:typeof l.video=="object"&&!l.video.deviceId&&(l.video.deviceId="default");const f=DT(l,zT,BT),m=Nm(f),v=navigator.mediaDevices.getUserMedia(m);l.audio&&(It.userMediaPromiseMap.set("audioinput",v),v.catch(()=>It.userMediaPromiseMap.delete("audioinput"))),l.video&&(It.userMediaPromiseMap.set("videoinput",v),v.catch(()=>It.userMediaPromiseMap.delete("videoinput")));try{const y=yield v;return yield Promise.all(y.getTracks().map(x=>N(this,void 0,void 0,function*(){const S=x.kind==="audio";let k=S?f.audio:f.video;(typeof k=="boolean"||!k)&&(k={});let C;const w=S?m.audio:m.video;typeof w!="boolean"&&(C=w);const _=x.getSettings().deviceId;C?.deviceId&&Ts(C.deviceId)!==_?C.deviceId=_:C||(C={deviceId:_});const L=qA(x,C,e);return L.kind===$.Kind.Video?L.source=$.Source.Camera:L.kind===$.Kind.Audio&&(L.source=$.Source.Microphone),L.mediaStream=y,ni(L)&&s?yield L.setProcessor(s):ws(L)&&r&&(yield L.setProcessor(r)),L})))}catch(y){if(!n)throw y;return lu(Object.assign(Object.assign({},i),{audio:d,video:h}),e)}})}function hM(i){return N(this,void 0,void 0,function*(){return(yield lu({audio:!1,video:!0}))[0]})}function fM(i){return N(this,void 0,void 0,function*(){return(yield lu({audio:!0,video:!1}))[0]})}var ys;(function(i){i.Excellent="excellent",i.Good="good",i.Poor="poor",i.Lost="lost",i.Unknown="unknown"})(ys||(ys={}));function mM(i){switch(i){case Co.EXCELLENT:return ys.Excellent;case Co.GOOD:return ys.Good;case Co.POOR:return ys.Poor;case Co.LOST:return ys.Lost;default:return ys.Unknown}}class QT extends oi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Do.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===ar.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,s,r,l,d){let h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Do.STANDARD;var f;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ys.Unknown,this.log=Ae,this.log=Ui((f=d?.loggerName)!==null&&f!==void 0?f:Gn.Participant),this.loggerOptions=d,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=s,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=h,this._attributes=l??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Pn,this.once(ce.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication($.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication($.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication($.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===ar.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==ar.ACTIVE&&this.emit(ce.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,s=this.metadata;this.metadata=e,n&&this.emit(ce.ParticipantMetadataChanged,s)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ce.ParticipantNameChanged,e)}_setAttributes(e){const n=cA(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ce.AttributesChanged,n)}setPermissions(e){var n,s,r,l,d,h;const f=this.permissions,m=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((s=this.permissions)===null||s===void 0?void 0:s.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((l=this.permissions)===null||l===void 0?void 0:l.hidden)||e.recorder!==((d=this.permissions)===null||d===void 0?void 0:d.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((v,y)=>{var x;return v!==((x=this.permissions)===null||x===void 0?void 0:x.canPublishSources[y])})||e.canSubscribeMetrics!==((h=this.permissions)===null||h===void 0?void 0:h.canSubscribeMetrics);return this.permissions=e,m&&this.emit(ce.ParticipantPermissionsChanged,f),m}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ce.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=mM(e),n!==this._connectionQuality&&this.emit(ce.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>ni(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(se.Muted,()=>{this.emit(ce.TrackMuted,e)}),e.on(se.Unmuted,()=>{this.emit(ce.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case $.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case $.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function pM(i){var e,n,s;if(!i.participantSid&&!i.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new YS({participantIdentity:(e=i.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=i.participantSid)!==null&&n!==void 0?n:"",allTracks:(s=i.allowAll)!==null&&s!==void 0?s:!1,trackSids:i.allowedTrackSids||[]})}class gM extends QT{constructor(e,n,s,r,l,d){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Ot.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Pn)},this.handleReconnected=()=>{var h,f;(f=(h=this.reconnectFuture)===null||h===void 0?void 0:h.resolve)===null||f===void 0||f.call(h),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var h,f,m,v,y,x;this.reconnectFuture&&(this.reconnectFuture.promise.catch(S=>this.log.warn(S.message,this.logContext)),(f=(h=this.reconnectFuture)===null||h===void 0?void 0:h.reject)===null||f===void 0||f.call(h,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((v=(m=this.signalConnectedFuture).reject)===null||v===void 0||v.call(m,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(x=(y=this.activeAgentFuture)===null||y===void 0?void 0:y.reject)===null||x===void 0||x.call(y,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=h=>{var f,m;h.participant&&this.updateInfo(h.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Pn),(m=(f=this.signalConnectedFuture).resolve)===null||m===void 0||m.call(f)},this.handleSignalRequestResponse=h=>{const{requestId:f,reason:m,message:v}=h,y=this.pendingSignalRequests.get(f);y&&(m!==Tm.OK&&y.reject(new ab(v,m)),this.pendingSignalRequests.delete(f))},this.handleDataPacket=h=>{switch(h.value.case){case"rpcResponse":let f=h.value.value,m=null,v=null;f.value.case==="payload"?m=f.value.value:f.value.case==="error"&&(v=gt.fromProto(f.value.value)),this.handleIncomingRpcResponse(f.requestId,m,v);break;case"rpcAck":let y=h.value.value;this.handleIncomingRpcAck(y.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(h=>pM(h)))},this.onTrackUnmuted=h=>{this.onTrackMuted(h,h.isUpstreamPaused)},this.onTrackMuted=(h,f)=>{if(f===void 0&&(f=!0),!h.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Le(h)));return}this.engine.updateMuteStatus(h.sid,f)},this.onTrackUpstreamPaused=h=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Le(h))),this.onTrackMuted(h,!0)},this.onTrackUpstreamResumed=h=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Le(h))),this.onTrackMuted(h,h.isMuted)},this.onTrackFeatureUpdate=h=>{const f=this.audioTrackPublications.get(h.sid);if(!f){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(h.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(f.trackSid,f.getTrackFeatures())},this.onTrackCpuConstrained=(h,f)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),Le(f))),this.emit(ce.LocalTrackCpuConstrained,h,f)},this.handleSubscribedQualityUpdate=h=>N(this,void 0,void 0,function*(){var f,m,v,y,x;if(!(!((x=this.roomOptions)===null||x===void 0)&&x.dynacast))return;const S=this.videoTrackPublications.get(h.trackSid);if(!S){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:h.trackSid}));return}if(!S.videoTrack)return;const k=yield S.videoTrack.setPublishingCodecs(h.subscribedCodecs);try{for(var C=!0,w=Oi(k),_;_=yield w.next(),f=_.done,!f;C=!0){y=_.value,C=!1;const L=y;zO(L)&&(this.log.debug("publish ".concat(L," for ").concat(S.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Le(S))),yield this.publishAdditionalCodecForTrack(S.videoTrack,L,S.options))}}catch(L){m={error:L}}finally{try{!C&&!f&&(v=w.return)&&(yield v.call(w))}finally{if(m)throw m.error}}}),this.handleLocalTrackUnpublished=h=>{const f=this.trackPublications.get(h.trackSid);if(!f){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:h.trackSid}));return}this.unpublishTrack(f.track)},this.handleTrackEnded=h=>N(this,void 0,void 0,function*(){if(h.source===$.Source.ScreenShare||h.source===$.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Le(h))),this.unpublishTrack(h);else if(h.isUserProvided)yield h.mute();else if(wi(h)||gs(h))try{if(ln())try{const f=yield navigator?.permissions.query({name:h.source===$.Source.Camera?"camera":"microphone"});if(f&&f.state==="denied")throw this.log.warn("user has revoked access to ".concat(h.source),Object.assign(Object.assign({},this.logContext),Le(h))),f.onchange=()=>{f.state!=="denied"&&(h.isMuted||h.restartTrack(),f.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}h.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Le(h))),wi(h)?yield h.restartTrack({deviceId:"default"}):yield h.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Le(h))),yield h.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=s,this.roomOptions=r,this.setupEngine(s),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=l,this.roomOutgoingDataStreamManager=d}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Ot.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(le.RemoteMute,(s,r)=>{const l=this.trackPublications.get(s);!l||!l.track||(r?l.mute():l.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(le.Connected,this.handleReconnected).on(le.SignalConnected,this.handleSignalConnected).on(le.SignalRestarted,this.handleReconnected).on(le.SignalResumed,this.handleReconnected).on(le.Restarting,this.handleReconnecting).on(le.Resuming,this.handleReconnecting).on(le.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(le.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(le.Closing,this.handleClosing).on(le.SignalRequestResponse,this.handleSignalRequestResponse).on(le.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return N(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return N(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return N(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return N(this,arguments,void 0,function(n){var s=this;let{metadata:r,name:l,attributes:d}=n;return(function*(){return new Promise((h,f)=>N(s,void 0,void 0,function*(){var m,v;try{let y=!1;const x=yield this.engine.client.sendUpdateLocalMetadata((m=r??this.metadata)!==null&&m!==void 0?m:"",(v=l??this.name)!==null&&v!==void 0?v:"",d),S=performance.now();for(this.pendingSignalRequests.set(x,{resolve:h,reject:k=>{f(k),y=!0},values:{name:l,metadata:r,attributes:d}});performance.now()-S<5e3&&!y;){if((!l||this.name===l)&&(!r||this.metadata===r)&&(!d||Object.entries(d).every(k=>{let[C,w]=k;return this.attributes[C]===w||w===""&&!this.attributes[C]}))){this.pendingSignalRequests.delete(x),h();return}yield $t(50)}f(new ab("Request to update local metadata timed out","TimeoutError"))}catch(y){y instanceof Error&&f(y)}}))})()})}setCameraEnabled(e,n,s){return this.setTrackEnabled($.Source.Camera,e,n,s)}setMicrophoneEnabled(e,n,s){return this.setTrackEnabled($.Source.Microphone,e,n,s)}setScreenShareEnabled(e,n,s){return this.setTrackEnabled($.Source.ScreenShare,e,n,s)}setE2EEEnabled(e){return N(this,void 0,void 0,function*(){this.encryptionType=e?Ot.GCM:Ot.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,s,r){return N(this,void 0,void 0,function*(){var l,d;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let h=this.getTrackPublication(e);if(n)if(h)yield h.unmute();else{let f;if(this.pendingPublishing.has(e)){const m=yield this.waitForPendingPublicationOfSource(e);return m||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield m?.unmute(),m}this.pendingPublishing.add(e);try{switch(e){case $.Source.Camera:f=yield this.createTracks({video:(l=s)!==null&&l!==void 0?l:!0});break;case $.Source.Microphone:f=yield this.createTracks({audio:(d=s)!==null&&d!==void 0?d:!0});break;case $.Source.ScreenShare:f=yield this.createScreenTracks(Object.assign({},s));break;default:throw new Ai(e)}}catch(m){throw f?.forEach(v=>{v.stop()}),m instanceof Error&&this.emit(ce.MediaDevicesError,m,Vf(e)),this.pendingPublishing.delete(e),m}for(const m of f){const v=Object.assign(Object.assign({},this.roomOptions.publishDefaults),s);e===$.Source.Microphone&&ni(m)&&v.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),m.startPreConnectBuffer())}try{const m=[];for(const y of f)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Le(y))),m.push(this.publishTrack(y,r));[h]=yield Promise.all(m)}catch(m){throw f?.forEach(v=>{v.stop()}),m}finally{this.pendingPublishing.delete(e)}}else if(!h?.track&&this.pendingPublishing.has(e)&&(h=yield this.waitForPendingPublicationOfSource(e),h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),h&&h.track)if(e===$.Source.ScreenShare){h=yield this.unpublishTrack(h.track);const f=this.getTrackPublication($.Source.ScreenShareAudio);f&&f.track&&this.unpublishTrack(f.track)}else yield h.mute();return h})}enableCameraAndMicrophone(){return N(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has($.Source.Camera)||this.pendingPublishing.has($.Source.Microphone))){this.pendingPublishing.add($.Source.Camera),this.pendingPublishing.add($.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete($.Source.Camera),this.pendingPublishing.delete($.Source.Microphone)}}})}createTracks(e){return N(this,void 0,void 0,function*(){var n,s;e??(e={});const r=DT(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(s=this.roomOptions)===null||s===void 0?void 0:s.videoCaptureDefaults);try{return(yield lu(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(h=>(ni(h)&&(this.microphoneError=void 0,h.setAudioContext(this.audioContext),h.source=$.Source.Microphone,this.emit(ce.AudioStreamAcquired)),ws(h)&&(this.cameraError=void 0,h.source=$.Source.Camera),h))}catch(l){throw l instanceof Error&&(e.audio&&(this.microphoneError=l),e.video&&(this.cameraError=l)),l}})}createScreenTracks(e){return N(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new km("getDisplayMedia not supported");e.resolution===void 0&&!GO()&&(e.resolution=Em.h1080fps30.resolution);const n=rA(e),s=yield navigator.mediaDevices.getDisplayMedia(n),r=s.getVideoTracks();if(r.length===0)throw new Ai("no video track found");const l=new Gc(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=$.Source.ScreenShare,e.contentHint&&(l.mediaStreamTrack.contentHint=e.contentHint);const d=[l];if(s.getAudioTracks().length>0){this.emit(ce.AudioStreamAcquired);const h=new Hc(s.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});h.source=$.Source.ScreenShareAudio,d.push(h)}return d})}publishTrack(e,n){return N(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return N(this,arguments,void 0,function(s,r){var l=this;let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var h,f,m,v;wi(s)&&s.setAudioContext(l.audioContext),yield(h=l.reconnectFuture)===null||h===void 0?void 0:h.promise,l.republishPromise&&!d&&(yield l.republishPromise),cr(s)&&l.pendingPublishPromises.has(s)&&(yield l.pendingPublishPromises.get(s));let y;if(s instanceof MediaStreamTrack)y=s.getConstraints();else{y=s.constraints;let _;switch(s.source){case $.Source.Microphone:_="audioinput";break;case $.Source.Camera:_="videoinput"}_&&l.activeDeviceMap.has(_)&&(y=Object.assign(Object.assign({},y),{deviceId:l.activeDeviceMap.get(_)}))}if(s instanceof MediaStreamTrack)switch(s.kind){case"audio":s=new Hc(s,y,!0,l.audioContext,{loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});break;case"video":s=new Gc(s,y,!0,{loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});break;default:throw new Ai("unsupported MediaStreamTrack kind ".concat(s.kind))}else s.updateLoggerOptions({loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});let x;if(l.trackPublications.forEach(_=>{_.track&&_.track===s&&(x=_)}),x)return l.log.warn("track has already been published, skipping",Object.assign(Object.assign({},l.logContext),Le(x))),x;const S=Object.assign(Object.assign({},l.roomOptions.publishDefaults),r),k="channelCount"in s.mediaStreamTrack.getSettings()&&s.mediaStreamTrack.getSettings().channelCount===2||s.mediaStreamTrack.getConstraints().channelCount===2,C=(f=S.forceStereo)!==null&&f!==void 0?f:k;C&&(S.dtx===void 0&&l.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},l.logContext),Le(s))),S.red===void 0&&l.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(m=S.dtx)!==null&&m!==void 0||(S.dtx=!1),(v=S.red)!==null&&v!==void 0||(S.red=!1)),!YO()&&l.roomOptions.e2ee&&(l.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},l.logContext)),S.simulcast=!1),S.source&&(s.source=S.source);const w=new Promise((_,L)=>N(l,void 0,void 0,function*(){try{if(this.engine.client.currentState!==ut.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Le(s)}));const F=setTimeout(()=>{L(new sb("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(F);const j=yield this.publish(s,S,C);_(j)}else try{const F=yield this.publish(s,S,C);_(F)}catch(F){L(F)}}catch(F){L(F)}}));l.pendingPublishPromises.set(s,w);try{return yield w}catch(_){throw _}finally{l.pendingPublishPromises.delete(s)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Pn),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Le(e))),!1;const{canPublish:n,canPublishSources:s}=this.permissions;return n&&(s.length===0||s.map(r=>uA(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Le(e))),!1)}publish(e,n,s){return N(this,void 0,void 0,function*(){var r,l,d,h,f,m,v,y,x,S;if(!this.hasPermissionsToPublish(e))throw new sb("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(X=>cr(e)&&X.source===e.source)&&e.source!==$.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Le(e))),n.stopMicTrackOnMute&&ni(e)&&(e.stopOnMute=!0),e.source===$.Source.ScreenShare&&oa()&&(n.simulcast=!1),n.videoCodec==="av1"&&!FO()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!VO()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Hf),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(X=>n.videoCodec===jo(X.mime))||(n.videoCodec=jo(this.enabledPublishVideoCodecs[0].mime)));const C=n.videoCodec;e.on(se.Muted,this.onTrackMuted),e.on(se.Unmuted,this.onTrackUnmuted),e.on(se.Ended,this.handleTrackEnded),e.on(se.UpstreamPaused,this.onTrackUpstreamPaused),e.on(se.UpstreamResumed,this.onTrackUpstreamResumed),e.on(se.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const w=[],_=!(!((r=n.dtx)!==null&&r!==void 0)||r),L=e.getSourceTrackSettings();L.autoGainControl&&w.push(Pt.TF_AUTO_GAIN_CONTROL),L.echoCancellation&&w.push(Pt.TF_ECHO_CANCELLATION),L.noiseSuppression&&w.push(Pt.TF_NOISE_SUPPRESSION),L.channelCount&&L.channelCount>1&&w.push(Pt.TF_STEREO),_&&w.push(Pt.TF_NO_DTX),wi(e)&&e.hasPreConnectBuffer&&w.push(Pt.TF_PRECONNECT_BUFFER);const F=new Po({cid:e.mediaStreamTrack.id,name:n.name,type:$.kindToProto(e.kind),muted:e.isMuted,source:$.sourceToProto(e.source),disableDtx:_,encryption:this.encryptionType,stereo:s,disableRed:this.isE2EEEnabled||!(!((l=n.red)!==null&&l!==void 0)||l),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:w});let j;if(e.kind===$.Kind.Video){let X={width:0,height:0};try{X=yield e.waitForDimensions()}catch{const he=(h=(d=this.roomOptions.videoCaptureDefaults)===null||d===void 0?void 0:d.resolution)!==null&&h!==void 0?h:Lo.h720.resolution;X={width:he.width,height:he.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Le(e)),{dims:X}))}F.width=X.width,F.height=X.height,gs(e)&&(ei(C)&&(e.source===$.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Le(e))))),n.scalabilityMode=(f=n.scalabilityMode)!==null&&f!==void 0?f:"L3T3_KEY"),F.simulcastCodecs=[new kf({codec:C,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Hf}),n.backupCodec&&C!==n.backupCodec.codec&&F.encryption===Ot.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),F.simulcastCodecs.push(new kf({codec:n.backupCodec.codec,cid:""})))),j=Kf(e.source===$.Source.ScreenShare,F.width,F.height,n),F.layers=_b(F.width,F.height,j,ei(n.videoCodec))}else e.kind===$.Kind.Audio&&(j=[{maxBitrate:(m=n.audioPreset)===null||m===void 0?void 0:m.maxBitrate,priority:(y=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&y!==void 0?y:"high",networkPriority:(S=(x=n.audioPreset)===null||x===void 0?void 0:x.priority)!==null&&S!==void 0?S:"high"}]);if(!this.engine||this.engine.isClosed)throw new Rt("cannot publish track when not connected");const M=()=>N(this,void 0,void 0,function*(){var X,te,he;if(!this.engine.pcManager)throw new Rt("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,j),this.emit(ce.LocalSenderCreated,e.sender,e),gs(e)&&((X=n.degradationPreference)!==null&&X!==void 0||(n.degradationPreference=$A(e)),e.setDegradationPreference(n.degradationPreference)),j)if(oa()&&e.kind===$.Kind.Audio){let ve;for(const Re of this.engine.pcManager.publisher.getTransceivers())if(Re.sender===e.sender){ve=Re;break}ve&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:ve,codec:"opus",maxbr:!((te=j[0])===null||te===void 0)&&te.maxBitrate?j[0].maxBitrate/1e3:0})}else e.codec&&ei(e.codec)&&(!((he=j[0])===null||he===void 0)&&he.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:F.cid,codec:e.codec,maxbr:j[0].maxBitrate/1e3});yield this.engine.negotiate()});let P;const I=new Promise((X,te)=>N(this,void 0,void 0,function*(){var he;try{P=yield this.engine.addTrack(F),X(P)}catch(ve){e.sender&&(!((he=this.engine.pcManager)===null||he===void 0)&&he.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Re=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Le(e)),{error:Re}))})),te(ve)}}));if(this.enabledPublishVideoCodecs.length>0)P=(yield Promise.all([I,M()]))[0];else{P=yield I;let X;if(P.codecs.forEach(te=>{X===void 0&&(X=te.mimeType)}),X&&e.kind===$.Kind.Video){const te=jo(X);te!==C&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Le(e)),{codec:te})),n.videoCodec=te,j=Kf(e.source===$.Source.ScreenShare,F.width,F.height,n))}yield M()}const H=new Jf(e.kind,P,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(H.on(se.CpuConstrained,X=>this.onTrackCpuConstrained(X,H)),H.options=n,e.sid=P.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:j,trackInfo:P})),gs(e)?e.startMonitor(this.engine.client):wi(e)&&e.startMonitor(),this.addTrackPublication(H),this.emit(ce.LocalTrackPublished,H),wi(e)&&P.audioFeatures.includes(Pt.TF_PRECONNECT_BUFFER)){const X=e.getPreConnectBuffer(),te=e.getPreConnectBufferMimeType();this.on(ce.LocalTrackSubscribed,he=>{if(he.trackSid===P.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Le(e))),e.stopPreConnectBuffer()}}),X&&new Promise((ve,Re)=>N(this,void 0,void 0,function*(){var qe,Xe,q,ne,W,je;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Le(e)));const ee=setTimeout(()=>{Re(new Error("agent not active within 10 seconds"))},1e4),oe=yield this.waitUntilActiveAgentPresent();clearTimeout(ee),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Le(e)));const Se=yield this.streamBytes({name:"preconnect-buffer",mimeType:te,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[oe.identity],attributes:{trackId:H.trackSid,sampleRate:String((W=L.sampleRate)!==null&&W!==void 0?W:"48000"),channels:String((je=L.channelCount)!==null&&je!==void 0?je:"1")}});try{for(var Me=!0,O=Oi(X),K;K=yield O.next(),qe=K.done,!qe;Me=!0){ne=K.value,Me=!1;const ke=ne;yield Se.write(ke)}}catch(ke){Xe={error:ke}}finally{try{!Me&&!qe&&(q=O.return)&&(yield q.call(O))}finally{if(Xe)throw Xe.error}}yield Se.close(),ve()}catch(ee){Re(ee)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Le(e)))}).catch(ve=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Le(e)),{error:ve}))})}return H})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,s){return N(this,void 0,void 0,function*(){var r;if(this.encryptionType!==Ot.NONE)return;let l;if(this.trackPublications.forEach(S=>{S.track&&S.track===e&&(l=S)}),!l)throw new Ai("track is not published");if(!gs(e))throw new Ai("track is not a video track");const d=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),s),h=JA(e,n,d);if(!h){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Le(e)));return}const f=e.addSimulcastTrack(n,h);if(!f)return;const m=new Po({cid:f.mediaStreamTrack.id,type:$.kindToProto(e.kind),muted:e.isMuted,source:$.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:d.videoCodec,cid:f.mediaStreamTrack.id}]});if(m.layers=_b(m.width,m.height,h),!this.engine||this.engine.isClosed)throw new Rt("cannot publish track when not connected");const v=()=>N(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,f,d,h),yield this.engine.negotiate()}),x=(yield Promise.all([this.engine.addTrack(m),v()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:h,trackInfo:x}))})}unpublishTrack(e,n){return N(this,void 0,void 0,function*(){var s,r;if(cr(e)){const m=this.pendingPublishPromises.get(e);m&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Le(e))),yield m)}const l=this.getPublicationForTrack(e),d=l?Le(l):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),d)),!l||!l.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),d));return}e=l.track,e.off(se.Muted,this.onTrackMuted),e.off(se.Unmuted,this.onTrackUnmuted),e.off(se.Ended,this.handleTrackEnded),e.off(se.UpstreamPaused,this.onTrackUpstreamPaused),e.off(se.UpstreamResumed,this.onTrackUpstreamResumed),e.off(se.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(s=this.roomOptions)===null||s===void 0?void 0:s.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let h=!1;const f=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<mt.FAILED&&f)try{for(const m of this.engine.pcManager.publisher.getTransceivers())m.sender===f&&(m.direction="inactive",h=!0);if(this.engine.removeTrack(f)&&(h=!0),gs(e)){for(const[,m]of e.simulcastCodecs)m.sender&&(this.engine.removeTrack(m.sender)&&(h=!0),m.sender=void 0);e.simulcastCodecs.clear()}}catch(m){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),d),{error:m}))}switch(this.trackPublications.delete(l.trackSid),l.kind){case $.Kind.Audio:this.audioTrackPublications.delete(l.trackSid);break;case $.Kind.Video:this.videoTrackPublications.delete(l.trackSid);break}return this.emit(ce.LocalTrackUnpublished,l),l.setTrack(void 0),h&&(yield this.engine.negotiate()),l})}unpublishTracks(e){return N(this,void 0,void 0,function*(){return(yield Promise.all(e.map(s=>this.unpublishTrack(s)))).filter(s=>!!s)})}republishAllTracks(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){s.republishPromise&&(yield s.republishPromise),s.republishPromise=new Promise((l,d)=>N(s,void 0,void 0,function*(){try{const h=[];this.trackPublications.forEach(f=>{f.track&&(n&&(f.options=Object.assign(Object.assign({},f.options),n)),h.push(f))}),yield Promise.all(h.map(f=>N(this,void 0,void 0,function*(){const m=f.track;yield this.unpublishTrack(m,!1),r&&!m.isMuted&&m.source!==$.Source.ScreenShare&&m.source!==$.Source.ScreenShareAudio&&(wi(m)||gs(m))&&!m.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:f.trackSid})),yield m.restartTrack()),yield this.publishOrRepublishTrack(m,f.options,!0)}))),l()}catch(h){d(h)}finally{this.republishPromise=void 0}})),yield s.republishPromise})()})}publishData(e){return N(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const l=r.reliable?Oe.RELIABLE:Oe.LOSSY,d=r.destinationIdentities,h=r.topic;let f=new fm({participantIdentity:s.identity,payload:n,destinationIdentities:d,topic:h});const m=new Qt({kind:l,value:{case:"user",value:f}});yield s.engine.sendDataPacket(m,l)})()})}publishDtmf(e,n){return N(this,void 0,void 0,function*(){const s=new Qt({kind:Oe.RELIABLE,value:{case:"sipDtmf",value:new AS({code:e,digit:n})}});yield this.engine.sendDataPacket(s,Oe.RELIABLE)})}sendChatMessage(e,n){return N(this,void 0,void 0,function*(){const s={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new Qt({value:{case:"chatMessage",value:new zc(Object.assign(Object.assign({},s),{timestamp:ct.parse(s.timestamp)}))}});return yield this.engine.sendDataPacket(r,Oe.RELIABLE),this.emit(ce.ChatMessage,s),s})}editChatMessage(e,n){return N(this,void 0,void 0,function*(){const s=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new Qt({value:{case:"chatMessage",value:new zc(Object.assign(Object.assign({},s),{timestamp:ct.parse(s.timestamp),editTimestamp:ct.parse(s.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,Oe.RELIABLE),this.emit(ce.ChatMessage,s),s})}sendText(e,n){return N(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return N(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return N(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return N(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return N(this,arguments,void 0,function(n){var s=this;let{destinationIdentity:r,method:l,payload:d,responseTimeout:h=15e3}=n;return(function*(){return new Promise((v,y)=>N(s,void 0,void 0,function*(){var x,S,k,C;if(Am(d)>FT){y(gt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((S=(x=this.engine.latestJoinResponse)===null||x===void 0?void 0:x.serverInfo)===null||S===void 0)&&S.version&&ai((C=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||C===void 0?void 0:C.version,"1.8.0")<0){y(gt.builtIn("UNSUPPORTED_SERVER"));return}const w=Math.max(h,8e3),_=crypto.randomUUID();yield this.publishRpcRequest(r,_,l,d,w);const L=setTimeout(()=>{this.pendingAcks.delete(_),y(gt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(_),clearTimeout(F)},7e3);this.pendingAcks.set(_,{resolve:()=>{clearTimeout(L)},participantIdentity:r});const F=setTimeout(()=>{this.pendingResponses.delete(_),y(gt.builtIn("RESPONSE_TIMEOUT"))},h);this.pendingResponses.set(_,{resolve:(j,M)=>{clearTimeout(F),this.pendingAcks.has(_)&&(console.warn("RPC response received before ack",_),this.pendingAcks.delete(_),clearTimeout(L)),M?y(M):v(j??"")},participantIdentity:r})}))})()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,s){const r=this.pendingResponses.get(e);r?(r.resolve(n,s),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,s,r,l){return N(this,void 0,void 0,function*(){const d=new Qt({destinationIdentities:[e],kind:Oe.RELIABLE,value:{case:"rpcRequest",value:new mm({id:n,method:s,payload:r,responseTimeoutMs:l,version:1})}});yield this.engine.sendDataPacket(d,Oe.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:s}]of this.pendingAcks)s===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:s,resolve:r}]of this.pendingResponses)s===e&&(r(null,gt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var s,r;const l=this.trackPublications.get(n.sid);if(l){const d=l.isMuted||((r=(s=l.track)===null||s===void 0?void 0:s.isUpstreamPaused)!==null&&r!==void 0?r:!1);d!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Le(l)),{mutedOnServer:d})),this.engine.client.sendMuteTrack(n.sid,d))}}),!0):!1}setActiveAgent(e){var n,s,r,l;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(s=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||s===void 0||s.call(n,e):(l=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||l===void 0||l.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Pn),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(s=>{const r=s.track;r&&(e instanceof MediaStreamTrack?(wi(r)||gs(r))&&r.mediaStreamTrack===e&&(n=s):e===r&&(n=s))}),n}waitForPendingPublicationOfSource(e){return N(this,void 0,void 0,function*(){const s=Date.now();for(;Date.now()<s+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(l=>{let[d]=l;return d.source===e});if(r)return r[1];yield $t(20)}})}}class vM extends ji{constructor(e,n,s,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=l=>{this.setTrack(void 0),this.emit(se.Ended,l)},this.handleVisibilityChange=l=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(l),this.logContext),this.visible=l,this.emitTrackUpdate()},this.handleVideoDimensionsChange=l=>{this.log.debug("adaptivestream video dimensions ".concat(l.width,"x").concat(l.height),this.logContext),this.videoDimensionsAdaptiveStream=l,this.emitTrackUpdate()},this.subscribed=s,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,s=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new su({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new DS({participantSid:"",trackSids:[this.trackSid]})]});this.emit(se.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(s)}get subscriptionStatus(){return this.subscribed===!1?ji.SubscriptionStatus.Unsubscribed:super.isSubscribed?ji.SubscriptionStatus.Subscribed:ji.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?ji.PermissionStatus.Allowed:ji.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,s;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((s=this.requestedVideoDimensions)===null||s===void 0?void 0:s.height)===e.height||(Xh(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Xh(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Sn.HIGH}setTrack(e){const n=this.subscriptionStatus,s=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(se.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(se.VisibilityChanged,this.handleVisibilityChange),r.off(se.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(se.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(se.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(se.VisibilityChanged,this.handleVisibilityChange),e.on(se.Ended,this.handleEnded),this.emit(se.Subscribed,e)),this.emitPermissionUpdateIfChanged(s),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,s=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(s),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(se.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?se.Muted:se.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(se.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(se.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Xh(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new VS({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===$.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)pb(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const s=dA(this.trackInfo,this.requestedMaxQuality);s&&pb(this.videoDimensionsAdaptiveStream,s)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Sn.HIGH})),e.quality=Sn.HIGH)}this.emit(se.UpdateSettings,e)}}class Kc extends QT{static fromParticipantInfo(e,n,s){return new Kc(e,n.sid,n.identity,n.name,n.metadata,n.attributes,s,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,s,r,l,d,h){let f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Do.STANDARD;super(n,s||"",r,l,d,h,f),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(se.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),Le(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(se.UpdateSubscription,n=>{n.participantTracks.forEach(s=>{s.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(se.SubscriptionPermissionChanged,n=>{this.emit(ce.TrackSubscriptionPermissionChanged,e,n)}),e.on(se.SubscriptionStatusChanged,n=>{this.emit(ce.TrackSubscriptionStatusChanged,e,n)}),e.on(se.Subscribed,n=>{this.emit(ce.TrackSubscribed,n,e)}),e.on(se.Unsubscribed,n=>{this.emit(ce.TrackUnsubscribed,n,e)}),e.on(se.SubscriptionFailed,n=>{this.emit(ce.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.Source.Microphone;this.volumeMap.set(n,e);const s=this.getTrackPublication(n);s&&s.track&&s.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,s,r,l,d){let h=this.getTrackPublicationBySid(n);if(h||n.startsWith("TR")||this.trackPublications.forEach(v=>{!h&&e.kind===v.kind.toString()&&(h=v)}),!h){if(d===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ce.TrackSubscriptionFailed,n);return}d===void 0&&(d=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,s,r,l,d-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Le(h))),this.emit(ce.TrackSubscriptionFailed,n);return}const f=e.kind==="video";let m;return f?m=new uM(e,n,r,l):m=new cM(e,n,r,this.audioContext,this.audioOutput),m.source=h.source,m.isMuted=h.isMuted,m.setMediaStream(s),m.start(),h.setTrack(m),this.volumeMap.has(h.source)&&qf(m)&&ni(m)&&m.setVolume(this.volumeMap.get(h.source)),h}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,s=new Map;return e.tracks.forEach(r=>{var l,d;let h=this.getTrackPublicationBySid(r.sid);if(h)h.updateInfo(r);else{const f=$.kindFromProto(r.type);if(!f)return;h=new vM(f,r,(l=this.signalClient.connectOptions)===null||l===void 0?void 0:l.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(d=this.loggerOptions)===null||d===void 0?void 0:d.loggerName}),h.updateInfo(r),s.set(r.sid,h);const m=Array.from(this.trackPublications.values()).find(v=>v.source===h?.source);m&&h.source!==$.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(h.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Le(m),newTrack:Le(h)})),this.addTrackPublication(h)}n.set(r.sid,h)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Le(r))),this.unpublishTrack(r.trackSid,!0))}),s.forEach(r=>{this.emit(ce.TrackPublished,r)}),!0}unpublishTrack(e,n){const s=this.trackPublications.get(e);if(!s)return;const{track:r}=s;switch(r&&(r.stop(),s.setTrack(void 0)),this.trackPublications.delete(e),s.kind){case $.Kind.Audio:this.audioTrackPublications.delete(e);break;case $.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ce.TrackUnpublished,s)}setAudioOutput(e){return N(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(s=>{var r;ni(s.track)&&qf(s.track)&&n.push(s.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:s})),super.emit(e,...s)}}var Je;(function(i){i.Disconnected="disconnected",i.Connecting="connecting",i.Connected="connected",i.Reconnecting="reconnecting",i.SignalReconnecting="signalReconnecting"})(Je||(Je={}));const yM=4*1e3;class fr extends oi.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,s,r,l;if(super(),n=this,this.state=Je.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ae,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(d,h,f)=>N(this,void 0,void 0,function*(){var m;if(!HO())throw si()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const v=yield this.disconnectLock.lock();if(this.state===Je.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),v(),Promise.resolve();if(this.connectFuture)return v(),this.connectFuture.promise;this.setAndEmitConnectionState(Je.Connecting),((m=this.regionUrlProvider)===null||m===void 0?void 0:m.getServerUrl().toString())!==d&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),zf(new URL(d))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new _t(d,h):this.regionUrlProvider.updateToken(h),this.regionUrlProvider.fetchRegionSettings().then(S=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(S)}).catch(S=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:S}))}));const y=(S,k,C)=>N(this,void 0,void 0,function*(){var w,_;this.abortController&&this.abortController.abort();const L=new AbortController;this.abortController=L,v?.();try{yield this.attemptConnection(C??d,h,f,L),this.abortController=void 0,S()}catch(F){if(this.regionUrlProvider&&F instanceof Qe&&F.reason!==Be.Cancelled&&F.reason!==Be.NotAllowed){let j=null;try{j=yield this.regionUrlProvider.getNextBestRegionUrl((w=this.abortController)===null||w===void 0?void 0:w.signal)}catch(M){if(M instanceof Qe&&(M.status===401||M.reason===Be.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(M);return}}j&&!(!((_=this.abortController)===null||_===void 0)&&_.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(F.message,". Retrying with another region: ").concat(j),this.logContext),this.recreateEngine(),yield y(S,k,j)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,mb(F)),k(F))}else{let j=Hn.UNKNOWN_REASON;F instanceof Qe&&(j=mb(F)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,j),k(F)}}}),x=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Pn((S,k)=>{y(S,k,x)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(d,h,f,m,v,y)=>N(this,void 0,void 0,function*(){var x,S,k;const C=yield f.join(d,h,{autoSubscribe:m.autoSubscribe,adaptiveStream:typeof v.adaptiveStream=="object"?!0:v.adaptiveStream,maxRetries:m.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:m.websocketTimeout,singlePeerConnection:v.singlePeerConnection},y.signal);let w=C.serverInfo;if(w||(w={version:C.serverVersion,region:C.serverRegion}),this.serverInfo=w,this.log.debug("connected to Livekit Server ".concat(Object.entries(w).map(_=>{let[L,F]=_;return"".concat(L,": ").concat(F)}).join(", ")),{room:(x=C.room)===null||x===void 0?void 0:x.name,roomSid:(S=C.room)===null||S===void 0?void 0:S.sid,identity:(k=C.participant)===null||k===void 0?void 0:k.identity}),!w.version)throw new jO("unknown server version");return w.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),v.dynacast=!1),C}),this.applyJoinResponse=d=>{const h=d.participant;if(this.localParticipant.sid=h.sid,this.localParticipant.identity=h.identity,this.localParticipant.setEnabledPublishCodecs(d.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(d.sifTrailer)}catch(f){this.log.error(f instanceof Error?f.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:f}))}this.handleParticipantUpdates([h,...d.otherParticipants]),d.room&&this.handleRoomUpdate(d.room)},this.attemptConnection=(d,h,f,m)=>N(this,void 0,void 0,function*(){var v,y;this.state===Je.Reconnecting||this.isResuming||!((v=this.engine)===null||v===void 0)&&v.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((y=this.regionUrlProvider)===null||y===void 0)&&y.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Om),f),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const x=yield this.connectSignal(d,h,this.engine,this.connOptions,this.options,m);this.applyJoinResponse(x),this.setupLocalParticipantEvents(),this.emit(ie.SignalConnected)}catch(x){yield this.engine.close(),this.recreateEngine();const S=new Qe("could not establish signal connection",Be.ServerUnreachable);throw x instanceof Error&&(S.message="".concat(S.message,": ").concat(x.message)),x instanceof Qe&&(S.reason=x.reason,S.status=x.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:x})),S}if(m.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Qe("Connection attempt aborted",Be.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,m)}catch(x){throw yield this.engine.close(),this.recreateEngine(),x}ln()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),ln()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Je.Connected),this.emit(ie.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return N(n,[...h],void 0,function(){var m=this;let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var y,x,S,k;const C=yield m.disconnectLock.lock();try{if(m.state===Je.Disconnected){m.log.debug("already disconnected",m.logContext);return}if(m.log.info("disconnect from room",Object.assign({},m.logContext)),m.state===Je.Connecting||m.state===Je.Reconnecting||m.isResuming){const w="Abort connection attempt due to user initiated disconnect";m.log.warn(w,m.logContext),(y=m.abortController)===null||y===void 0||y.abort(w),(S=(x=m.connectFuture)===null||x===void 0?void 0:x.reject)===null||S===void 0||S.call(x,new Qe("Client initiated disconnect",Be.Cancelled)),m.connectFuture=void 0}!((k=m.engine)===null||k===void 0)&&k.client.isDisconnected||(yield m.engine.client.sendLeave()),m.engine&&(yield m.engine.close()),m.handleDisconnect(v,Hn.CLIENT_INITIATED),m.engine=void 0}finally{C()}})()})},this.onPageLeave=()=>N(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>N(this,void 0,void 0,function*(){const d=[],h=cn();if(h&&h.os==="iOS"){const f="livekit-dummy-audio-el";let m=document.getElementById(f);if(!m){m=document.createElement("audio"),m.id=f,m.autoplay=!0,m.hidden=!0;const v=Qh();v.enabled=!0;const y=new MediaStream([v]);m.srcObject=y,document.addEventListener("visibilitychange",()=>{m&&(m.srcObject=document.hidden?null:y,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(m),this.once(ie.Disconnected,()=>{m?.remove(),m=null})}d.push(m)}this.remoteParticipants.forEach(f=>{f.audioTrackPublications.forEach(m=>{m.track&&m.track.attachedElements.forEach(v=>{d.push(v)})})});try{yield Promise.all([this.acquireAudioContext(),...d.map(f=>(f.muted=!1,f.play()))]),this.handleAudioPlaybackStarted()}catch(f){throw this.handleAudioPlaybackFailed(f),f}}),this.startVideo=()=>N(this,void 0,void 0,function*(){const d=[];for(const h of this.remoteParticipants.values())h.videoTrackPublications.forEach(f=>{var m;(m=f.track)===null||m===void 0||m.attachedElements.forEach(v=>{d.includes(v)||d.push(v)})});yield Promise.all(d.map(h=>h.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(h=>{h.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const d of this.remoteParticipants.values())this.handleParticipantDisconnected(d.identity,d);this.setAndEmitConnectionState(Je.Reconnecting)&&this.emit(ie.Reconnecting)},this.handleSignalRestarted=d=>N(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(d.serverRegion),Object.assign(Object.assign({},this.logContext),{region:d.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(d);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(h){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:h}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:d.serverRegion}))}catch{return}this.setAndEmitConnectionState(Je.Connected),this.emit(ie.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=d=>{d.forEach(h=>{var f;if(h.identity===this.localParticipant.identity){this.localParticipant.updateInfo(h);return}h.identity===""&&(h.identity=(f=this.sidToIdentity.get(h.sid))!==null&&f!==void 0?f:"");let m=this.remoteParticipants.get(h.identity);h.state===ar.DISCONNECTED?this.handleParticipantDisconnected(h.identity,m):m=this.getOrCreateParticipant(h.identity,h)})},this.handleActiveSpeakersUpdate=d=>{const h=[],f={};d.forEach(m=>{if(f[m.sid]=!0,m.sid===this.localParticipant.sid)this.localParticipant.audioLevel=m.level,this.localParticipant.setIsSpeaking(!0),h.push(this.localParticipant);else{const v=this.getRemoteParticipantBySid(m.sid);v&&(v.audioLevel=m.level,v.setIsSpeaking(!0),h.push(v))}}),f[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(m=>{f[m.sid]||(m.audioLevel=0,m.setIsSpeaking(!1))}),this.activeSpeakers=h,this.emitWhenConnected(ie.ActiveSpeakersChanged,h)},this.handleSpeakersChanged=d=>{const h=new Map;this.activeSpeakers.forEach(m=>{const v=this.remoteParticipants.get(m.identity);v&&v.sid!==m.sid||h.set(m.sid,m)}),d.forEach(m=>{let v=this.getRemoteParticipantBySid(m.sid);m.sid===this.localParticipant.sid&&(v=this.localParticipant),v&&(v.audioLevel=m.level,v.setIsSpeaking(m.active),m.active?h.set(m.sid,v):h.delete(m.sid))});const f=Array.from(h.values());f.sort((m,v)=>v.audioLevel-m.audioLevel),this.activeSpeakers=f,this.emitWhenConnected(ie.ActiveSpeakersChanged,f)},this.handleStreamStateUpdate=d=>{d.streamStates.forEach(h=>{const f=this.getRemoteParticipantBySid(h.participantSid);if(!f)return;const m=f.getTrackPublicationBySid(h.trackSid);if(!m||!m.track)return;const v=$.streamStateFromProto(h.state);m.track.setStreamState(v),v!==m.track.streamState&&(f.emit(ce.TrackStreamStateChanged,m,m.track.streamState),this.emitWhenConnected(ie.TrackStreamStateChanged,m,m.track.streamState,f))})},this.handleSubscriptionPermissionUpdate=d=>{const h=this.getRemoteParticipantBySid(d.participantSid);if(!h)return;const f=h.getTrackPublicationBySid(d.trackSid);f&&f.setAllowed(d.allowed)},this.handleSubscriptionError=d=>{const h=Array.from(this.remoteParticipants.values()).find(m=>m.trackPublications.has(d.trackSid));if(!h)return;const f=h.getTrackPublicationBySid(d.trackSid);f&&f.setSubscriptionError(d.err)},this.handleDataPacket=(d,h)=>{const f=this.remoteParticipants.get(d.participantIdentity);if(d.value.case==="user")this.handleUserPacket(f,d.value.value,d.kind,h);else if(d.value.case==="transcription")this.handleTranscription(f,d.value.value);else if(d.value.case==="sipDtmf")this.handleSipDtmf(f,d.value.value);else if(d.value.case==="chatMessage")this.handleChatMessage(f,d.value.value);else if(d.value.case==="metrics")this.handleMetrics(d.value.value,f);else if(d.value.case==="streamHeader"||d.value.case==="streamChunk"||d.value.case==="streamTrailer")this.handleDataStream(d,h);else if(d.value.case==="rpcRequest"){const m=d.value.value;this.handleIncomingRpcRequest(d.participantIdentity,m.id,m.method,m.payload,m.responseTimeoutMs,m.version)}},this.handleUserPacket=(d,h,f,m)=>{this.emit(ie.DataReceived,h.payload,d,f,h.topic,m),d?.emit(ce.DataReceived,h.payload,f,m)},this.handleSipDtmf=(d,h)=>{this.emit(ie.SipDTMFReceived,h,d),d?.emit(ce.SipDTMFReceived,h)},this.handleTranscription=(d,h)=>{const f=h.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(h.transcribedParticipantIdentity),m=f?.trackPublications.get(h.trackId),v=WO(h,this.transcriptionReceivedTimes);m?.emit(se.TranscriptionReceived,v),f?.emit(ce.TranscriptionReceived,v,m),this.emit(ie.TranscriptionReceived,v,f,m)},this.handleChatMessage=(d,h)=>{const f=eA(h);this.emit(ie.ChatMessage,f,d)},this.handleMetrics=(d,h)=>{this.emit(ie.MetricsReceived,d,h)},this.handleDataStream=(d,h)=>{this.incomingDataStreamManager.handleDataStreamPacket(d,h)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ie.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=d=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:d})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ie.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ie.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ie.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>N(this,void 0,void 0,function*(){var d;((d=cn())===null||d===void 0?void 0:d.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(ie.MediaDevicesChanged)}),this.handleRoomUpdate=d=>{const h=this.roomInfo;this.roomInfo=d,h&&h.metadata!==d.metadata&&this.emitWhenConnected(ie.RoomMetadataChanged,d.metadata),h?.activeRecording!==d.activeRecording&&this.emitWhenConnected(ie.RecordingStatusChanged,d.activeRecording)},this.handleConnectionQualityUpdate=d=>{d.updates.forEach(h=>{if(h.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(h.quality);return}const f=this.getRemoteParticipantBySid(h.participantSid);f&&f.setConnectionQuality(h.quality)})},this.onLocalParticipantMetadataChanged=d=>{this.emit(ie.ParticipantMetadataChanged,d,this.localParticipant)},this.onLocalParticipantNameChanged=d=>{this.emit(ie.ParticipantNameChanged,d,this.localParticipant)},this.onLocalAttributesChanged=d=>{this.emit(ie.ParticipantAttributesChanged,d,this.localParticipant)},this.onLocalTrackMuted=d=>{this.emit(ie.TrackMuted,d,this.localParticipant)},this.onLocalTrackUnmuted=d=>{this.emit(ie.TrackUnmuted,d,this.localParticipant)},this.onTrackProcessorUpdate=d=>{var h;(h=d?.onPublish)===null||h===void 0||h.call(d,this)},this.onLocalTrackPublished=d=>N(this,void 0,void 0,function*(){var h,f,m,v,y,x;(h=d.track)===null||h===void 0||h.on(se.TrackProcessorUpdate,this.onTrackProcessorUpdate),(f=d.track)===null||f===void 0||f.on(se.Restarted,this.onLocalTrackRestarted),(y=(v=(m=d.track)===null||m===void 0?void 0:m.getProcessor())===null||v===void 0?void 0:v.onPublish)===null||y===void 0||y.call(v,this),this.emit(ie.LocalTrackPublished,d,this.localParticipant),wi(d.track)&&(yield d.track.checkForSilence())&&this.emit(ie.LocalAudioSilenceDetected,d);const S=yield(x=d.track)===null||x===void 0?void 0:x.getDeviceId(!1),k=Vf(d.source);k&&S&&S!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,S),this.emit(ie.ActiveDeviceChanged,k,S))}),this.onLocalTrackUnpublished=d=>{var h,f;(h=d.track)===null||h===void 0||h.off(se.TrackProcessorUpdate,this.onTrackProcessorUpdate),(f=d.track)===null||f===void 0||f.off(se.Restarted,this.onLocalTrackRestarted),this.emit(ie.LocalTrackUnpublished,d,this.localParticipant)},this.onLocalTrackRestarted=d=>N(this,void 0,void 0,function*(){const h=yield d.getDeviceId(!1),f=Vf(d.source);f&&h&&h!==this.localParticipant.activeDeviceMap.get(f)&&(this.log.debug("local track restarted, setting ".concat(f," ").concat(h," active"),this.logContext),this.localParticipant.activeDeviceMap.set(f,h),this.emit(ie.ActiveDeviceChanged,f,h))}),this.onLocalConnectionQualityChanged=d=>{this.emit(ie.ConnectionQualityChanged,d,this.localParticipant)},this.onMediaDevicesError=(d,h)=>{this.emit(ie.MediaDevicesError,d,h)},this.onLocalParticipantPermissionsChanged=d=>{this.emit(ie.ParticipantPermissionsChanged,d,this.localParticipant)},this.onLocalChatMessageSent=d=>{this.emit(ie.ChatMessage,d,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},AA),e),this.log=Ui((s=this.options.loggerName)!==null&&s!==void 0?s:Gn.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},zT),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},BT),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},OA),e?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new aM,this.outgoingDataStreamManager=new lM(this.engine,this.log),this.disconnectLock=new Xt,this.localParticipant=new gM("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ts(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ts(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Ts(this.options.audioOutput.deviceId)).catch(d=>this.log.warn("Could not set audio output: ".concat(d.message),this.logContext)),ln()){const d=new AbortController;(l=navigator.mediaDevices)===null||l===void 0||l.addEventListener("devicechange",this.handleDeviceChange,{signal:d.signal}),fr.cleanupRegistry&&fr.cleanupRegistry.register(this,()=>{d.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return N(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,s=this.options.encryption||this.options.e2ee;s&&("e2eeManager"in s?(this.e2eeManager=s.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new hA(s,n),this.e2eeManager.on(bs.ParticipantEncryptionStatusChanged,(r,l)=>{nA(l)&&(this.isE2EEEnabled=r),this.emit(ie.ParticipantEncryptionStatusChanged,r,l)}),this.e2eeManager.on(bs.EncryptionError,r=>this.emit(ie.EncryptionError,r)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return N(this,void 0,void 0,function*(){return this.state===Je.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const s=r=>{r.sid!==""&&(this.engine.off(le.RoomUpdate,s),e(r.sid))};this.engine.on(le.RoomUpdate,s),this.once(ie.Disconnected,()=>{this.engine.off(le.RoomUpdate,s),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new tM(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(le.ParticipantUpdate,this.handleParticipantUpdates).on(le.RoomUpdate,this.handleRoomUpdate).on(le.SpeakersChanged,this.handleSpeakersChanged).on(le.StreamStateChanged,this.handleStreamStateUpdate).on(le.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(le.SubscriptionError,this.handleSubscriptionError).on(le.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(le.MediaTrackAdded,(e,n,s)=>{this.onTrackAdded(e,n,s)}).on(le.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(le.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(le.DataPacketReceived,this.handleDataPacket).on(le.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Je.SignalReconnecting)&&this.emit(ie.SignalReconnecting)}).on(le.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Je.Connected)&&this.emit(ie.Reconnected)}).on(le.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Je.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(le.Restarting,this.handleRestarting).on(le.SignalRestarted,this.handleSignalRestarted).on(le.Offline,()=>{this.setAndEmitConnectionState(Je.Reconnecting)&&this.emit(ie.Reconnecting)}).on(le.DCBufferStatusChanged,(e,n)=>{this.emit(ie.DCBufferStatusChanged,e,n)}).on(le.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(s=>{let{trackSid:r}=s;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ce.LocalTrackSubscribed,n),this.emitWhenConnected(ie.LocalTrackSubscribed,n,this.localParticipant)}).on(le.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,s)=>{this.handleParticipantDisconnected(s,n)}),this.emit(ie.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return It.getInstance().getDevices(e,n)}prepareConnection(e,n){return N(this,void 0,void 0,function*(){if(this.state===Je.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(zf(new URL(e))&&n){this.regionUrlProvider=new _t(e,n);const s=yield this.regionUrlProvider.getNextBestRegionUrl();s&&this.state===Je.Disconnected&&(this.regionUrl=s,yield fetch(Bf(s),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(s),this.logContext))}else yield fetch(Bf(e),{method:"HEAD"})}catch(s){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:s}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return N(this,void 0,void 0,function*(){let s=()=>N(this,void 0,void 0,function*(){}),r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new $n({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new $n({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new $n({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new $n({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":s=()=>N(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new $n({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":s=()=>N(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new $n({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new $n({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),s=()=>N(this,void 0,void 0,function*(){const l=this.engine.client.onLeave;l&&l(new au({reason:Hn.CLIENT_INITIATED,action:rr.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new $n({scenario:{case:"subscriberBandwidth",value:Zs(n)}});break;case"leave-full-reconnect":r=new $n({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield s())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return N(this,arguments,void 0,function(s,r){var l=this;let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var h,f,m,v,y,x,S;let k=!0,C=!1;const w=d?{exact:r}:r;if(s==="audioinput"){C=l.localParticipant.audioTrackPublications.size===0;const _=(h=l.getActiveDevice(s))!==null&&h!==void 0?h:l.options.audioCaptureDefaults.deviceId;l.options.audioCaptureDefaults.deviceId=w;const L=Array.from(l.localParticipant.audioTrackPublications.values()).filter(j=>j.source===$.Source.Microphone);try{k=(yield Promise.all(L.map(j=>{var M;return(M=j.audioTrack)===null||M===void 0?void 0:M.setDeviceId(w)}))).every(j=>j===!0)}catch(j){throw l.options.audioCaptureDefaults.deviceId=_,j}const F=L.some(j=>{var M,P;return(P=(M=j.track)===null||M===void 0?void 0:M.isMuted)!==null&&P!==void 0?P:!1});k&&F&&(C=!0)}else if(s==="videoinput"){C=l.localParticipant.videoTrackPublications.size===0;const _=(f=l.getActiveDevice(s))!==null&&f!==void 0?f:l.options.videoCaptureDefaults.deviceId;l.options.videoCaptureDefaults.deviceId=w;const L=Array.from(l.localParticipant.videoTrackPublications.values()).filter(j=>j.source===$.Source.Camera);try{k=(yield Promise.all(L.map(j=>{var M;return(M=j.videoTrack)===null||M===void 0?void 0:M.setDeviceId(w)}))).every(j=>j===!0)}catch(j){throw l.options.videoCaptureDefaults.deviceId=_,j}const F=L.some(j=>{var M,P;return(P=(M=j.track)===null||M===void 0?void 0:M.isMuted)!==null&&P!==void 0?P:!1});k&&F&&(C=!0)}else if(s==="audiooutput"){if(C=!0,!Uf()&&!l.options.webAudioMix||l.options.webAudioMix&&l.audioContext&&!("setSinkId"in l.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");l.options.webAudioMix&&(r=(m=yield It.getInstance().normalizeDeviceId("audiooutput",r))!==null&&m!==void 0?m:""),(v=(S=l.options).audioOutput)!==null&&v!==void 0||(S.audioOutput={});const _=(y=l.getActiveDevice(s))!==null&&y!==void 0?y:l.options.audioOutput.deviceId;l.options.audioOutput.deviceId=r;try{l.options.webAudioMix&&((x=l.audioContext)===null||x===void 0||x.setSinkId(r)),yield Promise.all(Array.from(l.remoteParticipants.values()).map(L=>L.setAudioOutput({deviceId:r})))}catch(L){throw l.options.audioOutput.deviceId=_,L}}return C&&(l.localParticipant.activeDeviceMap.set(s,r),l.emit(ie.ActiveDeviceChanged,s,r)),k})()})}setupLocalParticipantEvents(){this.localParticipant.on(ce.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ce.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ce.AttributesChanged,this.onLocalAttributesChanged).on(ce.TrackMuted,this.onLocalTrackMuted).on(ce.TrackUnmuted,this.onLocalTrackUnmuted).on(ce.LocalTrackPublished,this.onLocalTrackPublished).on(ce.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ce.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ce.MediaDevicesError,this.onMediaDevicesError).on(ce.AudioStreamAcquired,this.startAudio).on(ce.ChatMessage,this.onLocalChatMessageSent).on(ce.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,s){if(this.state===Je.Connecting||this.state===Je.Reconnecting){const y=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(S=>S.id)}),this.onTrackAdded(e,n,s),x()},x=()=>{this.off(ie.Reconnected,y),this.off(ie.Connected,y),this.off(ie.Disconnected,x)};this.once(ie.Reconnected,y),this.once(ie.Connected,y),this.once(ie.Disconnected,x);return}if(this.state===Je.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=qO(n.id),l=r[0];let d=r[1],h=e.id;if(d&&d.startsWith("TR")&&(h=d),l===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const f=Array.from(this.remoteParticipants.values()).find(y=>y.sid===l);if(!f){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(l),this.logContext);return}if(!h.startsWith("TR")){const y=this.engine.getTrackIdForReceiver(s);if(!y){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(l),this.logContext);return}h=y}h.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(l,", streamId: ").concat(d,", trackId: ").concat(h),Object.assign(Object.assign({},this.logContext),{rpID:l,streamId:d,trackId:h}));let m;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?m=this.options.adaptiveStream:m={});const v=f.addSubscribedMediaTrack(e,h,n,s,m);v?.isEncrypted&&!this.e2eeManager&&this.emit(ie.EncryptionError,new Error("Encrypted ".concat(v.source," track received from participant ").concat(f.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var s;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==Je.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(l=>{r.unpublishTrack(l.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var l,d,h;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((l=r.track)===null||l===void 0||l.detach(),(d=r.track)===null||d===void 0||d.stop()):(h=r.track)===null||h===void 0||h.stopMonitor()}),this.localParticipant.off(ce.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ce.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ce.AttributesChanged,this.onLocalAttributesChanged).off(ce.TrackMuted,this.onLocalTrackMuted).off(ce.TrackUnmuted,this.onLocalTrackUnmuted).off(ce.LocalTrackPublished,this.onLocalTrackPublished).off(ce.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ce.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ce.MediaDevicesError,this.onMediaDevicesError).off(ce.AudioStreamAcquired,this.startAudio).off(ce.ChatMessage,this.onLocalChatMessageSent).off(ce.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),ln()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(s=navigator.mediaDevices)===null||s===void 0||s.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Je.Disconnected),this.emit(ie.Disconnected,n)}}}handleParticipantDisconnected(e,n){var s;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ie.ParticipantDisconnected,n),n.setDisconnected(),(s=this.localParticipant)===null||s===void 0||s.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,s,r,l,d){return N(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),d!==1){yield this.engine.publishRpcResponse(e,n,null,gt.builtIn("UNSUPPORTED_VERSION"));return}const h=this.rpcHandlers.get(s);if(!h){yield this.engine.publishRpcResponse(e,n,null,gt.builtIn("UNSUPPORTED_METHOD"));return}let f=null,m=null;try{const v=yield h({requestId:n,callerIdentity:e,payload:r,responseTimeout:l});Am(v)>FT?(f=gt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(s))):m=v}catch(v){v instanceof gt?f=v:(console.warn("Uncaught error returned by RPC handler for ".concat(s,". Returning APPLICATION_ERROR instead."),v),f=gt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,m,f)})}selectDefaultDevices(){return N(this,void 0,void 0,function*(){var e,n,s;const r=It.getInstance().previousDevices,l=yield It.getInstance().getDevices(void 0,!1),d=cn();if(d?.name==="Chrome"&&d.os!=="iOS")for(let f of l){const m=r.find(v=>v.deviceId===f.deviceId);m&&m.label!==""&&m.kind===f.kind&&m.label!==f.label&&this.getActiveDevice(f.kind)==="default"&&this.emit(ie.ActiveDeviceChanged,f.kind,f.deviceId)}const h=["audiooutput","audioinput","videoinput"];for(let f of h){const m=aA(f),v=this.localParticipant.getTrackPublication(m);if(v&&(!((e=v.track)===null||e===void 0)&&e.isUserProvided))continue;const y=l.filter(S=>S.kind===f),x=this.getActiveDevice(f);if(x===((n=r.filter(S=>S.kind===f)[0])===null||n===void 0?void 0:n.deviceId)&&y.length>0&&((s=y[0])===null||s===void 0?void 0:s.deviceId)!==x){yield this.switchActiveDevice(f,y[0].deviceId);continue}f==="audioinput"&&!Io()||f==="videoinput"||y.length>0&&!y.find(S=>S.deviceId===this.getActiveDevice(f))&&(f!=="audiooutput"||!Io())&&(yield this.switchActiveDevice(f,y[0].deviceId))}})}acquireAudioContext(){return N(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=LT())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),$t(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const s=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";s!==this.canPlaybackAudio&&(this.audioEnabled=s,this.emit(ie.AudioPlaybackStatusChanged,s))})}createParticipant(e,n){var s;let r;return n?r=Kc.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Kc(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((s=this.options.audioOutput)===null||s===void 0)&&s.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(l=>this.log.warn("Could not set audio output: ".concat(l.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const s=this.createParticipant(e,n);return this.remoteParticipants.set(e,s),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(ie.ParticipantConnected,s),s.on(ce.TrackPublished,r=>{this.emitWhenConnected(ie.TrackPublished,r,s)}).on(ce.TrackSubscribed,(r,l)=>{r.kind===$.Kind.Audio?(r.on(se.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(se.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===$.Kind.Video&&(r.on(se.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(se.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ie.TrackSubscribed,r,l,s)}).on(ce.TrackUnpublished,r=>{this.emit(ie.TrackUnpublished,r,s)}).on(ce.TrackUnsubscribed,(r,l)=>{this.emit(ie.TrackUnsubscribed,r,l,s)}).on(ce.TrackMuted,r=>{this.emitWhenConnected(ie.TrackMuted,r,s)}).on(ce.TrackUnmuted,r=>{this.emitWhenConnected(ie.TrackUnmuted,r,s)}).on(ce.ParticipantMetadataChanged,r=>{this.emitWhenConnected(ie.ParticipantMetadataChanged,r,s)}).on(ce.ParticipantNameChanged,r=>{this.emitWhenConnected(ie.ParticipantNameChanged,r,s)}).on(ce.AttributesChanged,r=>{this.emitWhenConnected(ie.ParticipantAttributesChanged,r,s)}).on(ce.ConnectionQualityChanged,r=>{this.emitWhenConnected(ie.ConnectionQualityChanged,r,s)}).on(ce.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(ie.ParticipantPermissionsChanged,r,s)}).on(ce.TrackSubscriptionStatusChanged,(r,l)=>{this.emitWhenConnected(ie.TrackSubscriptionStatusChanged,r,l,s)}).on(ce.TrackSubscriptionFailed,(r,l)=>{this.emit(ie.TrackSubscriptionFailed,r,s,l)}).on(ce.TrackSubscriptionPermissionChanged,(r,l)=>{this.emitWhenConnected(ie.TrackSubscriptionPermissionChanged,r,l,s)}).on(ce.Active,()=>{this.emitWhenConnected(ie.ParticipantActive,s),s.kind===Do.AGENT&&this.localParticipant.setActiveAgent(s)}),n&&s.updateInfo(n),s}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((s,r)=>(s.push(...r.getTrackPublications()),s),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&tA(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Vt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Hn.STATE_MISMATCH))):e=0},yM)}clearConnectionReconcile(){this.connectionReconcileInterval&&Vt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ie.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,s]=e;this.emit(n,...s)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];if(this.state===Je.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,s]);else if(this.state===Je.Connected)return this.emit(e,...s);return!1}simulateParticipants(e){return N(this,void 0,void 0,function*(){var n,s;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),l=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new tu({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ct.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ra({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ie.SignalConnected),this.emit(ie.Connected),this.setAndEmitConnectionState(Je.Connected),r.video){const d=new Jf($.Kind.Video,new tr({source:Nt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Fn.AUDIO,name:"video-dummy"}),new Gc(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:fb(160*((n=l.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ce.LocalTrackPublished,d)}if(r.audio){const d=new Jf($.Kind.Audio,new tr({source:Nt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Fn.AUDIO}),new Hc(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Qh(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ce.LocalTrackPublished,d)}for(let d=0;d<l.count-1;d+=1){let h=new ra({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(d),state:ar.ACTIVE,tracks:[],joinedAt:ct.parse(Date.now())});const f=this.getOrCreateParticipant(h.identity,h);if(l.video){const m=fb(160*((s=l.aspectRatios[d%l.aspectRatios.length])!==null&&s!==void 0?s:1),160,!1,!0),v=new tr({source:Nt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Fn.AUDIO});f.addSubscribedMediaTrack(m,v.sid,new MediaStream([m]),new RTCRtpReceiver),h.tracks=[...h.tracks,v]}if(l.audio){const m=Qh(),v=new tr({source:Nt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Fn.AUDIO});f.addSubscribedMediaTrack(m,v.sid,new MediaStream([m]),new RTCRtpReceiver),h.tracks=[...h.tracks,v]}f.updateInfo(h)}})}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];if(e!==ie.ActiveSpeakersChanged&&e!==ie.TranscriptionReceived){const l=XT(s).filter(d=>d!==void 0);(e===ie.TrackSubscribed||e===ie.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:l})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:l}))}return super.emit(e,...s)}}fr.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(i=>{i()});function XT(i){return i.map(e=>{if(e)return Array.isArray(e)?XT(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var qn;(function(i){i[i.IDLE=0]="IDLE",i[i.RUNNING=1]="RUNNING",i[i.SKIPPED=2]="SKIPPED",i[i.SUCCESS=3]="SUCCESS",i[i.FAILED=4]="FAILED"})(qn||(qn={}));class js extends oi.EventEmitter{constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=qn.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new fr(s.roomOptions),this.connectOptions=s.connectOptions,this.options=s}run(e){return N(this,void 0,void 0,function*(){if(this.status!==qn.IDLE)throw Error("check is running already");this.setStatus(qn.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==qn.SKIPPED&&this.setStatus(this.isSuccess()?qn.SUCCESS:qn.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return N(this,void 0,void 0,function*(){return this.room.state===Je.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return N(this,void 0,void 0,function*(){this.room&&this.room.state!==Je.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(qn.SKIPPED)}switchProtocol(e){return N(this,void 0,void 0,function*(){let n=!1,s=!1;if(this.room.on(ie.Reconnecting,()=>{n=!0}),this.room.once(ie.Reconnected,()=>{s=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(l=>setTimeout(l,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(s)return;yield $t(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class bM extends js{get description(){return"Cloud regions"}perform(){return N(this,void 0,void 0,function*(){const e=new _t(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],s=new Set;for(let l=0;l<3;l++){const d=yield e.getNextBestRegionUrl();if(!d)break;if(s.has(d))continue;s.add(d);const h=yield this.checkCloudRegion(d);this.appendMessage("".concat(h.region," RTT: ").concat(h.rtt,"ms, duration: ").concat(h.duration,"ms")),n.push(h)}n.sort((l,d)=>(l.duration-d.duration)*.5+(l.rtt-d.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return N(this,void 0,void 0,function*(){var n,s;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const l=yield this.room.localParticipant.streamText({topic:"test"}),d=1e3,f=1e6/d,m="A".repeat(d),v=Date.now();for(let k=0;k<f;k++)yield l.write(m);yield l.close();const y=Date.now(),x=yield(s=this.room.engine.pcManager)===null||s===void 0?void 0:s.publisher.getStats(),S={region:r,rtt:1e4,duration:y-v};return x?.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(S.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),S})}}const af=1e4;class xM extends js{get description(){return"Connection via UDP vs TCP"}perform(){return N(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const s=this.bestStats;this.appendMessage("upstream bitrate: ".concat((s.bitrateTotal/s.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((s.rttTotal/s.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((s.jitterTotal/s.count*1e3).toFixed(2)," ms")),s.packetsLost>0&&this.appendWarning("packets lost: ".concat((s.packetsLost/s.packetsSent*100).toFixed(2),"%")),s.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((s.qualityLimitationDurations.bandwidth/(af/1e3)*100).toFixed(2),"%")),s.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((s.qualityLimitationDurations.cpu/(af/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return N(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const s=n.getContext("2d");if(!s)throw new Error("Could not get canvas context");let r=0;const l=()=>{r=(r+1)%360,s.fillStyle="hsl(".concat(r,", 100%, 50%)"),s.fillRect(0,0,n.width,n.height),requestAnimationFrame(l)};l();const h=n.captureStream(30).getVideoTracks()[0],m=(yield this.room.localParticipant.publishTrack(h,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,v={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},y=setInterval(()=>N(this,void 0,void 0,function*(){const x=yield m.getRTCStatsReport();x?.forEach(S=>{S.type==="outbound-rtp"?(v.packetsSent=S.packetsSent,v.qualityLimitationDurations=S.qualityLimitationDurations,v.bitrateTotal+=S.targetBitrate,v.count++):S.type==="remote-inbound-rtp"&&(v.packetsLost=S.packetsLost,v.rttTotal+=S.roundTripTime,v.jitterTotal+=S.jitter)})}),1e3);return yield new Promise(x=>setTimeout(x,af)),clearInterval(y),h.stop(),n.remove(),yield this.disconnect(),v})}}class SM extends js{get description(){return"Can publish audio"}perform(){return N(this,void 0,void 0,function*(){var e;const n=yield this.connect(),s=yield fM();if(yield PT(s,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(s),yield new Promise(h=>setTimeout(h,3e3));const l=yield(e=s.sender)===null||e===void 0?void 0:e.getStats();if(!l)throw new Error("Could not get RTCStats");let d=0;if(l.forEach(h=>{h.type==="outbound-rtp"&&(h.kind==="audio"||!h.kind&&h.mediaType==="audio")&&(d=h.packetsSent)}),d===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(d," audio packets"))})}}class TM extends js{get description(){return"Can publish video"}perform(){return N(this,void 0,void 0,function*(){var e;const n=yield this.connect(),s=yield hM();yield this.checkForVideo(s.mediaStreamTrack),n.localParticipant.publishTrack(s),yield new Promise(d=>setTimeout(d,5e3));const r=yield(e=s.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let l=0;if(r.forEach(d=>{d.type==="outbound-rtp"&&(d.kind==="video"||!d.kind&&d.mediaType==="video")&&(l+=d.packetsSent)}),l===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(l," video packets"))})}checkForVideo(e){return N(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const s=document.createElement("video");s.srcObject=n,s.muted=!0,s.autoplay=!0,s.playsInline=!0,s.setAttribute("playsinline","true"),document.body.appendChild(s),yield new Promise(r=>{s.onplay=()=>{setTimeout(()=>{var l,d,h,f;const m=document.createElement("canvas"),v=e.getSettings(),y=(d=(l=v.width)!==null&&l!==void 0?l:s.videoWidth)!==null&&d!==void 0?d:1280,x=(f=(h=v.height)!==null&&h!==void 0?h:s.videoHeight)!==null&&f!==void 0?f:720;m.width=y,m.height=x;const S=m.getContext("2d");S.drawImage(s,0,0);const C=S.getImageData(0,0,m.width,m.height).data;let w=!0;for(let _=0;_<C.length;_+=4)if(C[_]!==0||C[_+1]!==0||C[_+2]!==0){w=!1;break}w?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},s.play()}),n.getTracks().forEach(r=>r.stop()),s.remove()})}}class CM extends js{get description(){return"Resuming connection after interruption"}perform(){return N(this,void 0,void 0,function*(){var e;const n=yield this.connect();let s=!1,r=!1,l;const d=new Promise(m=>{setTimeout(m,5e3),l=m}),h=()=>{s=!0};n.on(ie.SignalReconnecting,h).on(ie.Reconnecting,h).on(ie.Reconnected,()=>{r=!0,l(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const f=n.engine.client.onClose;if(f&&f(""),yield d,s){if(!r||n.state!==Je.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class kM extends js{get description(){return"Can connect via TURN"}perform(){return N(this,void 0,void 0,function*(){var e,n;const s=new wm,r=yield s.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let l=!1,d=!1,h=!1;for(let f of r.iceServers)for(let m of f.urls)m.startsWith("turn:")?(d=!0,h=!0):m.startsWith("turns:")&&(d=!0,h=!0,l=!0),m.startsWith("stun:")&&(h=!0);h?d&&!l&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield s.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||d?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(f=>setTimeout(f,0)))})}}class EM extends js{get description(){return"Establishing WebRTC connection"}perform(){return N(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ie.SignalConnected,()=>{var s;const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(l,d)=>{if(l.candidate){const h=new RTCIceCandidate(l);let f="".concat(h.protocol," ").concat(h.address,":").concat(h.port," ").concat(h.type);h.address&&(NM(h.address)?f+=" (private)":h.protocol==="tcp"&&h.tcpType==="passive"?(e=!0,f+=" (passive)"):h.protocol==="udp"&&(n=!0)),this.appendMessage(f)}r&&r(l,d)},!((s=this.room.engine.pcManager)===null||s===void 0)&&s.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=l=>{l instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(l.errorCode," ").concat(l.errorText," ").concat(l.url))})});try{yield this.connect(),Ae.info("now the room is connected")}catch(s){throw this.appendWarning("ports need to be open on firewall in order to connect."),s}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function NM(i){const e=i.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class wM extends js{get description(){return"Connecting to signal connection via WebSocket"}perform(){return N(this,void 0,void 0,function*(){var e,n,s;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new wm;const l=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(l.serverVersion,".")),((e=l.serverInfo)===null||e===void 0?void 0:e.edition)===LS.Cloud&&(!((n=l.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((s=l.serverInfo)===null||s===void 0?void 0:s.region)),yield r.close()})}}class YM extends oi.EventEmitter{constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=s}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:qn.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==qn.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return N(this,void 0,void 0,function*(){const n=this.getNextCheckId(),s=new e(this.url,this.token,this.options),r=d=>{this.updateCheck(n,d)};s.on("update",r);const l=yield s.run();return s.off("update",r),l})}checkWebsocket(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(wM)})}checkWebRTC(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(EM)})}checkTURN(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(kM)})}checkReconnect(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(CM)})}checkPublishAudio(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(SM)})}checkPublishVideo(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(TM)})}checkConnectionProtocol(){return N(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(xM);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return N(this,void 0,void 0,function*(){return this.createAndRunCheck(bM)})}}function Ie(i,e,n){return(e=RM(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function jM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function RM(i){var e=jM(i,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class Zt extends Error{constructor(e,n){var s;super(e,n),Ie(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(s=Error.captureStackTrace)===null||s===void 0||s.call(Error,this,this.constructor)}}Ie(Zt,"code","ERR_JOSE_GENERIC");class _M extends Zt{constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:s,reason:r,payload:n}}),Ie(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),Ie(this,"claim",void 0),Ie(this,"reason",void 0),Ie(this,"payload",void 0),this.claim=s,this.reason=r,this.payload=n}}Ie(_M,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class OM extends Zt{constructor(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:s,reason:r,payload:n}}),Ie(this,"code","ERR_JWT_EXPIRED"),Ie(this,"claim",void 0),Ie(this,"reason",void 0),Ie(this,"payload",void 0),this.claim=s,this.reason=r,this.payload=n}}Ie(OM,"code","ERR_JWT_EXPIRED");class AM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}Ie(AM,"code","ERR_JOSE_ALG_NOT_ALLOWED");class MM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Ie(MM,"code","ERR_JOSE_NOT_SUPPORTED");class DM extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ie(this,"code","ERR_JWE_DECRYPTION_FAILED")}}Ie(DM,"code","ERR_JWE_DECRYPTION_FAILED");class PM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JWE_INVALID")}}Ie(PM,"code","ERR_JWE_INVALID");class LM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JWS_INVALID")}}Ie(LM,"code","ERR_JWS_INVALID");class IM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JWT_INVALID")}}Ie(IM,"code","ERR_JWT_INVALID");class UM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JWK_INVALID")}}Ie(UM,"code","ERR_JWK_INVALID");class zM extends Zt{constructor(){super(...arguments),Ie(this,"code","ERR_JWKS_INVALID")}}Ie(zM,"code","ERR_JWKS_INVALID");class BM extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ie(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}Ie(BM,"code","ERR_JWKS_NO_MATCHING_KEY");class qM extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ie(this,Symbol.asyncIterator,void 0),Ie(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}Ie(qM,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class FM extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ie(this,"code","ERR_JWKS_TIMEOUT")}}Ie(FM,"code","ERR_JWKS_TIMEOUT");class VM extends Zt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ie(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}Ie(VM,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");const HM=()=>{const[i,e]=E.useState(null),[n,s]=E.useState([]);return E.useEffect(()=>((async()=>{const d=await(await fetch("/api/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_name:"my-room",identity:"user-"+Math.random()})})).json(),h=new fr;await h.connect("ws://localhost:7880",d.token),e(h),s(Array.from(h.participants.values())),h.on(ie.ParticipantConnected,f=>{s(m=>[...m,f])}),h.on(ie.ParticipantDisconnected,f=>{s(m=>m.filter(v=>v.sid!==f.sid))})})(),()=>{i&&i.disconnect()}),[]),c.jsxs("div",{children:[c.jsx("h1",{children:"Live Stream"}),c.jsx("div",{id:"video-grid",children:n.map(r=>c.jsx("div",{children:c.jsx("p",{children:r.identity})},r.sid))})]})};function GM(){return c.jsx(HE,{children:c.jsxs("div",{className:"App",children:[c.jsx(xR,{}),c.jsx("main",{children:c.jsxs(SE,{children:[c.jsx(xn,{path:"/",element:c.jsx(LR,{})}),c.jsx(xn,{path:"/about",element:c.jsx(IR,{})}),c.jsx(xn,{path:"/about-master",element:c.jsx(UR,{})}),c.jsx(xn,{path:"/online-courses",element:c.jsx(qR,{})}),c.jsx(xn,{path:"/offline-courses",element:c.jsx(FR,{})}),c.jsx(xn,{path:"/shop",element:c.jsx(VR,{})}),c.jsx(xn,{path:"/appointment",element:c.jsx(HR,{})}),c.jsx(xn,{path:"/faq",element:c.jsx(GR,{})}),c.jsx(xn,{path:"/contact",element:c.jsx(KR,{})}),c.jsx(xn,{path:"/reviews",element:c.jsx(YR,{})}),c.jsx(xn,{path:"/member",element:c.jsx(w_,{})}),c.jsx(xn,{path:"/live",element:c.jsx(HM,{})})]})}),c.jsx(SR,{}),c.jsx(MR,{}),c.jsx(PR,{title:" - ",description:"12"})]})})}_k.createRoot(document.getElementById("root")).render(c.jsx(E.StrictMode,{children:c.jsx(GM,{})}));
